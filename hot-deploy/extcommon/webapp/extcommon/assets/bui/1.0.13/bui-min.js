!function(e,t){function n(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function i(){return S++}function r(e){return e.match(A)[0]}function a(e){for(e=e.replace(k,"/");e.match(U);)e=e.replace(U,"/");return e=e.replace(R,"$1/")}function o(e){var t=e.length-1,n=e.charAt(t);return"#"===n?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===n?e:e+".js"}function s(e){var t=C.alias;return t&&w(t[e])?t[e]:e}function l(e){var t,n=C.paths;return n&&(t=e.match(V))&&w(n[t[1]])&&(e=n[t[1]]+t[2]),e}function u(e){var t=C.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(F,function(e,n){return w(t[n])?t[n]:e})),e}function c(e){var t=C.map,n=e;if(t)for(var i=0,r=t.length;r>i;i++){var a=t[i];if(n=_(a)?a(e)||e:e.replace(a[0],a[1]),n!==e)break}return n}function d(e,t){var n,i=e.charAt(0);if(j.test(e))n=e;else if("."===i)n=a((t?r(t):C.cwd)+e);else if("/"===i){var o=C.cwd.match(D);n=o?o[0]+e.substring(1):e}else n=C.base+e;return 0===n.indexOf("//")&&(n=location.protocol+n),n}function f(e,t){if(!e)return"";e=s(e),e=l(e),e=u(e),e=o(e);var n=d(e,t);return n=c(n)}function g(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function h(e,t,n){var i=X.test(e),r=M.createElement(i?"link":"script");if(n){var a=_(n)?n(e):n;a&&(r.charset=a)}v(r,t,i,e),i?(r.rel="stylesheet",r.href=e):(r.async=!0,r.src=e),O=r,z?W.insertBefore(r,z):W.appendChild(r),O=null}function v(e,t,n,i){function r(){e.onload=e.onerror=e.onreadystatechange=null,n||C.debug||W.removeChild(e),e=null,t()}var a="onload"in e;return!n||!Y&&a?void(a?(e.onload=r,e.onerror=function(){B("error",{uri:i,node:e}),r()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&r()}):void setTimeout(function(){m(e,t)},1)}function m(e,t){var n,i=e.sheet;if(Y)i&&(n=!0);else if(i)try{i.cssRules&&(n=!0)}catch(r){"NS_ERROR_DOM_SECURITY_ERR"===r.name&&(n=!0)}setTimeout(function(){n?t():m(e,t)},20)}function p(){if(O)return O;if(H&&"interactive"===H.readyState)return H;for(var e=W.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var n=e[t];if("interactive"===n.readyState)return H=n}}function b(e){var t=[];return e.replace(K,"").replace(J,function(e,n,i){i&&t.push(i)}),t}function y(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!e.seajs){var x=e.seajs={version:"2.2.1"},C=x.data={},T=n("Object"),w=n("String"),I=Array.isArray||n("Array"),_=n("Function"),S=0,E=C.events={};x.on=function(e,t){var n=E[e]||(E[e]=[]);return n.push(t),x},x.off=function(e,t){if(!e&&!t)return E=C.events={},x;var n=E[e];if(n)if(t)for(var i=n.length-1;i>=0;i--)n[i]===t&&n.splice(i,1);else delete E[e];return x};var B=x.emit=function(e,t){var n,i=E[e];if(i)for(i=i.slice();n=i.shift();)n(t);return x},A=/[^?#]*\//,k=/\/\.\//g,U=/\/[^/]+\/\.\.\//,R=/([^:/])\/\//g,V=/^([^/:]+)(\/.+)$/,F=/{([^{]+)}/g,j=/^\/\/.|:\//,D=/^.*?\/\/.*?\//,M=document,P=r(M.URL),q=M.scripts,N=M.getElementById("seajsnode")||q[q.length-1],L=r(g(N)||P);x.resolve=f;var O,H,W=M.head||M.getElementsByTagName("head")[0]||M.documentElement,z=W.getElementsByTagName("base")[0],X=/\.css(?:\?|$)/i,Y=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;x.request=h;var G,J=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,K=/\\\\/g,$=x.cache={},Z={},Q={},et={},tt=y.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};y.prototype.resolve=function(){for(var e=this,t=e.dependencies,n=[],i=0,r=t.length;r>i;i++)n[i]=y.resolve(t[i],e.uri);return n},y.prototype.load=function(){var e=this;if(!(e.status>=tt.LOADING)){e.status=tt.LOADING;var t=e.resolve();B("load",t);for(var n,i=e._remain=t.length,r=0;i>r;r++)n=y.get(t[r]),n.status<tt.LOADED?n._waitings[e.uri]=(n._waitings[e.uri]||0)+1:e._remain--;if(0===e._remain)return void e.onload();var a={};for(r=0;i>r;r++)n=$[t[r]],n.status<tt.FETCHING?n.fetch(a):n.status===tt.SAVED&&n.load();for(var o in a)a.hasOwnProperty(o)&&a[o]()}},y.prototype.onload=function(){var e=this;e.status=tt.LOADED,e.callback&&e.callback();var t,n,i=e._waitings;for(t in i)i.hasOwnProperty(t)&&(n=$[t],n._remain-=i[t],0===n._remain&&n.onload());delete e._waitings,delete e._remain},y.prototype.fetch=function(e){function t(){x.request(a.requestUri,a.onRequest,a.charset)}function n(){delete Z[o],Q[o]=!0,G&&(y.save(r,G),G=null);var e,t=et[o];for(delete et[o];e=t.shift();)e.load()}var i=this,r=i.uri;i.status=tt.FETCHING;var a={uri:r};B("fetch",a);var o=a.requestUri||r;return!o||Q[o]?void i.load():Z[o]?void et[o].push(i):(Z[o]=!0,et[o]=[i],B("request",a={uri:r,requestUri:o,onRequest:n,charset:C.charset}),void(a.requested||(e?e[a.requestUri]=t:t())))},y.prototype.exec=function(){function e(t){return y.get(e.resolve(t)).exec()}var n=this;if(n.status>=tt.EXECUTING)return n.exports;n.status=tt.EXECUTING;var r=n.uri;e.resolve=function(e){return y.resolve(e,r)},e.async=function(t,n){return y.use(t,n,r+"_async_"+i()),e};var a=n.factory,o=_(a)?a(e,n.exports={},n):a;return o===t&&(o=n.exports),delete n.factory,n.exports=o,n.status=tt.EXECUTED,B("exec",n),o},y.resolve=function(e,t){var n={id:e,refUri:t};return B("resolve",n),n.uri||x.resolve(n.id,t)},y.define=function(e,n,i){var r=arguments.length;1===r?(i=e,e=t):2===r&&(i=n,I(e)?(n=e,e=t):n=t),!I(n)&&_(i)&&(n=b(i.toString()));var a={id:e,uri:y.resolve(e),deps:n,factory:i};if(!a.uri&&M.attachEvent){var o=p();o&&(a.uri=o.src)}B("define",a),a.uri?y.save(a.uri,a):G=a},y.save=function(e,t){var n=y.get(e);n.status<tt.SAVED&&(n.id=t.id||e,n.dependencies=t.deps||[],n.factory=t.factory,n.status=tt.SAVED)},y.get=function(e,t){return $[e]||($[e]=new y(e,t))},y.use=function(t,n,i){var r=y.get(i,I(t)?t:[t]);r.callback=function(){for(var t=[],i=r.resolve(),a=0,o=i.length;o>a;a++)t[a]=$[i[a]].exec();n&&n.apply(e,t),delete r.callback},r.load()},y.preload=function(e){var t=C.preload,n=t.length;n?y.use(t,function(){t.splice(0,n),y.preload(e)},C.cwd+"_preload_"+i()):e()},x.use=function(e,t){return y.preload(function(){y.use(e,t,C.cwd+"_use_"+i())}),x},y.define.cmd={},e.define=y.define,x.Module=y,C.fetchedList=Q,C.cid=i,x.require=function(e){var t=y.get(y.resolve(e));return t.status<tt.EXECUTING&&(t.onload(),t.exec()),t.exports};var nt=/^(.+?\/)(\?\?)?(seajs\/)+/;C.base=(L.match(nt)||["",L])[1],C.dir=L,C.cwd=P,C.charset="utf-8",C.preload=function(){var e=[],t=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return t+=" "+M.cookie,t.replace(/(seajs-\w+)=1/g,function(t,n){e.push(n)}),e}(),x.config=function(e){for(var t in e){var n=e[t],i=C[t];if(i&&T(i))for(var r in n)i[r]=n[r];else I(i)?n=i.concat(n):"base"===t&&("/"!==n.slice(-1)&&(n+="/"),n=d(n)),C[t]=n}return B("config",e),x}}}(this),function(){var e;e=function(){function e(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}var t=window.BUI=window.BUI||{};t.use=seajs.use,t.config=seajs.config;var n=document.getElementsByTagName("script"),i=n[n.length-1],r=e(i),a=r.substring(0,r.lastIndexOf("/")),o="true"===i.getAttribute("debug")?!0:!1;t.loaderScript=i,seajs.config({paths:{bui:a}}),t.setDebug=function(e){t.debug=e;var n=new RegExp("^("+a+"\\S*).js$");if(e){var i,r=seajs.data.map;if(!r)return;for(var o=r.length-1;o>=0;o--)i=r[o][0],"[object RegExp]"===Object.prototype.toString.call(i)&&i.toString()===n.toString()&&r.splice(o,1)}else seajs.config({map:[[n,"$1-min.js"]]})},t.setDebug(o),window.jQuery&&window.define("jquery",[],function(){return window.jQuery})}()}(),define("bui/common",["jquery"],function(e,t,n){var i=e("bui/common/util");i.mix(i,{UA:e("bui/common/ua"),JSON:e("bui/common/json"),Date:e("bui/common/date"),Array:e("bui/common/array"),KeyCode:e("bui/common/keycode"),Observable:e("bui/common/observable"),Base:e("bui/common/base"),Component:e("bui/common/component/component")}),n.exports=i}),define("bui/common/util",["jquery"],function(e,t,n){function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=e[n]||{},r(e[n],t[n]))}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&("value"==n?BUI.isObject(t[n])?(e[n]=e[n]||{},BUI.mix(e[n],t[n])):BUI.isArray(t[n])?(e[n]=e[n]||[],e[n]=e[n].concat(t[n])):e[n]=t[n]:e[n]=t[n])}var a=e("jquery");!function(e){e.fn&&(e.fn.on=e.fn.on||e.fn.bind,e.fn.off=e.fn.off||e.fn.unbind)}(a);var o=window,s=document,l=Object.prototype,u=l.toString,c="body",d="documentElement",f="scroll",g=f+"Width",h=f+"Height",v="ATTRS",m="PARSER",p="guid";window.BUI=window.BUI||{},a.extend(BUI,{version:"1.1.0",isFunction:function(e){return"function"==typeof e},isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===u.call(e)},isDate:function(e){return"[object Date]"===u.call(e)},isObject:"[object Object]"===u.call(null)?function(e){return null!==e&&void 0!==e&&"[object Object]"===u.call(e)&&void 0===e.ownerDocument}:function(e){return"[object Object]"===u.call(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},augment:function(e){if(!BUI.isFunction(e))return e;for(var t=1;t<arguments.length;t++)BUI.mix(e.prototype,arguments[t].prototype||arguments[t]);return e},cloneObject:function(e){var t=BUI.isArray(e)?[]:{};return BUI.mix(!0,t,e)},error:function(e){if(BUI.debug)throw e},extend:function(e,t,n,i){BUI.isFunction(t)||(n=t,t=e,e=function(){});var r=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;var i=new n;return i.constructor=t,i},a=r(t.prototype,e);return e.prototype=BUI.mix(a,e.prototype),e.superclass=r(t.prototype,t),BUI.mix(a,n),BUI.mix(e,i),e},guid:function(){var e={};return function(t){return t=t||BUI.prefix+p,e[t]?e[t]+=1:e[t]=1,t+e[t]}}(),isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isBoolean:function(e){return"boolean"==typeof e},log:function(e){BUI.debug&&o.console&&o.console.log&&o.console.log(e)},merge:function(){var e=a.makeArray(arguments),t=e[0];return BUI.isBoolean(t)?(e.shift(),e.unshift({}),e.unshift(t)):e.unshift({}),BUI.mix.apply(null,e)},mix:function(){return a.extend.apply(null,arguments)},app:function(e){return window[e]||(window[e]={namespace:function(t){return BUI.namespace(t,window[e])}}),window[e]},mixAttrs:i,mixAttr:r,mixin:function(e,t,n){n=n||[v,m];var r=t;if(r){e.mixins=r;var a={},o=r.concat(e);BUI.each(o,function(e){e&&BUI.each(n,function(t){e[t]&&(a[t]=a[t]||{},"ATTRS"==t?i(a[t],e[t]):BUI.mix(a[t],e[t]))})}),BUI.each(a,function(t,n){e[n]=t});var s={};BUI.each(o,function(e){if(e){var t=e.prototype;for(var n in t)t.hasOwnProperty(n)&&(s[n]=t[n])}}),BUI.each(s,function(t,n){e.prototype[n]=t})}return e},namespace:function(e,t){if(t=t||BUI,!e)return t;for(var n=e.split("."),i=t,r=0;r<n.length;r++){var a=n[r];i[a]||(i[a]={}),i=i[a]}return i},prefix:"bui-",substitute:function(e,t,n){return BUI.isString(e)&&(BUI.isObject(t)||BUI.isArray(t))?e.replace(n||/\\?\{([^{}]+)\}/g,function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]}):e},unparam:function(e){if("string"!=typeof e||!(e=a.trim(e)))return{};for(var t,n=e.split("&"),i={},r=n.length-1;r>=0;r--)t=n[r].split("="),i[t[0]]=decodeURIComponent(t[1]);return i},ucfirst:function(e){return e+="",e.charAt(0).toUpperCase()+e.substring(1)},isInView:function(e){var t=e.left,n=e.top,i=BUI.viewportWidth(),r=BUI.viewportHeight(),a=BUI.scrollTop(),o=BUI.scrollLeft();return o>t||t>o+i?!1:a>n||n>a+r?!1:!0},isInVerticalView:function(e){var t=BUI.viewportHeight(),n=BUI.scrollTop();return n>e||e>n+t?!1:!0},isInHorizontalView:function(e){var t=BUI.viewportWidth(),n=BUI.scrollLeft();return n>e||e>n+t?!1:!0},viewportWidth:function(){return a(window).width()},viewportHeight:function(){return a(window).height()},scrollLeft:function(){return a(window).scrollLeft()},scrollTop:function(){return a(window).scrollTop()},docWidth:function(){return Math.max(this.viewportWidth(),s[d][g],s[c][g])},docHeight:function(){return Math.max(this.viewportHeight(),s[d][h],s[c][h])},each:function(e,t){e&&a.each(e,function(e,n){return t(n,e)})},wrapBehavior:function(e,t){return e["__bui_wrap_"+t]=function(n){e.get("disabled")||e[t](n)}},getWrapBehavior:function(e,t){return e["__bui_wrap_"+t]},getControl:function(e){return BUI.Component.Manager.getComponent(e)},setValue:function(e,t,n){if(!e&&!t)return e;for(var i=t.split("."),r=e,a=i.length,o=0;a>o&&(r&&BUI.isObject(r));o++){var s=i[o];if(o===a-1){r[s]=n;break}r[s]||(r[s]={}),r=r[s]}return e},getValue:function(e,t){if(!e&&!t)return null;for(var n=t.split("."),i=e,r=n.length,a=null,o=0;r>o&&(i&&BUI.isObject(i));o++){var s=n[o];if(o===r-1){a=i[s];break}if(!i[s])break;i=i[s]}return a}});var b={serializeToObject:function(e){var t=a(e).serializeArray(),n={};return BUI.each(t,function(e){var t=e.name;n[t]?(BUI.isArray(n[t])||(n[t]=[n[t]]),n[t].push(e.value)):n[t]=e.value}),n},setFields:function(e,t){for(var n in t)t.hasOwnProperty(n)&&BUI.FormHelper.setField(e,n,t[n])},clear:function(e){var t=a.makeArray(e.elements);BUI.each(t,function(e){"checkbox"===e.type||"radio"===e.type?a(e).attr("checked",!1):a(e).val(""),a(e).change()})},setField:function(e,t,n){var i=e.elements[t];i&&i.type?b._setFieldValue(i,n):(BUI.isArray(i)||i&&i.length)&&BUI.each(i,function(e){b._setFieldValue(e,n)})},_setFieldValue:function(e,t){"checkbox"===e.type?e.value==""+t||BUI.isArray(t)&&-1!==BUI.Array.indexOf(e.value,t)?a(e).attr("checked",!0):a(e).attr("checked",!1):"radio"===e.type?e.value==""+t?a(e).attr("checked",!0):a(e).attr("checked",!1):a(e).val(t)},getField:function(e,t){return BUI.FormHelper.serializeToObject(e)[t]}};BUI.FormHelper=b,n.exports=BUI}),define("bui/common/ua",["jquery"],function(e,t,n){function i(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0===t++?".":""}))}function r(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n={browser:t[1]||"",version:t[2]||"0"},i={};return n.browser&&(i[n.browser]=!0,i.version=n.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0),i}var a=e("jquery"),o=a.UA||function(){var e=a.browser||r(navigator.userAgent),t=i(e.version),n={ie:e.msie&&t,webkit:e.webkit&&t,opera:e.opera&&t,mozilla:e.mozilla&&t};return n}();n.exports=o}),define("bui/common/json",["jquery"],function(e,t,n){function i(e){return 10>e?"0"+e:e}function r(e){return h.lastIndex=0,h.test(e)?'"'+e.replace(h,function(e){var t=v[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function a(e,t){var n,i,o,s,l,u=d,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof g&&(c=g.call(t,e,c)),typeof c){case"string":return r(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(d+=f,l=[],"[object Array]"===Object.prototype.toString.apply(c)){for(s=c.length,n=0;s>n;n+=1)l[n]=a(n,c)||"null";return o=0===l.length?"[]":d?"[\n"+d+l.join(",\n"+d)+"\n"+u+"]":"["+l.join(",")+"]",d=u,o}if(g&&"object"==typeof g)for(s=g.length,n=0;s>n;n+=1)i=g[n],"string"==typeof i&&(o=a(i,c),o&&l.push(r(i)+(d?": ":":")+o));else for(i in c)Object.hasOwnProperty.call(c,i)&&(o=a(i,c),o&&l.push(r(i)+(d?": ":":")+o));return o=0===l.length?"{}":d?"{\n"+d+l.join(",\n"+d)+"\n"+u+"}":"{"+l.join(",")+"}",d=u,o}}function o(e){try{return new Function("return "+e+";")()}catch(t){throw"Json parse error!"}}var s=e("jquery"),l=e("bui/common/ua"),u=window,c=u.JSON;(!c||l.ie<9)&&(c=u.JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d,f,g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof c.stringify&&(c.stringify=function(e,t,n){var i;if(d="",f="","number"==typeof n)for(i=0;n>i;i+=1)f+=" ";else"string"==typeof n&&(f=n);if(g=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return a("",{"":e})});var c={parse:s.parseJSON,looseParse:o,stringify:c.stringify};n.exports=c}),define("bui/common/date",[],function(e,t,n){function i(e,t){if(e instanceof Date)return e;if("undefined"==typeof t||null==t||""==t){for(var n=new Array("y-m-d","yyyy-mm-dd","yyyy-mm-dd HH:MM:ss","H:M:s"),r=0;r<n.length;r++){var a=i(e,n[r]);if(null!=a)return a}return null}e+="";var o,s,l=0,u=0,c="",d="",f=new Date,g=f.getYear(),h=f.getMonth()+1,v=1,m=0,p=0,b=0;for(this.isInteger=function(e){return/^\d*$/.test(e)},this.getInt=function(e,t,n,i){for(var r=i;r>=n;r--){var a=e.substring(t,t+r);if(a.length<n)return null;if(this.isInteger(a))return a}return null};u<t.length;){for(c=t.charAt(u),d="";t.charAt(u)==c&&u<t.length;)d+=t.charAt(u++);if("yyyy"==d||"yy"==d||"y"==d){if("yyyy"==d&&(o=4,s=4),"yy"==d&&(o=2,s=2),"y"==d&&(o=2,s=4),g=this.getInt(e,l,o,s),null==g)return null;l+=g.length,2==g.length&&(g=g>70?1900+(g-0):2e3+(g-0))}else if("mm"==d||"m"==d){if(h=this.getInt(e,l,d.length,2),null==h||1>h||h>12)return null;l+=h.length}else if("dd"==d||"d"==d){if(v=this.getInt(e,l,d.length,2),null==v||1>v||v>31)return null;l+=v.length}else if("hh"==d||"h"==d){if(m=this.getInt(e,l,d.length,2),null==m||1>m||m>12)return null;l+=m.length}else if("HH"==d||"H"==d){if(m=this.getInt(e,l,d.length,2),null==m||0>m||m>23)return null;l+=m.length}else if("MM"==d||"M"==d){if(p=this.getInt(e,l,d.length,2),null==p||0>p||p>59)return null;l+=p.length}else if("ss"==d||"s"==d){if(b=this.getInt(e,l,d.length,2),null==b||0>b||b>59)return null;l+=b.length}else{if(e.substring(l,l+d.length)!=d)return null;l+=d.length}}if(l!=e.length)return null;if(2==h)if(g%4==0&&g%100!=0||g%400==0){if(v>29)return null}else if(v>28)return null;return(4==h||6==h||9==h||11==h)&&v>30?null:new Date(g,h-1,v,m,p,b)}function r(e,t,n){var i=new Date(n);switch(isNaN(i)&&(i=new Date),t=parseInt(t,10),e){case"s":i=new Date(i.getTime()+1e3*t);break;case"n":i=new Date(i.getTime()+6e4*t);break;case"h":i=new Date(i.getTime()+36e5*t);break;case"d":i=new Date(i.getTime()+864e5*t);break;case"w":i=new Date(i.getTime()+6048e5*t);break;case"m":i=new Date(i.getFullYear(),i.getMonth()+t,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());break;case"y":i=new Date(i.getFullYear()+t,i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds())}return i}var a=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,o=function(){var e=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,i=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e},r={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},a={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(o,s,l){if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(o)||/\d/.test(o)||(s=o,o=void 0),o=o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");s=String(r[s]||s||r["default"]),"UTC:"===s.slice(0,4)&&(s=s.slice(4),l=!0);var u=l?"getUTC":"get",c=o[u+"Date"](),d=o[u+"Day"](),f=o[u+"Month"](),g=o[u+"FullYear"](),h=o[u+"Hours"](),v=o[u+"Minutes"](),m=o[u+"Seconds"](),p=o[u+"Milliseconds"](),b=l?0:o.getTimezoneOffset(),y={d:c,dd:i(c,void 0),ddd:a.dayNames[d],dddd:a.dayNames[d+7],w:a.dayNames[d+14],m:f+1,mm:i(f+1,void 0),mmm:a.monthNames[f],mmmm:a.monthNames[f+12],yy:String(g).slice(2),yyyy:g,h:h%12||12,hh:i(h%12||12,void 0),H:h,HH:i(h,void 0),M:v,MM:i(v,void 0),s:m,ss:i(m,void 0),l:i(p,3),L:i(p>99?Math.round(p/10):p,void 0),t:12>h?"a":"p",tt:12>h?"am":"pm",T:12>h?"A":"P",TT:12>h?"AM":"PM",Z:l?"UTC":(String(o).match(t)||[""]).pop().replace(n,""),o:(b>0?"-":"+")+i(100*Math.floor(Math.abs(b)/60)+Math.abs(b)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!==10)*c%10]};return s.replace(e,function(e){return e in y?y[e]:e.slice(1,e.length-1)})}}(),s={add:function(e,t,n){return r(e,t,n)},addHour:function(e,t){return r("h",e,t)},addMinute:function(e,t){return r("n",e,t)},addSecond:function(e,t){return r("s",e,t)},addDay:function(e,t){return r("d",e,t)},addWeek:function(e,t){return r("w",e,t)},addMonths:function(e,t){return r("m",e,t)},addYear:function(e,t){return r("y",e,t)},isDateEquals:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},isEquals:function(e,t){return e==t?!0:e&&t&&e.getTime&&t.getTime?e.getTime()==t.getTime():!1},isDateString:function(e){return a.test(e)},format:function(e,t,n){return o(e,t,n)},parse:function(e,t){return BUI.isString(e)&&(e=e.replace("/","-")),i(e,t)},today:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},getDate:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}};n.exports=s}),define("bui/common/array",["jquery"],function(e,t,n){var i=e("bui/common/util"),r={peek:function(e){return e[e.length-1]},indexOf:function(e,t,n){for(var i=null==n?0:0>n?Math.max(0,t.length+n):n,r=i;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},contains:function(e,t){return r.indexOf(e,t)>=0},each:i.each,equals:function(e,t){if(e==t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=!0,i=0;i<e.length;i++)if(e[i]!==t[i]){n=!1;break}return n},filter:function(e,t){var n=[];return r.each(e,function(e,i){t(e,i)&&n.push(e)}),n},map:function(e,t){var n=[];return r.each(e,function(e,i){n.push(t(e,i))}),n},find:function(e,t){var n=r.findIndex(e,t);return 0>n?null:e[n]},findIndex:function(e,t){var n=-1;return r.each(e,function(e,i){return t(e,i)?(n=i,!1):void 0}),n},isEmpty:function(e){return 0==e.length},add:function(e,t){e.push(t)},addAt:function(e,t,n){r.splice(e,n,0,t)},empty:function(e){if(!(e instanceof Array))for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0},remove:function(e,t){var n,i=r.indexOf(t,e);return(n=i>=0)&&r.removeAt(e,i),n},removeAt:function(e,t){return 1==r.splice(e,t,1).length},slice:function(e,t,n){return arguments.length<=2?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},splice:function(e){return Array.prototype.splice.apply(e,r.slice(arguments,1))}};n.exports=r}),define("bui/common/keycode",[],function(e,t,n){var i={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};n.exports=i}),define("bui/common/observable",["jquery"],function(e,t,n){function i(){return new s}var r=e("jquery"),a=e("bui/common/util"),o=e("bui/common/array"),s=function(){this._init()};a.augment(s,{_functions:null,_init:function(){var e=this;e._functions=[]},add:function(e){this._functions.push(e)},remove:function(e){var t=this._functions;index=o.indexOf(e,t),index>=0&&t.splice(index,1)},empty:function(){var e=this._functions.length;this._functions.splice(0,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1},fireWith:function(e,t){var n,i=this;if(!i._paused)return a.each(i._functions,function(i){return n=i.apply(e,t),n===!1?!1:void 0}),n}});var l=function(e){this._events=[],this._eventMap={},this._bubblesEvents=[],this._initEvents(e)};a.augment(l,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(e){var t=this,n=t._eventMap;return n[e]},_initEvents:function(e){var t=this,n=null;if(e&&(n=e.listeners||{},e.handler&&(n.click=e.handler),n))for(var i in n)n.hasOwnProperty(i)&&t.on(i,n[i])},_isBubbles:function(e){return o.indexOf(e,this._bubblesEvents)>=0},addTarget:function(e){this._bubbleTarget=e},addEvents:function(e){function t(e){-1===o.indexOf(e,r)&&(s[e]=i(),r.push(e))}var n=this,r=n._events,s=n._eventMap;a.isArray(e)?a.each(e,function(e){t(e)}):t(e)},clearListeners:function(){var e=this,t=e._eventMap;for(var n in t)t.hasOwnProperty(n)&&t[n].empty()},fire:function(e,t){var n,i=this,a=i._getCallbacks(e),o=r.makeArray(arguments);if(t||(t={},o.push(t)),t.target||(t.target=i),a&&(n=a.fireWith(i,Array.prototype.slice.call(o,1))),i._isBubbles(e)){var s=i._bubbleTarget;s&&s.fire&&s.fire(e,t)}return n},pauseEvent:function(e){var t=this,n=t._getCallbacks(e);n&&n.pause()},resumeEvent:function(e){var t=this,n=t._getCallbacks(e);n&&n.resume()},on:function(e,t){var n=e.split(" "),i=this,r=null;return n.length>1?a.each(n,function(e){i.on(e,t)}):(r=i._getCallbacks(e),r?r.add(t):(i.addEvents(e),i.on(e,t))),i},off:function(e,t){if(!e&&!t)return this.clearListeners(),this;var n=this,i=n._getCallbacks(e);return i&&(t?i.remove(t):i.empty()),n},publish:function(e,t){var n=this,i=n._bubblesEvents;if(t.bubbles)-1===a.Array.indexOf(e,i)&&i.push(e);else{var r=a.Array.indexOf(e,i);-1!==r&&i.splice(r,1)}}}),n.exports=l}),define("bui/common/base",["jquery"],function(e,t,n){function i(e,t,n){var i=e[t]||{};return n&&(e[t]=i),i}function r(e,t){return BUI.isString(t)?e[t]:t}function a(e,t,n,i,r){var a=n;return e.fire(t+BUI.ucfirst(n)+"Change",{attrName:a,prevVal:i,newVal:r})}function o(e,t,n,i){i=i||{};var r,o;return o=e.get(t),l.isPlainObject(n)||BUI.isArray(n)||o!==n?i.silent||!1!==a(e,"before",t,o,n)?(r=e._set(t,n,i),r===!1?r:(i.silent||(n=e.__attrVals[t],a(e,"after",t,o,n)),e)):!1:void 0}function s(e){if(!e._attrs&&e!=d){var t=e.superclass.constructor;t&&!t._attrs&&s(t),e._attrs={},BUI.mixAttrs(e._attrs,t._attrs),BUI.mixAttrs(e._attrs,e.ATTRS)}}var l=e("jquery"),u={},c=e("bui/common/observable"),d=function(e){var t=this,n=t.constructor,i=[];for(this.__attrs={},this.__attrVals={},c.apply(this,arguments);n;)i.push(n),n.extensions&&(BUI.mixin(n,n.extensions),delete n.extensions),n=n.superclass?n.superclass.constructor:null;var r=t.constructor;s(r),t._initStaticAttrs(r._attrs),t._initAttrs(e)};d.INVALID=u,BUI.extend(d,c),BUI.augment(d,{_initStaticAttrs:function(e){var t,n=this;t=n.__attrs={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];r.shared===!1||r.valueFn?(t[i]={},BUI.mixAttr(t[i],e[i])):t[i]=e[i]}},addAttr:function(e,t){var n=this,i=n.__attrs,r=i[e];r||(r=i[e]={});for(var a in t)t.hasOwnProperty(a)&&("value"==a?BUI.isObject(t[a])?(r[a]=r[a]||{},BUI.mix(r[a],t[a])):BUI.isArray(t[a])?(r[a]=r[a]||[],BUI.mix(r[a],t[a])):r[a]=t[a]:r[a]=t[a]);return n},addAttrs:function(e,t,n){var i=this;return e?("boolean"==typeof t&&(n=t,t=null),BUI.each(e,function(e,t){i.addAttr(t,e,n)}),t&&i.set(t),i):i},hasAttr:function(e){return e&&this.__attrs.hasOwnProperty(e)},getAttrs:function(){return this.__attrs},getAttrVals:function(){return this.__attrVals},get:function(e){var t,n,a,o=this,s=o.__attrVals;return t=i(o.__attrs,e),n=t.getter,a=e in s?s[e]:o._getDefAttrVal(e),n&&(n=r(o,n))&&(a=n.call(o,a,e)),a},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(e){var t=this;return t.hasAttr(e)&&(delete t.__attrs[e],delete t.__attrVals[e]),t},set:function(e,t,n){var i=this;if(l.isPlainObject(e)){n=t;var r=Object(e);for(e in r)r.hasOwnProperty(e)&&o(i,e,r[e],n);return i}return o(i,e,t,n)},setInternal:function(e,t,n){return this._set(e,t,n)},_getDefAttrVal:function(e){var t,n=this,a=n.__attrs,o=i(a,e),s=o.valueFn;return s&&(s=r(n,s))&&(t=s.call(n),void 0!==t&&(o.value=t),delete o.valueFn,a[e]=o),o.value},_set:function(e,t){var n,a=this,o=i(a.__attrs,e,!0),s=o.setter;return s&&(s=r(a,s))&&(n=s.call(a,t,e)),n===u?!1:(void 0!==n&&(t=n),a.__attrVals[e]=t,a)},_initAttrs:function(e){var t=this;if(e)for(var n in e)e.hasOwnProperty(n)&&t._set(n,e[n])}}),n.exports=d}),define("bui/common/component/component",["jquery"],function(e,t,n){function i(e,t){var n,i;return e&&(i=e.xclass)&&(t&&!e.prefixCls&&(e.prefixCls=t.get("prefixCls")),n=r.Manager.getConstructorByXClass(i),n||BUI.error("can not find class by xclass desc : "+i),e=new n(e)),e}var r={};BUI.mix(r,{Manager:e("bui/common/component/manage"),UIBase:e("bui/common/component/uibase/uibase"),View:e("bui/common/component/view"),Controller:e("bui/common/component/controller")}),r.create=i,n.exports=r}),define("bui/common/component/manage",["jquery"],function(e,t,n){function i(e){for(var t,n=e.split(/\s+/),i=-1,r=null,a=0;a<n.length;a++){var o=l[n[a]];o&&(t=o.priority)>i&&(i=t,r=o.constructor)}return r}function r(e){for(var t in l){var n=l[t];if(n.constructor==e)return t}return 0}function a(e,t){BUI.isFunction(t)?l[e]={constructor:t,priority:0}:(t.priority=t.priority||0,l[e]=t)}function o(e){for(var t=s.trim(e).split(/\s+/),n=0;n<t.length;n++)t[n]&&(t[n]=this.get("prefixCls")+t[n]);return t.join(" ")}var s=e("jquery"),l={},u={},c={__instances:u,addComponent:function(e,t){u[e]=t},removeComponent:function(e){delete u[e]},eachComponent:function(e){BUI.each(u,e)},getComponent:function(e){return u[e]},getCssClassWithPrefix:o,getXClassByConstructor:r,getConstructorByXClass:i,setConstructorByXClass:a};n.exports=c}),define("bui/common/component/uibase/uibase",["jquery"],function(e,t,n){var i=e("bui/common/component/uibase/base");BUI.mix(i,{Align:e("bui/common/component/uibase/align"),AutoShow:e("bui/common/component/uibase/autoshow"),AutoHide:e("bui/common/component/uibase/autohide"),Close:e("bui/common/component/uibase/close"),Collapsable:e("bui/common/component/uibase/collapsable"),Drag:e("bui/common/component/uibase/drag"),KeyNav:e("bui/common/component/uibase/keynav"),List:e("bui/common/component/uibase/list"),ListItem:e("bui/common/component/uibase/listitem"),Mask:e("bui/common/component/uibase/mask"),Position:e("bui/common/component/uibase/position"),Selection:e("bui/common/component/uibase/selection"),StdMod:e("bui/common/component/uibase/stdmod"),Decorate:e("bui/common/component/uibase/decorate"),Tpl:e("bui/common/component/uibase/tpl"),ChildCfg:e("bui/common/component/uibase/childcfg"),Bindable:e("bui/common/component/uibase/bindable"),Depends:e("bui/common/component/uibase/depends")}),BUI.mix(i,{CloseView:i.Close.View,CollapsableView:i.Collapsable.View,ChildList:i.List.ChildList,ListItemView:i.ListItem.View,MaskView:i.Mask.View,PositionView:i.Position.View,StdModView:i.StdMod.View,TplView:i.Tpl.View}),n.exports=i
}),define("bui/common/component/uibase/base",["jquery"],function(e,t,n){function i(e){r(e,"initializer","constructor")}function r(e,t,n){for(var i,r,a,o,s=e.constructor,l=[];s;){if(o=[],a=s.mixins)for(var u=0;u<a.length;u++)i=a[u],i&&("constructor"!=n&&(i=i.prototype.hasOwnProperty(n)?i.prototype[n]:null),i&&o.push(i));s.prototype.hasOwnProperty(t)&&(r=s.prototype[t])&&o.push(r),o.length&&l.push.apply(l,o.reverse()),s=s.superclass&&s.superclass.constructor}for(u=l.length-1;u>=0;u--)l[u]&&l[u].call(e)}function a(e){for(var t,n,i,r=e.constructor;r;){if(r.prototype.hasOwnProperty("destructor")&&r.prototype.destructor.apply(e),t=r.mixins)for(i=t.length-1;i>=0;i--)n=t[i]&&t[i].prototype.__destructor,n&&n.apply(e);r=r.superclass&&r.superclass.constructor}}function o(e){e&&BUI.each(e,function(t,n){BUI.isFunction(t)&&(e[n]=new t)})}function s(e,t,n){t&&BUI.each(t,function(t){t[n]&&t[n](e)})}function l(){}function u(e){var t,n,i=e.getAttrs();for(var r in i)if(i.hasOwnProperty(r)){var a=g+h(r);(n=e[a])&&i[r].sync!==!1&&void 0!==(t=e.get(r))&&n.call(e,t)}}function c(e){for(var t=[];e.base;)t.push(e),e=e.base;for(var n=t.length-1;n>=0;n--){var i=t[n];BUI.mix(i.prototype,i.px),BUI.mix(i,i.sx),i.base=null,i.px=null,i.sx=null}}var d=e("jquery"),f=e("bui/common/component/manage"),g="_uiSet",h=BUI.ucfirst,v=d.noop,m=e("bui/common/base"),p=function(e){var t=this;m.apply(t,arguments),t.setInternal("userConfig",e),i(t,e);var n=t.get("plugins");o(n);var r=t.get("xclass");r&&(t.__xclass=r),s(t,n,"initializer"),e&&e.autoRender&&t.render()};p.ATTRS={userConfig:{},autoRender:{value:!1},listeners:{value:{}},plugins:{},rendered:{value:!1},xclass:{valueFn:function(){return f.getXClassByConstructor(this.constructor)}}},BUI.extend(p,m),BUI.augment(p,{create:function(){var e=this;return e.get("created")||(e.fire("beforeCreateDom"),r(e,"createDom","__createDom"),e._set("created",!0),e.fire("afterCreateDom"),s(e,e.get("plugins"),"createDom")),e},render:function(){var e=this;if(!e.get("rendered")){var t=e.get("plugins");e.create(void 0),e.set("created",!0),e.fire("beforeRenderUI"),r(e,"renderUI","__renderUI"),e.fire("afterRenderUI"),s(e,t,"renderUI"),e.fire("beforeBindUI"),l(e),r(e,"bindUI","__bindUI"),e.set("binded",!0),e.fire("afterBindUI"),s(e,t,"bindUI"),e.fire("beforeSyncUI"),u(e),r(e,"syncUI","__syncUI"),e.fire("afterSyncUI"),s(e,t,"syncUI"),e._set("rendered",!0)}return e},createDom:v,renderUI:v,bindUI:v,syncUI:v,destroy:function(){var e=this;return e.destroyed?e:(e.fire("beforeDestroy"),s(e,e.get("plugins"),"destructor"),a(e),e.fire("afterDestroy"),e.off(),e.clearAttrVals(),e.destroyed=!0,e)}}),BUI.mix(p,{define:function(e,t,n,i){function r(){var e=this.constructor;e.base&&c(e),p.apply(this,arguments)}return d.isPlainObject(t)&&(i=n,n=t,t=[]),BUI.extend(r,e),r.base=e,r.px=n,r.sx=i,t.length&&(r.extensions=t),r},extend:function b(){var e,t=d.makeArray(arguments),n=t[t.length-1];if(t.unshift(this),n.xclass&&(t.pop(),t.push(n.xclass)),e=p.define.apply(p,t),n.xclass){var i=n.priority||(this.priority?this.priority+1:1);f.setConstructorByXClass(n.xclass,{constructor:e,priority:i}),e.__xclass=n.xclass,e.priority=i,e.toString=function(){return n.xclass}}return e.extend=b,e}}),n.exports=p}),define("bui/common/component/uibase/align",["jquery"],function(e,t,n){function i(e){var t,n=e.ownerDocument,i=n.body,r=v(e).css("position"),a="fixed"==r||"absolute"==r;if(!a)return"html"==e.nodeName.toLowerCase()?null:e.parentNode;for(t=e.parentNode;t&&t!=i;t=t.parentNode)if(r=v(t).css("position"),"static"!=r)return t;return null}function r(e){var t,n,r,a,o={left:0,right:1/0,top:0,bottom:1/0},s=e.ownerDocument,l=s.body,u=s.documentElement;for(t=e;t=i(t);)if((!m.ie||0!=t.clientWidth)&&t!=l&&t!=u&&"visible"!=v(t).css("overflow")){var c=v(t).offset();c.left+=t.clientLeft,c.top+=t.clientTop,o.top=Math.max(o.top,c.top),o.right=Math.min(o.right,c.left+t.clientWidth),o.bottom=Math.min(o.bottom,c.top+t.clientHeight),o.left=Math.max(o.left,c.left)}return n=v(b).scrollLeft(),r=v(b).scrollTop(),o.left=Math.max(o.left,n),o.top=Math.max(o.top,r),a={width:BUI.viewportWidth(),height:BUI.viewportHeight()},o.right=Math.min(o.right,n+a.width),o.bottom=Math.min(o.bottom,r+a.height),o.top>=0&&o.left>=0&&o.bottom>o.top&&o.right>o.left?o:null}function a(e,t,n,i){var r,a,o,s;return r={left:e.left,top:e.top},o=g(t,n[0]),s=g(e,n[1]),a=[s.left-o.left,s.top-o.top],{left:r.left-a[0]+ +i[0],top:r.top-a[1]+ +i[1]}}function o(e,t,n){return e.left<n.left||e.left+t.width>n.right}function s(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function l(e,t,n,i){var r=BUI.cloneObject(e),a={width:t.width,height:t.height};return i.adjustX&&r.left<n.left&&(r.left=n.left),i.resizeWidth&&r.left>=n.left&&r.left+a.width>n.right&&(a.width-=r.left+a.width-n.right),i.adjustX&&r.left+a.width>n.right&&(r.left=Math.max(n.right-a.width,n.left)),i.adjustY&&r.top<n.top&&(r.top=n.top),i.resizeHeight&&r.top>=n.top&&r.top+a.height>n.bottom&&(a.height-=r.top+a.height-n.bottom),i.adjustY&&r.top+a.height>n.bottom&&(r.top=Math.max(n.bottom-a.height,n.top)),BUI.mix(r,a)}function u(e,t,n){var i=[];return v.each(e,function(e,r){i.push(r.replace(t,function(e){return n[e]}))}),i}function c(e,t){return e[t]=-e[t],e}function d(){}function f(e){var t,n,i;return e.length&&!v.isWindow(e[0])?(t=e.offset(),n=e.outerWidth(),i=e.outerHeight()):(t={left:BUI.scrollLeft(),top:BUI.scrollTop()},n=BUI.viewportWidth(),i=BUI.viewportHeight()),t.width=n,t.height=i,t}function g(e,t){var n,i,r=t.charAt(0),a=t.charAt(1),o=e.width,s=e.height;return n=e.left,i=e.top,"c"===r?i+=s/2:"b"===r&&(i+=s),"c"===a?n+=o/2:"r"===a&&(n+=o),{left:n,top:i}}function h(e){var t=e.attr("class"),n=new RegExp("s?"+p+"[a-z]{2}-[a-z]{2}","ig"),i=n.exec(t);i&&e.removeClass(i.join(" "))}var v=e("jquery"),m=e("bui/common/ua"),p="x-align-",b=window;d.__getOffsetParent=i,d.__getVisibleRectForElement=r,d.ATTRS={align:{shared:!1,value:{}}},d.prototype={_uiSetAlign:function(e){var t,n,i="";e&&e.points&&(this.align(e.node,e.points,e.offset,e.overflow),this.set("cachePosition",null),t=this.get("el"),h(t),n=e.points.join("-"),i=p+n,t.addClass(i))},__bindUI:function(){var e=this,t=BUI.wrapBehavior(e,"handleWindowResize");e.on("show",function(){v(window).on("resize",t)}),e.on("hide",function(){v(window).off("resize",t)})},handleWindowResize:function(){var e=this,t=e.get("align");e.set("align",t)},align:function(e,t,n,i){e=v(e||b),n=n&&[].concat(n)||[0,0],i=i||{};var d=this,g=d.get("el"),h=0,m=r(g[0]),p=f(g),y=f(e),x=a(p,y,t,n),C=BUI.merge(p,x);if(m&&(i.adjustX||i.adjustY)){o(x,p,m)&&(h=1,t=u(t,/[lr]/gi,{l:"r",r:"l"}),n=c(n,0)),s(x,p,m)&&(h=1,t=u(t,/[tb]/gi,{t:"b",b:"t"}),n=c(n,1)),h&&(x=a(p,y,t,n),BUI.mix(C,x));var T={};T.adjustX=i.adjustX&&o(x,p,m),T.adjustY=i.adjustY&&s(x,p,m),(T.adjustX||T.adjustY)&&(C=l(x,p,m,T))}return C.left!=p.left&&(d.setInternal("x",null),d.get("view").setInternal("x",null),d.set("x",C.left)),C.top!=p.top&&(d.setInternal("y",null),d.get("view").setInternal("y",null),d.set("y",C.top)),C.width!=p.width&&g.width(g.width()+C.width-p.width),C.height!=p.height&&g.height(g.height()+C.height-p.height),d},center:function(e){var t=this;return t.set("align",{node:e,points:["cc","cc"],offset:[0,0]}),t}},n.exports=d}),define("bui/common/component/uibase/autoshow",["jquery"],function(e,t,n){function i(){}var r=e("jquery");i.ATTRS={trigger:{},delegateTigger:{getter:function(){this.get("delegateTrigger")},setter:function(e){this.set("delegateTrigger",e)}},delegateTrigger:{value:!1},autoAlign:{value:!0},autoFocused:{value:!0},triggerActiveCls:{},curTrigger:{},triggerCallback:{},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{triggerchange:!1}}},i.prototype={__createDom:function(){this._setTrigger()},__bindUI:function(){var e=this,t=e.get("triggerActiveCls");t&&e.on("hide",function(){var n=e.get("curTrigger");n&&n.removeClass(t)})},_setTrigger:function(){function e(e){if(!n.get("disabled")){var t=n.get("curTrigger"),i=r(u?e.currentTarget:this),a=n.get("align");t&&t[0]==i[0]||(t&&t.removeClass(s),n.set("curTrigger",i),n.fire("triggerchange",{prevTrigger:t,curTrigger:i})),i.addClass(s),n.get("autoAlign")&&(a.node=i),n.set("align",a),n.show(),o&&o(e)}}function t(e){var t=e.toElement||e.relatedTarget;t&&n.containsElement(t)||n.hide()}var n=this,i=n.get("triggerEvent"),a=n.get("triggerHideEvent"),o=n.get("triggerCallback"),s=n.get("triggerActiveCls")||"",l=n.get("trigger"),u=n.get("delegateTrigger"),c=r(l);i&&(u&&BUI.isString(l)?r(document).delegate(l,i,e):c.on(i,e)),a&&(u&&BUI.isString(l)?r(document).delegate(l,a,t):c.on(a,t))},__renderUI:function(){var e=this,t=e.get("align");t&&!t.node&&(t.node=e.get("render")||e.get("trigger"))}},n.exports=i}),define("bui/common/component/uibase/autohide",["jquery"],function(e,t,n){function i(e,t){var n=e.get("hideExceptNode");return n&&n.length?a.contains(n[0],t):!1}function r(){}var a=e("jquery"),o=BUI.wrapBehavior,s=BUI.getWrapBehavior;r.ATTRS={autoHideType:{value:"click"},autoHide:{value:!1},hideExceptNode:{},events:{value:{autohide:!1}}},r.prototype={__bindUI:function(){var e=this;e.on("afterVisibleChange",function(t){var n=t.newVal;e.get("autoHide")&&(n?e._bindHideEvent():e._clearHideEvent())})},handleMoveOuter:function(e){var t=this,n=e.toElement||e.relatedTarget;t.containsElement(n)||i(t,n)||t.fire("autohide")!==!1&&t.hide()},handleDocumentClick:function(e){var t=this,n=e.target;t.containsElement(n)||i(t,n)||t.fire("autohide")!==!1&&t.hide()},_bindHideEvent:function(){var e=this,t=e.get("curTrigger"),n=e.get("autoHideType");"click"===n?a(document).on("mousedown",o(e,"handleDocumentClick")):(e.get("el").on("mouseleave",o(e,"handleMoveOuter")),t&&a(t).on("mouseleave",o(e,"handleMoveOuter")))},_clearHideEvent:function(){var e=this,t=e.get("curTrigger"),n=e.get("autoHideType");"click"===n?a(document).off("mousedown",s(e,"handleDocumentClick")):(e.get("el").off("mouseleave",s(e,"handleMoveOuter")),t&&a(t).off("mouseleave",s(e,"handleMoveOuter")))}},n.exports=r}),define("bui/common/component/uibase/close",["jquery"],function(e,t,n){function i(e){return o(e.get("closeTpl"))}function r(){}function a(){}var o=e("jquery"),s=BUI.prefix+"ext-";r.ATTRS={closeTpl:{value:'<a tabindex="0" href=\'javascript:void("\u5173\u95ed")\' role="button" class="'+s+'close"><span class="'+s+'close-x">\u5173\u95ed</span></a>'},closeable:{value:!0},closeBtn:{}},r.prototype={_uiSetCloseable:function(e){var t=this,n=t.get("closeBtn");e?(n||t.setInternal("closeBtn",n=i(t)),n.appendTo(t.get("el"),void 0)):n&&n.remove()}};var l="hide";a.ATTRS={closeTpl:{view:!0},closeable:{view:1},closeBtn:{view:1},closeAction:{value:l}};var u={hide:l,destroy:"destroy",remove:"remove"};a.prototype={_uiSetCloseable:function(e){var t=this;e&&!t.__bindCloseEvent&&(t.__bindCloseEvent=1,t.get("closeBtn").on("click",function(e){t.fire("closeclick",{domTarget:e.target})!==!1&&t.close(),e.preventDefault()}))},__destructor:function(){var e=this.get("closeBtn");e&&e.detach()},close:function(){var e=this,t=u[e.get("closeAction")||l];e.fire("closing",{action:t})!==!1&&(e.fire("beforeclosed",{action:t}),"remove"==t?e[t](!0):e[t](),e.fire("closed",{action:t}))}},a.View=r,n.exports=a}),define("bui/common/component/uibase/collapsable",[],function(e,t,n){var i=function(){};i.ATTRS={collapsed:{}},i.prototype={_uiSetCollapsed:function(e){var t=this,n=t.getStatusCls("collapsed"),i=t.get("el");e?i.addClass(n):i.removeClass(n)}};var r=function(){};r.ATTRS={collapsable:{value:!1},collapsed:{view:!0,value:!1},events:{value:{expanded:!0,collapsed:!0}}},r.prototype={_uiSetCollapsed:function(e){var t=this;t.fire(e?"collapsed":"expanded")}},r.View=i,n.exports=r}),define("bui/common/component/uibase/drag",["jquery"],function(e,t,n){function i(){var e=r(s).css("opacity",0).prependTo("body");return e}var r=e("jquery"),a=BUI.guid("drag"),o=function(){};o.ATTRS={dragNode:{},draging:{setter:function(e){return e===!0?{}:void 0},value:null},constraint:{},dragBackEl:{getter:function(){return r("#"+a)}}};var s='<div id="'+a+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';o.prototype={__bindUI:function(){function e(e){var t=a.get("draging");t&&(e.preventDefault(),a._dragMoveTo(e.pageX,e.pageY,t,o))}function t(e){if(1==e.which){a.set("draging",!1);var t=a.get("dragBackEl");t&&t.hide(),i()}}function n(){r(document).on("mousemove",e),r(document).on("mouseup",t)}function i(){r(document).off("mousemove",e),r(document).off("mouseup",t)}var a=this,o=a.get("constraint"),s=a.get("dragNode");s&&s.on("mousedown",function(e){1==e.which&&(e.preventDefault(),a.set("draging",{elX:a.get("x"),elY:a.get("y"),startX:e.pageX,startY:e.pageY}),n())})},_dragMoveTo:function(e,t,n,r){var a=this,o=a.get("dragBackEl"),n=n||a.get("draging"),s=n.startX-e,l=n.startY-t;o.length||(o=i()),o.css({cursor:"move",display:"block"}),a.set("xy",[a._getConstrainX(n.elX-s,r),a._getConstrainY(n.elY-l,r)])},_getConstrainX:function(e,t){var n=this,i=n.get("el").outerWidth(),r=e+i,a=n.get("x");if(t){var o=t.offset();return o.left>=e?o.left:o.left+t.width()<r?o.left+t.width()-i:e}return BUI.isInHorizontalView(e)&&BUI.isInHorizontalView(r)?e:a},_getConstrainY:function(e,t){var n=this,i=n.get("el").outerHeight(),r=e+i,a=n.get("y");if(t){var o=t.offset();return o.top>e?o.top:o.top+t.height()<r?o.top+t.height()-i:e}return BUI.isInVerticalView(e)&&BUI.isInVerticalView(r)?e:a}},n.exports=o}),define("bui/common/component/uibase/keynav",["jquery"],function(e,t,n){var i=e("jquery"),r=e("bui/common/keycode"),a=BUI.wrapBehavior,o=BUI.getWrapBehavior,s=function(){};s.ATTRS={allowKeyNav:{value:!0},navEvent:{value:"keydown"},ignoreInputFields:{value:!0}},s.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(e){var t=this,n=t.get("navEvent"),i=t.get("el");e?i.on(n,a(t,"_handleKeyDown")):i.off(n,o(t,"_handleKeyDown"))},_handleKeyDown:function(e){var t=this,n=t.get("ignoreInputFields"),a=e.which;if(!n||!i(e.target).is("input,select,textarea"))switch(a){case r.UP:t.handleNavUp(e);break;case r.DOWN:t.handleNavDown(e);break;case r.RIGHT:t.handleNavRight(e);break;case r.LEFT:t.handleNavLeft(e);break;case r.ENTER:t.handleNavEnter(e);break;case r.ESC:t.handleNavEsc(e);break;case r.TAB:t.handleNavTab(e)}},handleNavUp:function(){},handleNavDown:function(){},handleNavLeft:function(){},handleNavRight:function(){},handleNavEnter:function(){},handleNavEsc:function(){},handleNavTab:function(){}},n.exports=s}),define("bui/common/component/uibase/list",["jquery"],function(e,t,n){function i(e,t){var n=t.isController?t.getAttrVals():t,i=e.get("itemTpl"),a=e.get("itemStatusCls"),o=e.get("itemTplRender");if(i&&!n.tpl&&r(t,"tpl",i),o&&!n.tplRender&&r(t,"tplRender",o),a){var s=n.statusCls||t.isController?t.get("statusCls"):{};BUI.each(a,function(e,t){e&&!s[t]&&(s[t]=e)}),r(t,"statusCls",s)}}function r(e,t,n){e.isController?e.set(t,n):e[t]=n}var a=e("jquery"),o=e("bui/common/component/uibase/selection"),s=function(){};s.ATTRS={items:{shared:!1,view:!0},idField:{value:"id"},itemTpl:{view:!0},itemTplRender:{view:!0},itemStatusCls:{view:!0,value:{}},events:{value:{itemclick:!0}}},s.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(e){return this.getItems()[e]||null},getItem:function(e){var t=this.get("idField");return this.findItemByField(t,e)},indexOfItem:function(e){return BUI.Array.indexOf(e,this.getItems())},addItems:function(e){var t=this;BUI.each(e,function(e){t.addItem(e)})},addItemsAt:function(e,t){var n=this;BUI.each(e,function(e,i){n.addItemAt(e,t+i)})},updateItem:function(){},addItem:function(e){return this.addItemAt(e,this.getItemCount())},addItemAt:function(){},findItemByField:function(){},getItemText:function(){},clearItems:function(){var e=this,t=e.getItems();t.splice(0),e.clearControl()},removeItem:function(){},removeItems:function(e){var t=this;BUI.each(e,function(e){t.removeItem(e)})},removeItemAt:function(e){this.removeItem(this.getItemAt(e))},clearControl:function(){}};var l=function(){this.__init()};l.ATTRS=BUI.merge(!0,s.ATTRS,o.ATTRS,{items:{sync:!1},autoInitItems:{value:!0},isDecorateChild:{value:!0},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}}),BUI.augment(l,s,o,{__init:function(){var e=this,t=e.get("items");t&&e.get("autoInitItems")&&e.addItems(t),e.on("beforeRenderUI",function(){e._beforeRenderUI()})},_uiSetItems:function(e){var t=this;t.clearControl(),t.addItems(e)},_beforeRenderUI:function(){{var e=this,t=e.get("children");e.get("items")}BUI.each(t,function(t){i(e,t)})},__bindUI:function(){var e=this,t=e.get("selectedEvent");e.on(t,function(t){var n=t.target;n.get("selectable")&&(n.get("selected")?e.get("multipleSelect")&&e.clearSelected(n):e.setSelected(n))}),e.on("click",function(t){t.target!==e&&e.fire("itemclick",{item:t.target,domTarget:t.domTarget,domEvent:t})}),e.on("beforeAddChild",function(t){i(e,t.child)}),e.on("beforeRemoveChild",function(t){var n=t.child,i=n.get("selected");i&&(e.get("multipleSelect")?e.clearSelected(n):e.setSelected(null)),n.set("selected",!1)})},clearControl:function(){this.removeChildren(!0)},getItems:function(){return this.get("children")},updateItem:function(e){var t=this,n=t.get("idField"),i=t.findItemByField(n,e[n]);return i&&i.setTplContent(),i},removeItem:function(e){var t=this,n=t.get("idField");e instanceof BUI.Component.Controller||(e=t.findItemByField(n,e[n])),this.removeChild(e,!0)},addItemAt:function(e,t){return this.addChild(e,t)},findItemByField:function(e,t,n){n=n||this;var i=this,r=n.get("children"),o=null;return a(r).each(function(n,r){return r.get(e)==t?o=r:r.get("children").length&&(o=i.findItemByField(e,t,r)),o?!1:void 0}),o},getItemText:function(e){return e.get("el").text()},getValueByField:function(e,t){return e&&e.get(t)},setItemSelectedStatus:function(e,t){var n=this,i=null;e&&(e.set("selected",t),i=e.get("el")),n.afterSelected(e,t,i)},isItemSelected:function(e){return e?e.get("selected"):!1},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},getSelection:function(){var e=this,t=e.getItems(),n=[];return BUI.each(t,function(t){e.isItemSelected(t)&&n.push(t)}),n}}),s.ChildList=l,n.exports=s}),define("bui/common/component/uibase/selection",["jquery"],function(e,t,n){var i=e("jquery"),r=function(){};r.ATTRS={selectedEvent:{value:"click"},events:{value:{selectedchange:!1,beforeselectedchange:!1,itemselected:!1,itemunselected:!1}},idField:{value:"id"},multipleSelect:{value:!1}},r.prototype={clearSelection:function(){var e=this,t=e.getSelection();BUI.each(t,function(t){e.clearSelected(t)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var e=this,t=e.get("idField"),n=e.getSelected();return e.getValueByField(n,t)},getSelectionValues:function(){var e=this,t=e.get("idField"),n=e.getSelection();return i.map(n,function(n){return e.getValueByField(n,t)})},getSelectionText:function(){var e=this,t=e.getSelection();return i.map(t,function(t){return e.getItemText(t)})},clearSelected:function(e){var t=this;e=e||t.getSelected(),e&&t.setItemSelected(e,!1)},getSelectedText:function(){var e=this,t=e.getSelected();return e.getItemText(t)},setSelection:function(e){var t=this;e=BUI.isArray(e)?e:[e],BUI.each(e,function(e){t.setSelected(e)})},setSelected:function(e){var t=this,n=t.get("multipleSelect");if(t.isItemSelectable(e)){if(!n){var i=t.getSelected();e!=i&&t.clearSelected(i)}t.setItemSelected(e,!0)}},isItemSelected:function(){},isItemSelectable:function(){return!0},setItemSelected:function(e,t){var n,i=this;e&&(n=i.isItemSelected(e),n==t)||i.fire("beforeselectedchange",{item:e,selected:t})!==!1&&i.setItemSelectedStatus(e,t)},setItemSelectedStatus:function(){},setAllSelection:function(){},setSelectedByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this,i=n.findItemByField(e,t);n.setSelected(i)},setSelectionByField:function(e,t){t||(t=e,e=this.get("idField"));var n=this;BUI.each(t,function(t){n.setSelectedByField(e,t)})},afterSelected:function(e,t,n){var i=this;t?(i.fire("itemselected",{item:e,domTarget:n}),i.fire("selectedchange",{item:e,domTarget:n,selected:t})):(i.fire("itemunselected",{item:e,domTarget:n}),i.get("multipleSelect")&&i.fire("selectedchange",{item:e,domTarget:n,selected:t}))}},n.exports=r}),define("bui/common/component/uibase/listitem",[],function(e,t,n){function i(){}function r(){}i.ATTRS={selected:{}},i.prototype={_uiSetSelected:function(e){var t=this,n=t.getStatusCls("selected"),i=t.get("el");e?i.addClass(n):i.removeClass(n)}},r.ATTRS={selectable:{value:!0},selected:{view:!0,sync:!1,value:!1}},r.prototype={},r.View=i,n.exports=r}),define("bui/common/component/uibase/mask",["jquery"],function(e,t,n){function i(e){return e.get("prefixCls")+"ext-mask"}function r(){return f?BUI.docWidth()+"px":"100%"}function a(){return f?BUI.docHeight()+"px":"100%"}function o(e){var t=u('<div  style="width:'+r()+";left:0;top:0;height:"+a()+";position:"+(f?"absolute":"fixed")+';" class="'+e+'">'+(f?'<iframe style="position:absolute;left:0;top:0;background:white;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");return t.on("mousedown",function(e){e.preventDefault()}),t}function s(){}function l(){}var u=e("jquery"),c=e("bui/common/ua"),d={},f=6==c.ie;s.ATTRS={maskShared:{value:!0}},s.prototype={_maskExtShow:function(){var e,t=this,n=i(t),r=d[n],a=t.get("maskShared"),s=t.get("maskNode");s||(a?r?s=r.node:(s=o(n),r=d[n]={num:0,node:s}):s=o(n),t.setInternal("maskNode",s)),(e=t.get("zIndex"))&&s.css("z-index",e-1),a&&r.num++,a&&1!=r.num||s.show(),u("body").addClass("x-masked-relative")},_maskExtHide:function(){var e=this,t=i(e),n=d[t],r=e.get("maskShared"),a=e.get("maskNode");r&&n?(n.num=Math.max(n.num-1,0),0==n.num&&a.hide()):a&&a.hide(),u("body").removeClass("x-masked-relative")},__destructor:function(){var e=this,t=e.get("maskShared"),n=e.get("maskNode");e.get("maskNode")&&(t?e.get("visible")&&e._maskExtHide():n.remove())}},l.ATTRS={mask:{value:!1},maskNode:{view:1},maskShared:{view:1}},l.prototype={__bindUI:function(){{var e=this,t=e.get("view");t._maskExtShow,t._maskExtHide}e.get("mask")&&(e.on("show",function(){t._maskExtShow()}),e.on("hide",function(){t._maskExtHide()}))}},l=l,l.View=s,n.exports=l}),define("bui/common/component/uibase/position",["jquery"],function(e,t,n){function i(){}function r(){}var a=e("jquery");i.ATTRS={x:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().left}},y:{valueFn:function(){var e=this;return e.get("el")&&e.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}},i.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(e){this.get("el").css("z-index",e)},_uiSetX:function(e){null!=e&&this.get("el").offset({left:e})},_uiSetY:function(e){null!=e&&this.get("el").offset({top:e})},_uiSetLeft:function(e){null!=e&&this.get("el").css({left:e})},_uiSetTop:function(e){null!=e&&this.get("el").css({top:e})}},r.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(e){var t=this,n=a.makeArray(e);return n.length&&(n[0]&&t.set("x",n[0]),n[1]&&t.set("y",n[1])),e},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:!0,value:!0}},r.prototype={move:function(e,t){var n=this;return BUI.isArray(e)&&(t=e[1],e=e[0]),n.set("xy",[e,t]),n},_uiSetX:function(e){if(null!=e){var t=this,n=t.get("el");t.setInternal("left",n.position().left),-999!=e&&this.set("cachePosition",null)}},_uiSetY:function(e){if(null!=e){var t=this,n=t.get("el");t.setInternal("top",n.position().top),-999!=e&&this.set("cachePosition",null)}},_uiSetLeft:function(e){var t=this,n=t.get("el");null!=e&&t.setInternal("x",n.offset().left)},_uiSetTop:function(e){var t=this,n=t.get("el");null!=e&&t.setInternal("y",n.offset().top)}},r.View=i,n.exports=r}),define("bui/common/component/uibase/stdmod",["jquery"],function(e,t,n){function i(){}function r(e,t){var n=e.get("contentEl"),i=e.get(t);i||(i=s('<div class="'+l+t+'"  ></div>'),i.appendTo(n),e.setInternal(t,i))}function a(e,t,n){t=e.get(t),BUI.isString(n)?t.html(n):t.html("").append(n)}function o(){}var s=e("jquery"),l=BUI.prefix+"stdmod-";i.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}},i.PARSER={header:function(e){return e.one("."+l+"header")},body:function(e){return e.one("."+l+"body")},footer:function(e){return e.one("."+l+"footer")}},i.prototype={__renderUI:function(){r(this,"header"),r(this,"body"),r(this,"footer")},_uiSetBodyStyle:function(e){this.get("body").css(e)},_uiSetHeaderStyle:function(e){this.get("header").css(e)},_uiSetFooterStyle:function(e){this.get("footer").css(e)},_uiSetBodyContent:function(e){a(this,"body",e)},_uiSetHeaderContent:function(e){a(this,"header",e)},_uiSetFooterContent:function(e){a(this,"footer",e)}},o.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}},o.View=i,n.exports=o}),define("bui/common/component/uibase/decorate",["jquery"],function(e,t,n){function i(e,t){if(t[e])return!0;var n=new RegExp("^"+v);return e!==m&&n.test(e)?!0:!1}function r(e){for(var t=[],n=e.constructor;n;)t.push(n),n=n.superclass&&n.superclass.constructor;return t}function a(e){return e.toLowerCase().replace(y,function(e,t){return(t+"").toUpperCase()})}function o(e){if(e=f.trim(e),"false"===e.toLowerCase())e=!1;else if("true"===e.toLowerCase())e=!0;else if(x.test(e))e=g.looseParse(e);else if(/\d/.test(e)&&/[^a-z]/i.test(e)){var t=parseFloat(e);t+""===e&&(e=t)}return e}function s(e,t){var n=e.userConfig||{};for(var i in t)i in n||e.setInternal(i,t[i])}function l(e,t){var n,i,r=this,a=r.userConfig||{};for(n in t)n in a||(i=t[n],BUI.isFunction(i)?r.setInternal(n,i.call(r,e)):"string"==typeof i?r.setInternal(n,e.find(i)):BUI.isArray(i)&&i[0]&&r.setInternal(n,e.find(i[0])))}function u(e,t){var n,i,a,o=e.constructor;for(a=r(e),n=a.length-1;n>=0;n--)o=a[n],(i=o[p])&&l.call(e,t,i)}function c(e){var t,n,i=e,r=i.get("srcNode");r&&(r=f(r),i.setInternal("el",r),i.setInternal("srcNode",r),t=i.get("userConfig"),n=i.getDecorateConfig(r),s(e,n),i.get("isDecorateChild")&&i.decorateInternal&&i.decorateInternal(r),u(e,r))}function d(){c(this)}var f=e("jquery"),g=(e("bui/common/array"),e("bui/common/json")),h=BUI.prefix,v="data-",m=v+"cfg",p="PARSER",b=e("bui/common/component/manage"),y=/-([a-z])/g,x=/^[\{\[]/;d.ATTRS={srcNode:{view:!0},isDecorateChild:{value:!1},decorateCfgFields:{value:{id:!0,name:!0,value:!0,title:!0}}},d.prototype={getDecorateConfig:function(e){if(!e.length)return null;var t=this,n=e[0],r=n.attributes,s=t.get("decorateCfgFields"),l={},u=t._getStautsCfg(e);return BUI.each(r,function(e){var t=e.nodeName;try{if(t===m){var n=o(e.nodeValue);BUI.mix(l,n)}else if(i(t,s)){var r=e.nodeValue;-1!==t.indexOf(v)&&(t=t.replace(v,""),t=a(t),r=o(r)),l[t]&&BUI.isObject(r)?BUI.mix(l[t],r):l[t]=r}}catch(u){BUI.log("parse field error,the attribute is:"+t)}}),BUI.mix(l,u)},_getStautsCfg:function(e){var t=this,n={},i=t.get("statusCls");return BUI.each(i,function(t,i){e.hasClass(t)&&(n[i]=!0)}),n},getDecorateElments:function(){var e=this,t=e.get("el"),n=e.get("childContainer");return n?t.find(n).children():t.children()},decorateInternal:function(e){var t=this;t.decorateChildren(e)},findXClassByNode:function(e,t){var n=this,i=e.attr("class")||"",r=n.get("defaultChildClass");i=i.replace(new RegExp("\\b"+h,"ig"),"");var a=b.getConstructorByXClass(i)||b.getConstructorByXClass(r);return a||t||(BUI.log(e),BUI.error("can not find ui "+i+" from this markup")),b.getXClassByConstructor(a)},decorateChildrenInternal:function(e,t){var n=this,i=n.get("children");i.push({xclass:e,srcNode:t})},decorateChildren:function(){var e=this,t=e.getDecorateElments();BUI.each(t,function(t){var n=e.findXClassByNode(f(t));e.decorateChildrenInternal(n,f(t))})}},n.exports=d}),define("bui/common/component/uibase/tpl",["jquery"],function(e,t,n){function i(){}function r(){}e("jquery");i.ATTRS={tpl:{},tplEl:{}},i.prototype={__renderUI:function(){var e,t=this,n=t.get("childContainer");n&&(e=t.get("el").find(n),e.length&&t.set("contentEl",e))},getTpl:function(e){var t=this,n=t.get("tpl"),i=t.get("tplRender");return e=e||t.getAttrVals(),i?i(e):n?BUI.substitute(n,e):""},setTplContent:function(e){var t=this,n=t.get("el"),i=t.get("content"),r=(t.get("tplEl"),t.getTpl(e));!i&&r&&(n.empty(),n.html(r))}},r.ATTRS={tpl:{view:!0,sync:!1},tplRender:{view:!0,value:null},childContainer:{view:!0}},r.prototype={__renderUI:function(){this.get("srcNode")||this.setTplContent()},updateContent:function(){this.setTplContent()},setTplContent:function(){var e=this,t=e.getAttrVals();e.get("view").setTplContent(t)},_uiSetTpl:function(){this.setTplContent()}},r.View=i,n.exports=r}),define("bui/common/component/uibase/childcfg",["jquery"],function(e,t,n){var i=e("jquery"),r=function(){this._init()};r.ATTRS={defaultChildCfg:{}},r.prototype={_init:function(){var e=this,t=e.get("defaultChildCfg");t&&e.on("beforeAddChild",function(e){var n=e.child;i.isPlainObject(n)&&BUI.each(t,function(e,t){null==n[t]&&(n[t]=e)})})}},n.exports=r}),define("bui/common/component/uibase/bindable",[],function(e,t,n){function i(){}i.ATTRS={store:{},loadMask:{value:!1}},BUI.augment(i,{__bindUI:function(){var e=this,t=e.get("store"),n=e.get("loadMask");t&&(t.on("beforeload",function(t){e.onBeforeLoad(t),n&&n.show&&n.show()}),t.on("load",function(t){e.onLoad(t),n&&n.hide&&n.hide()}),t.on("exception",function(t){e.onException(t),n&&n.hide&&n.hide()}),t.on("add",function(t){e.onAdd(t)}),t.on("remove",function(t){e.onRemove(t)}),t.on("update",function(t){e.onUpdate(t)}),t.on("localsort",function(t){e.onLocalSort(t)}),t.on("filtered",function(t){e.onFiltered(t)}))},__syncUI:function(){var e=this,t=e.get("store");t&&t.hasData()&&e.onLoad()},onBeforeLoad:function(){},onLoad:function(){},onException:function(){},onAdd:function(){},onRemove:function(){},onUpdate:function(){},onLocalSort:function(){},onFiltered:function(){}}),n.exports=i}),define("bui/common/component/uibase/depends",["jquery"],function(e,t,n){function i(e){var t=u.exec(e),n=t[1],i=t[2],r=o(n);return{source:r,eventType:i}}function r(e,t,n){var r,a=i(t),o=a.source,s=a.eventType;return o&&n&&s&&(BUI.isFunction(n)?r=n:BUI.isArray(n)&&(r=function(){BUI.each(n,function(t){e[t]&&e[t]()})})),r?(a.callbak=r,o.on(s,r),a):null}function a(e){var t=e.source,n=e.eventType,i=e.callbak;t.off(n,i)}function o(e){var t=c.getComponent(e);return t||(t=l("#"+e),t.length||(t=null)),t}function s(){}var l=e("jquery"),u=/^#(.*):(.*)$/,c=e("bui/common/component/manage");s.ATTRS={depends:{},dependencesMap:{shared:!1,value:{}}},s.prototype={__syncUI:function(){this.initDependences()},initDependences:function(){var e=this,t=e.get("depends");BUI.each(t,function(t,n){e.addDependence(n,t)})},addDependence:function(e,t){var n,i=this,a=i.get("dependencesMap");i.removeDependence(e),n=r(i,e,t),n&&(a[e]=n)},removeDependence:function(e){var t=this,n=t.get("dependencesMap"),i=n[e];i&&(a(i),delete n[e])},clearDependences:function(){var e=this,t=e.get("dependencesMap");BUI.each(t,function(e){a(e)}),e.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}},n.exports=s}),define("bui/common/component/view",["jquery"],function(e,t,n){var i=e("jquery"),r=e("bui/common/component/manage"),a=e("bui/common/component/uibase/uibase"),o=document,s=a.extend([a.TplView],{getComponentCssClassWithState:function(e){var t=this,n=t.get("ksComponentCss");return e=e||"",t.getCssClassWithPrefix(n.split(/\s+/).join(e+" ")+e)},getCssClassWithPrefix:r.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")
},getStatusCls:function(e){var t=this,n=t.get("statusCls"),i=n[e];return i||(i=t.getComponentCssClassWithState("-"+e)),i},renderUI:function(){var e=this;if(!e.get("srcNode")){var t=e.get("render"),n=e.get("el"),i=e.get("elBefore");i?n.insertBefore(i,void 0):t?n.appendTo(t,void 0):n.appendTo(o.body,void 0)}},createDom:function(){var e=this,t=e.get("contentEl"),n=e.get("el");e.get("srcNode")||(n=i("<"+e.get("elTagName")+">"),t&&n.append(t),e.setInternal("el",n)),n.addClass(e.getComponentCssClassWithState()),t||e.setInternal("contentEl",n)},_uiSetHighlighted:function(e){var t=this,n=t.getStatusCls("hover"),i=t.get("el");i[e?"addClass":"removeClass"](n)},_uiSetDisabled:function(e){var t=this,n=t.getStatusCls("disabled"),i=t.get("el");i[e?"addClass":"removeClass"](n).attr("aria-disabled",e),e&&t.get("highlighted")&&t.set("highlighted",!1),t.get("focusable")&&t.getKeyEventTarget().attr("tabIndex",e?-1:0)},_uiSetActive:function(e){var t=this,n=t.getStatusCls("active");t.get("el")[e?"addClass":"removeClass"](n).attr("aria-pressed",!!e)},_uiSetFocused:function(e){var t=this,n=t.get("el"),i=t.getStatusCls("focused");n[e?"addClass":"removeClass"](i)},_uiSetElAttrs:function(e){this.get("el").attr(e)},_uiSetElCls:function(e){this.get("el").addClass(e)},_uiSetElStyle:function(e){this.get("el").css(e)},_uiSetRole:function(e){e&&this.get("el").attr("role",e)},_uiSetWidth:function(e){this.get("el").width(e)},_uiSetHeight:function(e){var t=this;t.get("el").height(e)},_uiSetContent:function(e){var t,n=this;n.get("srcNode")&&!n.get("rendered")||(t=n.get("contentEl"),"string"==typeof e?t.html(e):e&&t.empty().append(e))},_uiSetVisible:function(e){var t=this,n=t.get("el"),i=t.get("visibleMode");"visibility"===i?n.css("visibility",e?"visible":"hidden"):n.css("display",e?"":"none")},set:function(e,t){var n,r,a,o=this,l=o.__attrs[e];if(!l||!o.get("binded"))return s.superclass.set.call(this,e,t),o;var u=s.superclass.get.call(this,e);return i.isPlainObject(t)||BUI.isArray(t)||u!==t?(s.superclass.set.call(this,e,t),t=o.__attrVals[e],n={attrName:e,prevVal:u,newVal:t},r=BUI.ucfirst(e),a="_uiSet"+r,o[a]&&o[a](t,n),o):o},destructor:function(){var e=this.get("el");e&&e.remove()}},{xclass:"view",priority:0});s.ATTRS={el:{setter:function(e){return i(e)}},elCls:{},elStyle:{},role:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:!0},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:!0},focused:{},active:{},disabled:{},highlighted:{}},n.exports=s}),define("bui/common/component/controller",["jquery"],function(e,t,n){"use strict";function i(e,t,n){e.create();var i=e.getContentElement(),r=e.get("defaultChildClass");return t.xclass||t instanceof h||(t.xclass=t.xtype?r+"-"+t.xtype:r),t=BUI.Component.create(t,e),t.setInternal("parent",e),t.set("render",i),t.set("elBefore",n),t.create(void 0),t}function r(e){var t,n,i,r,o={},s=e.get("xview");t=e.getAttrs();for(i in t)t.hasOwnProperty(i)&&(n=t[i],n.view&&void 0!==(r=e.get(i))&&(o[i]=r));return delete o.autoRender,o.ksComponentCss=a(e),new s(o)}function a(e){for(var t,n=e.constructor,i=[];n&&n!==h;)t=u.getXClassByConstructor(n),t&&i.push(t),n=n.superclass&&n.superclass.constructor;return i.join(" ")}function o(e,t){var n=e.relatedTarget;return n&&(n===t[0]||s.contains(t,n))}var s=e("jquery"),l=e("bui/common/component/uibase/uibase"),u=e("bui/common/component/manage"),c=e("bui/common/component/view"),d=e("bui/common/component/loader"),f=BUI.wrapBehavior,g=BUI.getWrapBehavior,h=l.extend([l.Decorate,l.Tpl,l.ChildCfg,l.KeyNav,l.Depends],{isController:!0,getCssClassWithPrefix:u.getCssClassWithPrefix,initializer:function(){var e=this;e.get("id")||e.set("id",e.getNextUniqueId()),u.addComponent(e.get("id"),e);var t=r(e);e.setInternal("view",t),e.__view=t},getNextUniqueId:function(){var e=this,t=u.getXClassByConstructor(e.constructor);return BUI.guid(t)},createDom:function(){var e=this,t=e.get("view");t.create(void 0)},renderUI:function(){var e=this,t=e.get("loader");e.get("view").render(),e._initChildren(),t&&e.setInternal("loader",t)},_initChildren:function(e){var t,e,n,i=this;for(e=e||i.get("children").concat(),i.get("children").length=0,t=0;t<e.length;t++)n=i.addChild(e[t]),n.render()},bindUI:function(){var e=this,t=e.get("events");this.on("afterVisibleChange",function(e){this.fire(e.newVal?"show":"hide")}),BUI.each(t,function(t,n){e.publish(n,{bubbles:t})})},containsElement:function(e){var t=this,n=t.get("el"),i=t.get("children"),r=!1;return t.get("rendered")?(s.contains(n[0],e)||n[0]===e?r=!0:BUI.each(i,function(t){return t.containsElement(e)?(r=!0,!1):void 0}),r):!1},isChildrenElement:function(e){var t=this,n=t.get("children"),i=!1;return BUI.each(n,function(t){return t.containsElement(e)?(i=!0,!1):void 0}),i},show:function(){var e=this;return e.render(),e.set("visible",!0),e},hide:function(){var e=this;return e.set("visible",!1),e},toggle:function(){return this.set("visible",!this.get("visible")),this},_uiSetFocusable:function(e){var t,n=this,i=n.getKeyEventTarget();e?i.attr("tabIndex",0).attr("hideFocus",!0).on("focus",f(n,"handleFocus")).on("blur",f(n,"handleBlur")).on("keydown",f(n,"handleKeydown")).on("keyup",f(n,"handleKeyUp")):(i.removeAttr("tabIndex"),(t=g(n,"handleFocus"))&&i.off("focus",t),(t=g(n,"handleBlur"))&&i.off("blur",t),(t=g(n,"handleKeydown"))&&i.off("keydown",t),(t=g(n,"handleKeyUp"))&&i.off("keyup",t))},_uiSetHandleMouseEvents:function(e){var t,n=this,i=n.get("el");e?i.on("mouseenter",f(n,"handleMouseEnter")).on("mouseleave",f(n,"handleMouseLeave")).on("contextmenu",f(n,"handleContextMenu")).on("mousedown",f(n,"handleMouseDown")).on("mouseup",f(n,"handleMouseUp")).on("dblclick",f(n,"handleDblClick")):(t=g(n,"handleMouseEnter")&&i.off("mouseenter",t),t=g(n,"handleMouseLeave")&&i.off("mouseleave",t),t=g(n,"handleContextMenu")&&i.off("contextmenu",t),t=g(n,"handleMouseDown")&&i.off("mousedown",t),t=g(n,"handleMouseUp")&&i.off("mouseup",t),t=g(n,"handleDblClick")&&i.off("dblclick",t))},_uiSetFocused:function(e){e&&this.getKeyEventTarget()[0].focus()},_uiSetVisible:function(e){var t=this,n=(t.get("el"),t.get("visibleMode"));if("visibility"===n){if(e){var i=t.get("cachePosition");i&&t.set("xy",i)}if(!e){var i=[t.get("x"),t.get("y")];t.set("cachePosition",i),t.set("xy",[-999,-999])}}},_uiSetChildren:function(e){var t=this,n=BUI.cloneObject(e);t._initChildren(n)},enable:function(){return this.set("disabled",!1),this},disable:function(){return this.set("disabled",!0),this},focus:function(){this.get("focusable")&&this.set("focused",!0)},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(e,t){var n,r=this,a=r.get("children");return void 0===t&&(t=a.length),r.fire("beforeAddChild",{child:e,index:t}),n=a[t]&&a[t].get("el")||null,e=i(r,e,n),a.splice(t,0,e),r.get("rendered")&&e.render(),r.fire("afterAddChild",{child:e,index:t}),e},remove:function(e){var t=this,n=t.get("parent");return n?n.removeChild(t,e):e&&t.destroy(),t},removeChild:function(e,t){var n=this,i=n.get("children"),r=BUI.Array.indexOf(e,i);if(-1!==r)return n.fire("beforeRemoveChild",{child:e,destroy:t}),-1!==r&&i.splice(r,1),t&&e.destroy&&e.destroy(),n.fire("afterRemoveChild",{child:e,destroy:t}),e},removeChildren:function(e){var t,n=this,i=[].concat(n.get("children"));for(t=0;t<i.length;t++)n.removeChild(i[t],e)},getChildAt:function(e){var t=this.get("children");return t[e]||null},getChild:function(e,t){return this.getChildBy(function(t){return t.get("id")===e},t)},getChildBy:function(e,t){return this.getChildrenBy(e,t)[0]||null},getAppendHeight:function(){var e=this.get("el");return e.outerHeight()-e.height()},getAppendWidth:function(){var e=this.get("el");return e.outerWidth()-e.width()},getChildrenBy:function(e,t){var n=this,i=[];return e?(n.eachChild(function(n){e(n)?i.push(n):t&&(i=i.concat(n.getChildrenBy(e,t)))}),i):i},eachChild:function(e){BUI.each(this.get("children"),e)},handleDblClick:function(e){this.performActionInternal(e),this.isChildrenElement(e.target)||this.fire("dblclick",{domTarget:e.target,domEvent:e})},handleMouseOver:function(e){var t=this,n=t.get("el");o(e,n)||t.handleMouseEnter(e)},handleMouseOut:function(e){var t=this,n=t.get("el");o(e,n)||t.handleMouseLeave(e)},handleMouseEnter:function(e){var t=this;this.set("highlighted",!!e),t.fire("mouseenter",{domTarget:e.target,domEvent:e})},handleMouseLeave:function(e){var t=this;t.set("active",!1),t.set("highlighted",!e),t.fire("mouseleave",{domTarget:e.target,domEvent:e})},handleMouseDown:function(e){var t,n,i=this,r=(s(e.target),1===e.which);r&&(n=i.getKeyEventTarget(),i.get("activeable")&&i.set("active",!0),i.get("focusable")&&i.setInternal("focused",!0),i.get("allowTextSelection")||(t=e.target.nodeName,t=t&&t.toLowerCase(),"input"!==t&&"textarea"!==t&&e.preventDefault()),i.isChildrenElement(e.target)||i.fire("mousedown",{domTarget:e.target,domEvent:e}))},handleMouseUp:function(e){var t=this,n=t.isChildrenElement(e.target);t.get("active")&&1===e.which&&(t.performActionInternal(e),t.set("active",!1),n||t.fire("click",{domTarget:e.target,domEvent:e})),n||t.fire("mouseup",{domTarget:e.target,domEvent:e})},handleContextMenu:function(){},handleFocus:function(e){this.set("focused",!!e),this.fire("focus",{domEvent:e,domTarget:e.target})},handleBlur:function(e){this.set("focused",!e),this.fire("blur",{domEvent:e,domTarget:e.target})},handleKeyEventInternal:function(e){var t=this,n=t.isChildrenElement(e.target);return 13===e.which?(n||t.fire("click",{domTarget:e.target,domEvent:e}),this.performActionInternal(e)):void(n||t.fire("keydown",{domTarget:e.target,domEvent:e}))},handleKeydown:function(e){var t=this;return t.handleKeyEventInternal(e)?(e.halt(),!0):void 0},handleKeyUp:function(e){var t=this;t.isChildrenElement(e.target)||t.fire("keyup",{domTarget:e.target,domEvent:e})},performActionInternal:function(){},destructor:function(){var e,t,n=this,i=n.get("children");for(e=n.get("id"),t=0;t<i.length;t++)i[t].destroy&&i[t].destroy();n.get("view").destroy(),u.removeComponent(e)},set:function(e,t,n){var i,r,a,o=this,l=o.__view,u=o.__attrs[e];if(BUI.isObject(e)&&(n=t,BUI.each(e,function(e,t){o.set(t,e,n)})),!l||!u||n&&n.silent)return h.superclass.set.call(this,e,t,n),o;var c=h.superclass.get.call(this,e);return s.isPlainObject(t)||BUI.isArray(t)||c!==t?(i=BUI.ucfirst(e),a="_uiSet"+i,o.fire("before"+i+"Change",{attrName:e,prevVal:c,newVal:t}),o.setInternal(e,t),t=o.__attrVals[e],l&&u.view&&l.set(e,t),r={attrName:e,prevVal:c,newVal:t},o.fire("after"+i+"Change",r),o.get("binded")&&o[a]&&o[a](t,r),o):o},get:function(e){var t=this,n=t.__view,i=t.__attrs[e],r=h.superclass.get.call(this,e);return void 0!==r?r:n&&i&&i.view?n.get(e):r}},{ATTRS:{content:{view:1},elTagName:{view:!0,value:"div"},defaultChildClass:{},xtype:{},id:{view:!0},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{click:!0,dblclick:!0,mouseenter:!0,mouseleave:!0,keydown:!0,keyup:!0,focus:!1,blur:!1,mousedown:!0,mouseup:!0,show:!1,hide:!1}},render:{view:1},role:{view:1},statusCls:{view:!0,value:{}},visibleMode:{view:1,value:"display"},visible:{value:!0,view:1},handleMouseEvents:{value:!0},focusable:{value:!1,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:!0}},loader:{getter:function(e){var t,n=this;return e&&!e.isLoader&&(e.target=n,t=n.get("defaultLoaderCfg"),e=new d(BUI.merge(t,e)),n.setInternal("loader",e)),e}},allowTextSelection:{value:!0},activeable:{value:!0},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:!1,shared:!1,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(e){this.addTarget(e)}},disabled:{view:1,value:!1},xview:{value:c}},PARSER:{visible:function(e){var t=this,n=e.css("display"),i=e.css("visibility"),r=t.get("visibleMode");return"none"==n&&"display"==r||"hidden"==i&&"visibility"==r?!1:!0},disabled:function(e){var t=this,n=t.get("prefixCls")+t.get("xclass")+"-disabled";return e.hasClass(n)}}},{xclass:"controller",priority:0});n.exports=h}),define("bui/common/component/loader",["jquery"],function(e,t,n){"use strict";var i=e("jquery"),r=e("bui/common/util"),a=e("bui/common/base"),o=function(e){o.superclass.constructor.call(this,e),this._init()};o.ATTRS={url:{},target:{},hasLoad:{value:!1},autoLoad:{},lazyLoad:{},property:{},renderer:{value:function(e){return e}},loadMask:{value:!1},dataType:{value:"text"},ajaxOptions:{value:{type:"get",cache:!1}},params:{},appendParams:{},lastParams:{shared:!1,value:{}},callback:{},failure:{}},r.extend(o,a),r.augment(o,{isLoader:!0,_init:function(){var e=this,t=e.get("autoLoad"),n=e.get("params");e._initMask(),t?e.load(n):(e._initParams(),e._initLazyLoad())},_initLazyLoad:function(){var e=this,t=e.get("target"),n=e.get("lazyLoad");t&&n&&n.event&&t.on(n.event,function(){(!e.get("hasLoad")||n.repeat)&&e.load()})},_initMask:function(){var t=this,n=t.get("target"),a=t.get("loadMask");n&&a&&e.async("bui/mask",function(e){var o=i.isPlainObject(a)?a:{};a=new e.LoadMask(r.mix({el:n.get("el")},o)),t.set("loadMask",a)})},_initParams:function(){var e=this,t=e.get("lastParams"),n=e.get("params");r.mix(t,n)},load:function(e){var t=this,n=t.get("url"),a=t.get("ajaxOptions"),o=t.get("lastParams"),s=t.get("appendParams");e=e||o,e=r.merge(s,e),t.set("lastParams",e),n&&(t.onBeforeLoad(),t.set("hasLoad",!0),i.ajax(r.mix({dataType:t.get("dataType"),data:e,url:n,success:function(n){t.onload(n,e)},error:function(n,i,r){t.onException({jqXHR:n,textStatus:i,errorThrown:r},e)}},a)))},onBeforeLoad:function(){var e=this,t=e.get("loadMask");t&&t.show&&t.show()},onload:function(e,t){var n=this,i=n.get("loadMask"),a=n.get("property"),o=n.get("callback"),s=n.get("renderer"),l=n.get("target");r.isString(e)&&l.set(a,""),l.set(a,s.call(n,e)),i&&i.hide&&i.hide(),o&&o.call(this,e,t)},onException:function(e,t){var n=this,i=n.get("failure");i&&i.call(this,e,t)}}),n.exports=o}),define("bui/data",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Data");i.mix(r,{Sortable:e("bui/data/sortable"),Proxy:e("bui/data/proxy"),AbstractStore:e("bui/data/abstractstore"),Store:e("bui/data/store"),Node:e("bui/data/node"),TreeStore:e("bui/data/treestore")}),n.exports=r}),define("bui/data/sortable",[],function(e,t,n){var i="ASC",r=function(){};r.ATTRS={compareFunction:{value:function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),BUI.isString(e)?e.localeCompare(t):e>t?1:e===t?0:-1}},sortField:{},sortDirection:{value:"ASC"},sortInfo:{getter:function(){var e=this,t=e.get("sortField");return{field:t,direction:e.get("sortDirection")}},setter:function(e){var t=this;t.set("sortField",e.field),t.set("sortDirection",e.direction)}}},BUI.augment(r,{compare:function(e,t,n,r){var a,o=this;return n=n||o.get("sortField"),r=r||o.get("sortDirection"),n&&r?(a=r===i?1:-1,o.get("compareFunction")(e[n],t[n])*a):1},getSortData:function(){},sortData:function(e,t,n){var i=this,n=n||i.getSortData();return BUI.isArray(e)&&(n=e,e=null),e=e||i.get("sortField"),t=t||i.get("sortDirection"),i.set("sortField",e),i.set("sortDirection",t),e&&t?(n.sort(function(n,r){return i.compare(n,r,e,t)}),n):n}}),n.exports=r}),define("bui/data/proxy",["jquery"],function(e,t,n){var i=e("jquery"),r=e("bui/data/sortable"),a=function(e){a.superclass.constructor.call(this,e)};a.ATTRS={},BUI.extend(a,BUI.Base),BUI.augment(a,{_read:function(){},read:function(e,t,n){var i=this;n=n||i,i._read(e,function(e){t.call(n,e)})},_save:function(){},save:function(e,t,n,i){var r=this;i=i||r,r._save(e,t,function(e){n.call(i,e)})}});var o={READ:"read",ADD:"add",UPDATE:"update",REMOVE:"remove",SAVE_ALL:"all"},s=function(e){s.superclass.constructor.call(this,e)};s.ATTRS=BUI.mix(!0,a.ATTRS,{limitParam:{value:"limit"},startParam:{value:"start"},pageIndexParam:{value:"pageIndex"},saveTypeParam:{value:"saveType"},saveDataParam:{},pageStart:{value:0},dataType:{value:"json"},method:{value:"GET"},ajaxOptions:{value:{}},cache:{value:!1},save:{},url:{}}),BUI.extend(s,a),BUI.augment(s,{_processParams:function(e){var t=this,n=t.get("pageStart"),i=["start","limit","pageIndex"];null!=e.pageIndex&&(e.pageIndex=e.pageIndex+n),BUI.each(i,function(n){var i=t.get(n+"Param");i!==n&&(e[i]=e[n],delete e[n])})},_getUrl:function(e){var t,n=this,i=n.get("save");return e===o.READ?n.get("url"):i?BUI.isString(i)?i:(t=i[e+"Url"],t||(t=n.get("url")),t):n.get("url")},_getAppendParams:function(e){var t,n,i=this,r=null;return e==o.READ?r:(t=i.get("save"),n=i.get("saveTypeParam"),t&&!t[e+"Url"]&&(r={},r[n]=e),r)},_read:function(e,t){var n,i=this;e=BUI.cloneObject(e),i._processParams(e),n=i._getAjaxOptions(o.READ,e),i._ajax(n,t)},_getAjaxOptions:function(e,t){var n,i=this,r=i.get("ajaxOptions"),a=i._getUrl(e);return BUI.mix(t,i._getAppendParams(e)),n=BUI.merge({url:a,type:i.get("method"),dataType:i.get("dataType"),data:t,cache:i.get("cache")},r)},_ajax:function(e,t){var n=e.success,r=e.error;e.success=function(e){n&&n(e),t(e)},e.error=function(e,n,i){r&&r(e,n,i);var a={exception:{status:n,errorThrown:i,jqXHR:e}};t(a)},i.ajax(e)},_save:function(e,t,n){var i,r=this;i=r._getAjaxOptions(e,t),r._ajax(i,n)}});var l=function(e){l.superclass.constructor.call(this,e)};l.ATTRS={matchFields:{value:[]}},BUI.extend(l,a),BUI.mixin(l,[r]),BUI.augment(l,{_read:function(e,t){var n=this,i=(e.pageable,e.start),r=e.sortField,a=e.sortDirection,o=e.limit,s=n.get("data"),l=[];s=n._getMatches(e),n.sortData(r,a),o?(l=s.slice(i,i+o),t({rows:l,results:s.length})):(l=s.slice(i),t(l))},_getMatchFn:function(e,t){return function(n){var i=!0;return BUI.each(t,function(t){return null!=e[t]&&e[t]!==n[t]?(i=!1,!1):void 0}),i}},_getMatches:function(e){var t,n=this,i=n.get("matchFields"),r=n.get("data")||[];return e&&i.length&&(t=n._getMatchFn(e,i),r=BUI.Array.filter(r,t)),r},_save:function(e,t){var n=this,i=n.get("data");e==o.ADD?i.push(t):e==o.REMOVE?BUI.Array.remove(i,t):e==o.SAVE_ALL&&(BUI.each(t.add,function(e){i.push(e)}),BUI.each(t.remove,function(e){BUI.Array.remove(i,e)}))}}),a.Ajax=s,a.Memery=l,n.exports=a}),define("bui/data/abstractstore",["bui/common","jquery"],function(e,t,n){function i(e){i.superclass.constructor.call(this,e),this._init()}var r=e("bui/common"),a=e("bui/data/proxy");i.ATTRS={autoLoad:{value:!1},remoteFilter:{value:!1},lastParams:{shared:!1,value:{}},params:{},errorProperty:{value:"error"},hasErrorProperty:{value:"hasError"},proxy:{shared:!1,value:{}},url:{},events:{value:["acceptchanges","load","beforeload","beforeprocessload","add","exception","remove","update","localsort","filtered"]},data:{setter:function(e){var t=this,n=t.get("proxy");n.set?n.set("data",e):n.data=e,t.set("autoLoad",!0)}}},r.extend(i,r.Base),r.augment(i,{isStore:!0,_init:function(){var e=this;e.beforeInit(),e._initParams(),e._initProxy(),e._initData()},beforeInit:function(){},_initData:function(){var e=this,t=e.get("autoLoad");t&&e.load()},_initParams:function(){var e=this,t=e.get("lastParams"),n=e.get("params");r.mix(t,n)},_initProxy:function(){var e=this,t=e.get("url"),n=e.get("proxy");n instanceof a||(t&&(n.url=t),n="ajax"===n.type||n.url?new a.Ajax(n):new a.Memery(n),e.set("proxy",n))},load:function(e,t){var n=this,i=n.get("proxy"),a=n.get("lastParams");r.mix(a,n.getAppendParams(),e),n.fire("beforeload",{params:a}),e=r.cloneObject(a),i.read(a,function(i){n.onLoad(i,e),t&&t(i,e)},n)},onFiltered:function(e,t){var n=this;n.fire("filtered",{data:e,filter:t})},onLoad:function(e,t){var n=this,i=n.processLoad(e,t);i&&n.afterProcessLoad(e,t)},getResult:function(){},filter:function(e){var t,n=this,i=n.get("remoteFilter");e=e||n.get("filter"),i?n.load({filter:e}):e&&(n.set("filter",e),n.getResult().length>0&&(t=n._filterLocal(e),n.onFiltered(t,e)))},_filterLocal:function(){},getFilterResult:function(){var e=this.get("filter");return e?this._filterLocal(e):this.getResult()},_clearLocalFilter:function(){this.set("filter",null)},clearFilter:function(){var e,t=this,n=t.get("remoteFilter");n?t.load({filter:""}):(t._clearLocalFilter(),e=t.getFilterResult(),t.onFiltered(e,null))},processLoad:function(e){var t=this,n=t.get("hasErrorProperty");return t.fire("beforeprocessload",{data:e}),t.fire("beforeProcessLoad",e),r.getValue(e,n)||e.exception?(t.onException(e),!1):!0},afterProcessLoad:function(){},onException:function(e){var t=this,n=t.get("errorProperty"),i={};e.exception?(i.type="exception",i.error=e.exception):(i.type="error",i.error=r.getValue(e,n)),t.fire("exception",i)},hasData:function(){},getAppendParams:function(){return{}}}),n.exports=i}),define("bui/data/store",["jquery","bui/common"],function(e,t,n){function i(e,t){if(!(0>e)){var n=t,i=n[e];return n.splice(e,1),i}}function r(e,t){var n=BUI.Array.indexOf(e,t);n>=0&&i(n,t)}function a(e,t){return-1!==BUI.Array.indexOf(e,t)}var o=e("jquery"),s=e("bui/data/proxy"),l=e("bui/data/abstractstore"),u=e("bui/data/sortable"),c=function(e){c.superclass.constructor.call(this,e)};c.ATTRS={autoSync:{value:!1},currentPage:{value:0},deletedRecords:{shared:!1,value:[]},matchFunction:{value:function(e,t){return e==t}},modifiedRecords:{shared:!1,value:[]},newRecords:{shared:!1,value:[]},remoteSort:{value:!1},resultMap:{shared:!1,value:{}},root:{value:"rows"},rowCount:{value:0},totalProperty:{value:"results"},start:{value:0},pageSize:{}},BUI.extend(c,l),BUI.mixin(c,[u]),BUI.augment(c,{add:function(e,t,n){var i=this,r=i.getCount();i.addAt(e,r,t,n)},addAt:function(e,t,n,i){var a=this;i=i||a._getDefaultMatch(),BUI.isArray(e)||(e=[e]),o.each(e,function(e,o){n&&a.contains(o,i)||(a._addRecord(o,e+t),a.get("newRecords").push(o),r(o,a.get("deletedRecords")),r(o,a.get("modifiedRecords")))})},contains:function(e,t){return-1!==this.findIndexBy(e,t)},find:function(e,t){var n=this,i=null,r=n.getResult();return o.each(r,function(n,r){return r[e]===t?(i=r,!1):void 0}),i},findAll:function(e,t){var n=this,i=[],r=n.getResult();return o.each(r,function(n,r){r[e]===t&&i.push(r)}),i},findByIndex:function(e){return this.getResult()[e]},findIndexBy:function(e,t){var n=this,i=-1,r=n.getResult();return t=t||n._getDefaultMatch(),null===e||void 0===e?-1:(o.each(r,function(n,r){return t(e,r)?(i=n,!1):void 0}),i)},findNextRecord:function(e){var t=this,n=t.findIndexBy(e);return n>=0?t.findByIndex(n+1):void 0},getCount:function(){return this.getResult().length},getTotalCount:function(){var e=this,t=e.get("resultMap"),n=e.get("totalProperty"),i=BUI.getValue(t,n);return parseInt(i,10)||0},getResult:function(){var e=this,t=e.get("resultMap"),n=e.get("root");return BUI.getValue(t,n)},hasData:function(){return 0!==this.getCount()},setResult:function(e){var t=this,n=t.get("proxy");n instanceof s.Memery?(t.set("data",e),t.load({start:0})):(t._setResult(e),t.get("filter")&&t.filter())},remove:function(e,t){var n=this;t=t||n._getDefaultMatch(),BUI.isArray(e)||(e=[e]),o.each(e,function(e,o){var e=n.findIndexBy(o,t),s=i(e,n.getResult());a(s,n.get("newRecords"))||a(s,n.get("deletedRecords"))||n.get("deletedRecords").push(s),r(s,n.get("newRecords")),r(s,n.get("modifiedRecords")),n.fire("remove",{record:s})})},save:function(e,t,n){var i=this,r=i.get("proxy");BUI.isFunction(e)&&(n=e,e=void 0),BUI.isObject(e)&&(n=t,t=e,e=void 0),e||(e=i._getSaveType(t)),"all"!=e||t||(t=i._getDirtyData()),i.fire("beforesave",{type:e,saveData:t}),r.save(e,t,function(r){i.onSave(e,t,r),n&&n(r,t)},i)},_getSaveType:function(e){var t=this;return e?BUI.Array.contains(e,t.get("newRecords"))?"add":BUI.Array.contains(e,t.get("modifiedRecords"))?"update":BUI.Array.contains(e,t.get("deletedRecords"))?"remove":"custom":"all"},_getDirtyData:function(){var e=this,t=e.get("proxy");return t.get("url")?{add:BUI.JSON.stringify(e.get("newRecords")),update:BUI.JSON.stringify(e.get("modifiedRecords")),remove:BUI.JSON.stringify(e.get("deletedRecords"))}:{add:e.get("newRecords"),update:e.get("modifiedRecords"),remove:e.get("deletedRecords")}},onSave:function(e,t,n){var i=this,r=i.get("hasErrorProperty");return BUI.getValue(n,r)||n.exception?void i.onException(n):(i._clearDirty(e,t),i.fire("saved",{type:e,saveData:t,data:n}),void(i.get("autoSync")&&i.load()))},_clearDirty:function(e,t){function n(e,t){BUI.Array.remove(i.get(t),e)}var i=this;switch(e){case"all":i._clearChanges();break;case"add":n(t,"newRecords");break;case"update":n(t,"modifiedRecords");break;case"remove":n(t,"deletedRecords")}},sort:function(e,t){var n=this,i=n.get("remoteSort");i?(n.set("sortField",e),n.set("sortDirection",t),n.load(n.get("sortInfo"))):n._localSort(e,t)},sum:function(e,t){var n=this,i=t||n.getResult(),r=0;return BUI.each(i,function(t){var n=t[e];isNaN(n)||(r+=parseFloat(n))}),r},setValue:function(e,t,n){var i=e,r=this;i[t]=n,a(i,r.get("newRecords"))||a(i,r.get("modifiedRecords"))||r.get("modifiedRecords").push(i),r.fire("update",{record:i,field:t,value:n})},update:function(e,t,n){var i=e,r=this,n=null,o=null;t&&(n=n||r._getDefaultMatch(),o=r.findIndexBy(e,n),o>=0&&(i=r.getResult()[o])),i=BUI.mix(i,e),a(i,r.get("newRecords"))||a(i,r.get("modifiedRecords"))||r.get("modifiedRecords").push(i),r.fire("update",{record:i})},_addRecord:function(e,t){var n=this.getResult();void 0==t&&(t=n.length),n.splice(t,0,e),this.fire("add",{record:e,index:t})},_clearChanges:function(){var e=this;BUI.Array.empty(e.get("newRecords")),BUI.Array.empty(e.get("modifiedRecords")),BUI.Array.empty(e.get("deletedRecords"))},_filterLocal:function(e,t){var n=this,i=[];return t=t||n.getResult(),e?(BUI.each(t,function(t){e(t)&&i.push(t)}),i):t},_getDefaultMatch:function(){return this.get("matchFunction")},_getPageParams:function(){var e=this,t=e.get("sortInfo"),n=e.get("start"),i=e.get("pageSize"),r=e.get("pageIndex")||(i?n/i:0);return params={start:n,limit:i,pageIndex:r},e.get("remoteSort")&&BUI.mix(params,t),params},getAppendParams:function(){return this._getPageParams()},beforeInit:function(){this._setResult([])},_localSort:function(e,t){var n=this;n._sortData(e,t),n.fire("localsort",{field:e,direction:t})},_sortData:function(e,t,n){var i=this;n=n||i.getResult(),i.sortData(e,t,n)},afterProcessLoad:function(e,t){var n=this,i=n.get("root"),r=t.start,a=t.limit,o=n.get("totalProperty");BUI.isArray(e)?n._setResult(e):n._setResult(BUI.getValue(e,i),BUI.getValue(e,o)),n.set("start",r),a&&n.set("pageIndex",r/a),n.get("remoteSort")||n._sortData(),n.fire("load",{params:t}),!n.get("remoteFilter")&&n.get("filter")&&n.filter(n.get("filter"))},_setResult:function(e,t){var n=this,i=n.get("resultMap");t=t||e.length,BUI.setValue(i,n.get("root"),e),BUI.setValue(i,n.get("totalProperty"),t),n._clearChanges()}}),n.exports=c}),define("bui/data/node",["bui/common","jquery"],function(e,t,n){function i(e,t){var n={};return t?(a.each(e,function(e,i){var r=t[i]||i;n[r]=e}),n.record=e):n=e,n}function r(e,t){e=i(e,t),a.mix(this,e)}var a=e("bui/common");a.augment(r,{root:!1,leaf:null,text:"",id:null,loaded:!1,path:null,parent:null,level:0,record:null,children:null,isNode:!0}),n.exports=r}),define("bui/data/treestore",["bui/common","jquery"],function(e,t,n){function i(e){i.superclass.constructor.call(this,e)}var r=e("bui/common"),a=e("bui/data/node"),o=e("bui/data/proxy"),s=e("bui/data/abstractstore");i.ATTRS={root:{},map:{},pidField:{},dataProperty:{value:"nodes"},events:{value:["add","update","remove","load"]}},r.extend(i,s),r.augment(i,{beforeInit:function(){this.initRoot()},_initData:function(){var e=this,t=e.get("autoLoad"),n=e.get("pidField"),i=e.get("proxy"),r=e.get("root");!i.get("url")&&n&&i.get("matchFields").push(n),t&&!r.children&&e.loadNode(r)},initRoot:function(){var e=this,t=e.get("map"),n=e.get("root");n||(n={}),n.isNode||(n=new a(n,t)),n.path=[n.id],n.level=0,n.children&&e.setChildren(n,n.children),e.set("root",n)},add:function(e,t,n){var i=this;return e=i._add(e,t,n),i.fire("add",{node:e,record:e,index:n}),e},_add:function(e,t,n){t=t||this.get("root");var i,o=this,s=o.get("map"),l=t.children;return e.isNode||(e=new a(e,s)),i=e.children||[],0==i.length&&null==e.leaf&&(e.leaf=!0),t&&(t.leaf=!1),e.parent=t,e.level=t.level+1,e.path=t.path.concat(e.id),n=null==n?t.children.length:n,r.Array.addAt(l,e,n),o.setChildren(e,i),e},remove:function(e){var t=e.parent||_self.get("root"),n=r.Array.indexOf(e,t.children);return r.Array.remove(t.children,e),0===t.children.length&&(t.leaf=!0),this.fire("remove",{node:e,record:e,index:n}),e.parent=null,e},setValue:function(e,t,n){var i=this;e[t]=n,i.fire("update",{node:e,record:e,field:t,value:n})},update:function(e){this.fire("update",{node:e,record:e})},getResult:function(){return this.get("root").children},setResult:function(e){var t=this,n=t.get("proxy"),i=t.get("root");n instanceof o.Memery?(t.set("data",e),t.load({id:i.id})):t.setChildren(i,e)},setChildren:function(e,t){var n=this;e.children=[],t.length&&r.each(t,function(t){n._add(t,e)})},findNode:function(e,t,n){return this.findNodeBy(function(t){return t.id===e},t,n)},findNodeBy:function(e,t,n){var i=this;if(n=null==n?!0:n,!t){var a=i.get("root");return e(a)?a:i.findNodeBy(e,a)}var o=t.children,s=null;return r.each(o,function(t){return e(t)?s=t:n&&(s=i.findNodeBy(e,t)),s?!1:void 0}),s},findNodesBy:function(e,t){var n=this,i=[];return t||(t=n.get("root")),r.each(t.children,function(t){e(t)&&i.push(t),i=i.concat(n.findNodesBy(e,t))}),i},findNodeByPath:function(e){if(!e)return null;var t,n,i=this,r=i.get("root"),a=e.split(","),o=a[0];if(!o)return null;if(t=r.id==o?r:i.findNode(o,r,!1)){for(n=1;n<a.length;n+=1){var o=a[n];if(t=i.findNode(o,t,!1),!t)break}return t}},contains:function(e,t){var n=this,i=n.findNode(e.id,t);return!!i},afterProcessLoad:function(e,t){var n=this,i=n.get("pidField"),a=t.id||t[i],o=n.get("dataProperty"),s=n.findNode(a)||n.get("root");r.isArray(e)?n.setChildren(s,e):n.setChildren(s,r.getValue(e,o)),s.loaded=!0,n.fire("load",{node:s,params:t})},hasData:function(){return this.get("root").children&&0!==this.get("root").children.length},isLoaded:function(e){var t=this.get("root");return e!=t||t.children?this.get("url")||this.get("pidField")?e.loaded||e.leaf||!(!e.children||!e.children.length):!0:!1},loadNode:function(e,t){var n,i=this,r=i.get("pidField");(t||!i.isLoaded(e))&&(n={id:e.id},r&&(n[r]=e.id),i.load(n))},reloadNode:function(e){var t=this;e=e||t.get("root"),e.loaded=!1,t.loadNode(e,!0)},loadPath:function(e){var t=this,n=e.split(","),i=n[0];t.findNodeByPath(e)||t.load({id:i,path:e})}}),n.exports=i}),define("bui/list",["bui/common","jquery","bui/data"],function(e,t,n){var i=e("bui/common"),r=i.namespace("List");i.mix(r,{List:e("bui/list/list"),ListItem:e("bui/list/listitem"),SimpleList:e("bui/list/simplelist"),Listbox:e("bui/list/listbox")}),i.mix(r,{ListItemView:r.ListItem.View,SimpleListView:r.SimpleList.View}),n.exports=r}),define("bui/list/list",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=i.Component,a=r.UIBase,o=r.Controller.extend([a.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});n.exports=o}),define("bui/list/listitem",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=i.Component,a=r.UIBase,o=r.View.extend([a.ListItemView],{}),s=r.Controller.extend([a.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:o},tpl:{view:!0,value:"<span>{text}</span>"}}},{xclass:"list-item"});s.View=o,n.exports=s}),define("bui/list/simplelist",["jquery","bui/common","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.Component.UIBase,o=r.UA,s=e("bui/list/domlist"),l=e("bui/list/keynav"),u=e("bui/list/sortable"),c=r.prefix+"list-item",d=r.Component.View.extend([s.View],{setElementHover:function(e,t){var n=this;n.setItemStatusCls("hover",e,t)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"}),f=r.Component.Controller.extend([s,a.Bindable,l,u],{bindUI:function(){var e=this,t=e.get("itemCls"),n=e.get("view").getItemContainer();n.delegate("."+t,"mouseover",function(t){if(!e.get("disabled")){var n=t.currentTarget,i=e.getItemByElement(n);
e.isItemDisabled(t.item,t.currentTarget)||(o.ie&&o.ie<8||!e.get("focusable")||"hover"!==e.get("highlightedStatus")?e.setItemStatus(i,"hover",!0,n):e.setHighlighted(i,n))}}).delegate("."+t,"mouseout",function(t){if(!e.get("disabled")){var n=i(t.currentTarget);e.get("view").setElementHover(n,!1)}})},onAdd:function(e){var t=this,n=t.get("store"),i=e.record;0==t.getCount()?t.setItems(n.getResult()):t.addItemToView(i,e.index)},handleContextMenu:function(e){var t=this,n=e.target,r=t.get("itemCls"),a=i(n).closest("."+r),o=t.getItemByElement(a),s=t.fire("itemcontextmenu",{element:a,item:o,pageX:e.pageX,pageY:e.pageY,domTarget:e.target,domEvent:e});s===!1&&e.preventDefault()},onRemove:function(e){var t=this,n=e.record;t.removeItem(n)},onUpdate:function(e){this.updateItem(e.record)},onLocalSort:function(e){this.get("frontSortable")?this.sort(e.field,e.direction):this.onLoad(e)},onLoad:function(){var e=this,t=e.get("store"),n=t.getResult();e.set("items",n)},onFiltered:function(e){var t=this,n=e.data;t.set("items",n)}},{ATTRS:{frontSortable:{value:!1},focusable:{value:!1},items:{view:!0,value:[]},itemCls:{view:!0,value:c},idField:{value:"value"},listSelector:{view:!0,value:"ul"},itemTpl:{view:!0,value:'<li role="option" class="'+c+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:d}}},{xclass:"simple-list",prority:0});f.View=d,n.exports=f}),define("bui/list/domlist",["jquery","bui/common"],function(e,t,n){"use strict";function i(e,t){var n=t,i=n.get("itemCls"),r=n.get("itemStatusCls");return r&&r[e]?r[e]:i+"-"+e}function r(e,t){var n=e.attributes,r=t.get("itemStatusFields"),s={};return o.each(n,function(e){var t=e.nodeName;-1!==t.indexOf(l)&&(t=t.replace(l,""),s[t]=e.nodeValue)}),s.text=a(e).text(),o.each(r,function(n,r){var o=i(r,t);a(e).hasClass(o)&&(s[n]=!0)}),s}var a=e("jquery"),o=e("bui/common"),s=o.Component.UIBase.Selection,l="data-",u=o.Component.UIBase.List,c=function(){};c.ATTRS={items:{}},c.prototype={clearControl:function(){var e=this,t=e.getItemContainer(),n=e.get("itemCls");t.find("."+n).remove()},addItem:function(e,t){return this._createItem(e,t)},getItems:function(){var e=this,t=e.getAllElements(),n=[];return o.each(t,function(t){n.push(e.getItemByElement(t))}),n},updateItem:function(e){var t,n=this,i=n.getItems(),r=o.Array.indexOf(e,i),s=null;return r>=0&&(s=n.findElement(e),t=n.getItemTpl(e,r),s&&a(s).html(a(t).html())),s},removeItem:function(e,t){t=t||this.findElement(e),a(t).remove()},getItemContainer:function(){var e=this.get("itemContainer");return e.length?e:this.get("el")},getItemTpl:function(e,t){var n=this,i=n.get("itemTplRender"),r=n.get("itemTpl");return i?i(e,t):o.substitute(r,e)},_createItem:function(e,t){var n=this,i=n.getItemContainer(),r=n.get("itemCls"),o=n.get("dataField"),s=n.getItemTpl(e,t),l=a(s);if(void 0!==t){var u=i.find("."+r)[t];u?l.insertBefore(u):l.appendTo(i)}else l.appendTo(i);return l.addClass(r),l.data(o,e),l},getItemStatusCls:function(e){return i(e,this)},setItemStatusCls:function(e,t,n){var i=this,r=i.getItemStatusCls(e),o=n?"addClass":"removeClass";t&&a(t)[o](r)},hasStatus:function(e,t){var n=this,i=n.getItemStatusCls(e);return a(t).hasClass(i)},setItemSelected:function(e,t,n){var i=this;n=n||i.findElement(e),i.setItemStatusCls("selected",n,t)},getAllElements:function(){var e=this,t=e.get("itemCls"),n=e.get("el");return n.find("."+t)},getItemByElement:function(e){var t=this,n=t.get("dataField");return a(e).data(n)},getFirstElementByStatus:function(e){var t=this,n=t.getItemStatusCls(e),i=t.get("el");return i.find("."+n)[0]},getElementsByStatus:function(e){var t=this,n=t.getItemStatusCls(e),i=t.get("el");return i.find("."+n)},getSelectedElements:function(){var e=this,t=e.getItemStatusCls("selected"),n=e.get("el");return n.find("."+t)},findElement:function(e){var t=this,n=t.getAllElements(),i=null;return o.each(n,function(n){return t.getItemByElement(n)==e?(i=n,!1):void 0}),i},isElementSelected:function(e){var t=this,n=t.getItemStatusCls("selected");return e&&a(e).hasClass(n)}};var d=function(){};d.ATTRS=o.merge(!0,u.ATTRS,s.ATTRS,{dataField:{view:!0,value:"data-item"},itemContainer:{view:!0},itemStatusFields:{value:{}},itemCls:{view:!0},cancelSelected:{value:!1},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{itemrendered:!0,itemremoved:!0,itemupdated:!0,itemsshow:!1,beforeitemsshow:!1,itemsclear:!1,itemdblclick:!1,beforeitemsclear:!1}}}),d.PARSER={items:function(e){var t=this,n=[],i=t.get("itemCls"),s=t.get("dataField"),l=e.find("."+i);return l.length||(l=e.children(),l.addClass(i)),o.each(l,function(e){var i=r(e,t);n.push(i),a(e).data(s,i)}),n}},o.augment(d,u,s,{_uiSetItems:function(e){var t=this;(!t.get("srcNode")||t.get("rendered"))&&this.setItems(e)},__bindUI:function(){function e(e,n){var i,r=t.get("multipleSelect");i=t.isItemSelected(e,n),i?r?t.setItemSelected(e,!1,n):t.get("cancelSelected")&&t.setSelected(null):(r||t.clearSelected(),t.setItemSelected(e,!0,n))}var t=this,n=t.get("selectedEvent"),i=t.get("itemCls"),r=t.get("view").getItemContainer();r.delegate("."+i,"click",function(i){if(!t.get("disabled")){var r=a(i.currentTarget),o=t.getItemByElement(r);if(!t.isItemDisabled(o,r)){var s=t.fire("itemclick",{item:o,element:r[0],domTarget:i.target,domEvent:i});s!==!1&&"click"==n&&t.isItemSelectable(o)&&e(o,r)}}}),"click"!==n&&r.delegate("."+i,n,function(n){if(!t.get("disabled")){var i=a(n.currentTarget),r=t.getItemByElement(i);t.isItemDisabled(r,i)||t.isItemSelectable(r)&&e(r,i)}}),r.delegate("."+i,"dblclick",function(e){if(!t.get("disabled")){var n=a(e.currentTarget),i=t.getItemByElement(n);t.isItemDisabled(i,n)||t.fire("itemdblclick",{item:i,element:n[0],domTarget:e.target})}}),t.on("itemrendered itemupdated",function(e){var n=e.item,i=e.element;t._syncItemStatus(n,i)})},getValueByField:function(e,t){return e&&e[t]},_syncItemStatus:function(e,t){var n=this,i=n.get("itemStatusFields");o.each(i,function(i,r){null!=e[i]&&n.get("view").setItemStatusCls(r,t,e[i])})},getStatusValue:function(e,t){var n=this,i=n.get("itemStatusFields"),r=i[t];return e[r]},getCount:function(){var e=this.getItems();return e?e.length:0},getStatusField:function(e){var t=this,n=t.get("itemStatusFields");return n[e]},setStatusValue:function(e,t,n){var i=this,r=i.get("itemStatusFields"),a=r[t];a&&(e[a]=n)},getItemText:function(e){var t=this,n=t.get("textGetter");return e?n?n(e):a(t.findElement(e)).text():""},removeItem:function(e){var t,n=this,i=n.get("items"),r=n.findElement(e);t=o.Array.indexOf(e,i),-1!==t&&i.splice(t,1),n.get("view").removeItem(e,r),n.fire("itemremoved",{item:e,domTarget:a(r)[0],element:r})},addItemAt:function(e,t){var n=this,i=n.get("items");return void 0===t&&(t=i.length),i.splice(t,0,e),n.addItemToView(e,t),e},addItemToView:function(e,t){var n=this,i=n.get("view").addItem(e,t);return n.fire("itemrendered",{item:e,domTarget:a(i)[0],element:i}),i},updateItem:function(e){var t=this,n=t.get("view").updateItem(e);t.fire("itemupdated",{item:e,domTarget:a(n)[0],element:n})},setItems:function(e){var t=this;e!=t.getItems()&&t.setInternal("items",e),t.clearControl(),t.fire("beforeitemsshow"),o.each(e,function(e,n){t.addItemToView(e,n)}),t.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(e){return this.get("view").getItemByElement(e)},getSelected:function(){var e=this,t=e.get("view").getFirstElementByStatus("selected");return e.getItemByElement(t)||null},getItemsByStatus:function(e){var t=this,n=t.get("view").getElementsByStatus(e),i=[];return o.each(n,function(e){i.push(t.getItemByElement(e))}),i},findElement:function(e){var t=this;return o.isString(e)&&(e=t.getItem(e)),this.get("view").findElement(e)},findItemByField:function(e,t){var n=this,i=n.get("items"),r=null;return o.each(i,function(n){return null!=n[e]&&n[e]==t?(r=n,!1):void 0}),r},setItemSelectedStatus:function(e,t,n){var i=this;n=n||i.findElement(e),i.setItemStatus(e,"selected",t,n)},setAllSelection:function(){var e=this,t=e.getItems();e.setSelection(t)},isItemSelected:function(e,t){var n=this;return t=t||n.findElement(e),n.get("view").isElementSelected(t)},isItemDisabled:function(e,t){return this.hasStatus(e,"disabled",t)},setItemDisabled:function(e,t){var n=this;n.setItemStatus(e,"disabled",t)},getSelection:function(){var e=this,t=e.get("view").getSelectedElements(),n=[];return o.each(t,function(t){n.push(e.getItemByElement(t))}),n},clearControl:function(){this.fire("beforeitemsclear"),this.get("view").clearControl(),this.fire("itemsclear")},hasStatus:function(e,t,n){if(!e)return!1;{var i=this;i.getStatusField(t)}return n=n||i.findElement(e),i.get("view").hasStatus(t,n)},setItemStatus:function(e,t,n,i){var r=this;e&&(i=i||r.findElement(e)),r.isItemDisabled(e,i)&&"disabled"!==t||(e&&("disabled"===t&&n&&r.clearItemStatus(e),r.setStatusValue(e,t,n),r.get("view").setItemStatusCls(t,i,n),r.fire("itemstatuschange",{item:e,status:t,value:n,element:i})),"selected"===t&&r.afterSelected(e,n,i))},clearItemStatus:function(e,t,n){var i=this,r=i.get("itemStatusFields");n=n||i.findElement(e),t?i.setItemStatus(e,t,!1,n):(o.each(r,function(t,r){i.setItemStatus(e,r,!1,n)}),r.selected||i.setItemSelected(e,!1),i.setItemStatus(e,"hover",!1))}}),d.View=c,n.exports=d}),define("bui/list/keynav",["jquery","bui/common"],function(e,t,n){"use strict";var i=e("jquery"),r=e("bui/common"),a=function(){};a.ATTRS={highlightedStatus:{value:"hover"}},r.augment(a,{setHighlighted:function(e,t){if(!this.hasStatus(e,"hover",t)){var n=this,i=n.get("highlightedStatus"),r=n._getHighLightedElement(),a=r?n.getItemByElement(r):null;a!==e&&(a&&this.setItemStatus(a,i,!1,r),this.setItemStatus(e,i,!0,t),n._scrollToItem(e,t))}},_getHighLightedElement:function(){var e=this,t=e.get("highlightedStatus"),n=e.get("view").getFirstElementByStatus(t);return n},getHighlighted:function(){var e=this,t=e.get("highlightedStatus"),n=e.get("view").getFirstElementByStatus(t);return e.getItemByElement(n)||null},getColumnCount:function(){var e=this,t=e.getFirstItem(),n=e.findElement(t),r=i(n);return n?parseInt(r.parent().width()/r.outerWidth(),10):1},getRowCount:function(e){var t=this;return e=e||t.getColumnCount(),(this.getCount()+e-1)/e},_getNextItem:function(e,t,n){var i,r=this,a=r._getCurrentIndex(),o=r.getCount(),s=e?1:-1;return-1===a?e?r.getFirstItem():r.getLastItem():(e||(t*=s),i=(a+t+n)%n,i>o-1&&(e?i-=o-1:i+=t),r.getItemAt(i))},_getLeftItem:function(){var e=this,t=e.getCount(),n=e.getColumnCount();return!t||1>=n?null:e._getNextItem(!1,1,t)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var e=this,t=e._getCurrentItem();return this.indexOfItem(t)},_getRightItem:function(){var e=this,t=e.getCount(),n=e.getColumnCount();return!t||1>=n?null:this._getNextItem(!0,1,t)},_getDownItem:function(){var e=this,t=e.getColumnCount(),n=e.getRowCount(t);return 1>=n?null:this._getNextItem(!0,t,t*n)},getScrollContainer:function(){return this.get("el")},isScrollVertical:function(){var e=this,t=e.get("el"),n=e.get("view").getItemContainer();return t.height()<n.height()},_scrollToItem:function(e,t){var n=this;if(n.isScrollVertical()){t=t||n.findElement(e);var r=n.getScrollContainer(),a=i(t).position().top,o=r.position().top,s=r.height(),l=a-o,u=i(t).height(),c=r.scrollTop();(0>l||l>s-u)&&r.scrollTop(c+l)}},_getUpperItem:function(){var e=this,t=e.getColumnCount(),n=e.getRowCount(t);return 1>=n?null:this._getNextItem(!1,t,t*n)},handleNavUp:function(){var e=this,t=e._getUpperItem();e.setHighlighted(t)},handleNavDown:function(){this.setHighlighted(this._getDownItem())},handleNavLeft:function(){this.setHighlighted(this._getLeftItem())},handleNavRight:function(){this.setHighlighted(this._getRightItem())},handleNavEnter:function(){var e,t=this,n=t._getCurrentItem();n&&(e=t.findElement(n),i(e).trigger("click"))},handleNavEsc:function(){this.setHighlighted(null)},handleNavTab:function(){this.setHighlighted(this._getRightItem())}}),n.exports=a}),define("bui/list/sortable",["jquery","bui/common","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=e("bui/data").Sortable,o=function(){};o.ATTRS=r.merge(!0,a.ATTRS,{}),r.augment(o,a,{compare:function(e,t,n,r){var a,o=this;return n=n||o.get("sortField"),r=r||o.get("sortDirection"),n&&r?(a="ASC"===r?1:-1,i.isPlainObject(e)||(e=o.getItemByElement(e)),i.isPlainObject(t)||(t=o.getItemByElement(t)),o.get("compareFunction")(e[n],t[n])*a):1},getSortData:function(){return i.makeArray(this.get("view").getAllElements())},sort:function(e,t){var n=this,a=n.sortData(e,t),o=n.get("view").getItemContainer();n.get("store")||n.sortData(e,t,n.get("items")),r.each(a,function(e){i(e).appendTo(o)})}}),n.exports=o}),define("bui/list/listbox",["jquery","bui/common","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/list/simplelist"),a=r.extend({bindUI:function(){var e=this;e.on("selectedchange",function(e){var t=e.item,n=i(e.domTarget),r=n.find("input");t&&r.attr("checked",e.selected)})}},{ATTRS:{itemTpl:{value:'<li><span class="x-checkbox"></span>{text}</li>'},multipleSelect:{value:!0}}},{xclass:"listbox"});n.exports=a}),define("bui/menu",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Menu");i.mix(r,{Menu:e("bui/menu/menu"),MenuItem:e("bui/menu/menuitem"),ContextMenu:e("bui/menu/contextmenu"),PopMenu:e("bui/menu/popmenu"),SideMenu:e("bui/menu/sidemenu")}),r.ContextMenuItem=r.ContextMenu.Item,n.exports=r}),define("bui/menu/menu",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=i.Component,a=r.UIBase,o=r.Controller.extend([a.ChildList],{bindUI:function(){var e=this;e.on("click",function(t){var n=t.target,i=e.get("multipleSelect");e!=n&&(i||!e.get("clickHide")||n.get("subMenu")||e.getTopAutoHideMenu().hide())}),e.on("afterOpenChange",function(t){var n=t.target,r=t.newVal,a=e.get("children");r&&i.each(a,function(e){e!==n&&e.get("open")&&e.set("open",!1)})}),e.on("afterVisibleChange",function(t){t.newVal,e.get("parentMenu");e._clearOpen()})},getTopAutoHideMenu:function(){var e=this,t=e.get("parentMenu");return t&&t.get("autoHide")?t.getTopAutoHideMenu():e.get("autoHide")?e:null},_clearOpen:function(){var e=this,t=e.get("children");i.each(t,function(e){e.set&&e.set("open",!1)})},findItemById:function(e){return this.findItemByField("id",e)},_uiSetSelectedItem:function(e){e&&_self.setSelected(e)}},{ATTRS:{elTagName:{view:!0,value:"ul"},idField:{value:"id"},isDecorateChild:{value:!0},defaultChildClass:{value:"menu-item"},selectedItem:{},parentMenu:{}}},{xclass:"menu",priority:0});n.exports=o}),define("bui/menu/menuitem",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.Component,o=a.UIBase,s=(r.prefix,"x-caret"),l="data-id",u=a.View.extend([o.ListItemView,o.CollapsableView],{_uiSetOpen:function(e){var t=this,n=t.getStatusCls("open");e?t.get("el").addClass(n):t.get("el").removeClass(n)}},{ATTRS:{}},{xclass:"menu-item-view"}),c=a.Controller.extend([o.ListItem,o.Collapsable],{renderUI:function(){var e=this,t=e.get("el"),n=e.get("id");n||(n=r.guid("menu-item"),e.set("id",n)),t.attr(l,n)},handleMouseEnter:function(e){this.get("subMenu")&&this.get("openable")&&this.set("open",!0),c.superclass.handleMouseEnter.call(this,e)},handleMouseLeave:function(e){if(this.get("openable")){var t=this,n=t.get("subMenu"),i=e.toElement||e.relatedTarget;i&&n&&n.containsElement(i)?t.set("open",!0):t.set("open",!1)}c.superclass.handleMouseLeave.call(this,e)},containsElement:function(e){var t,n=this,i=c.superclass.containsElement.call(n,e);return i||(t=n.get("subMenu"),i=t&&t.containsElement(e)),i},_uiSetOpen:function(e){if(this.get("openable")){var t=this,n=t.get("subMenu"),i=t.get("subMenuAlign");if(n)if(e)i.node=t.get("el"),n.set("align",i),n.show();else{var r=n.get("align");r&&r.node!=t.get("el")||n.hide()}}},_uiSetSubMenu:function(e){if(e){var t=this,n=t.get("el"),r=t.get("parent");e.get("parentMenu")||(e.set("parentMenu",r),r.get("autoHide")&&("click"==r.get("autoHideType")?e.set("autoHide",!1):e.set("autoHideType","leave"))),i(t.get("arrowTpl")).appendTo(n)}},destructor:function(){var e=this,t=e.get("subMenu");t&&t.destroy()}},{ATTRS:{elTagName:{value:"li"},xview:{value:u},open:{view:!0,value:!1},openable:{value:!0},subMenu:{view:!0},subMenuAlign:{valueFn:function(){return{points:["tr","tl"],offset:[-5,0]}}},arrowTpl:{value:'<span class="'+s+" "+s+'-left"></span>'},events:{value:{afterOpenChange:!0}},subMenuType:{value:"pop-menu"}},PARSER:{subMenu:function(e){var t,n=e.find("ul"),i=this.get("subMenuType");return n&&n.length&&(t=r.Component.create({srcNode:n,xclass:i}),"pop-menu"==i?(n.appendTo("body"),t.setInternal({autoHide:!0,autoHideType:"leave"})):this.get("children").push(t)),t}}},{xclass:"menu-item",priority:0}),d=c.extend({},{ATTRS:{focusable:{value:!1},selectable:{value:!1},handleMouseEvents:{value:!1}}},{xclass:"menu-item-sparator"});c.View=u,c.Separator=d,n.exports=c}),define("bui/menu/contextmenu",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=e("bui/menu/menuitem"),a=e("bui/menu/popmenu"),o=i.prefix,s=o+"menu-item-link",l=o+"menu-item-icon",u=i.Component,c=(u.UIBase,r.extend({bindUI:function(){var e=this;e.get("el").delegate("."+s,"click",function(e){e.preventDefault()})},_uiSetIconCls:function(e,t){var n=this,i=t.prevVal,r=n.get("el").find("."+l);r.removeClass(i),r.addClass(e)}},{ATTRS:{text:{veiw:!0,value:""},iconCls:{sync:!1,value:""},tpl:{value:'<a class="'+s+'" href="#">      <span class="'+l+' {iconCls}"></span><span class="'+o+'menu-item-text">{text}</span></a>'}}},{xclass:"context-menu-item"})),d=a.extend({},{ATTRS:{defaultChildClass:{value:"context-menu-item"},align:{value:null}}},{xclass:"context-menu"});d.Item=c,n.exports=d}),define("bui/menu/popmenu",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=i.Component.UIBase,a=e("bui/menu/menu"),o=i.Component.View.extend([r.PositionView],{}),s=a.extend([r.Position,r.Align,r.AutoShow,r.AutoHide],{},{ATTRS:{clickHide:{value:!0},align:{value:{points:["bl","tl"],offset:[0,0]}},visibleMode:{value:"visibility"},autoHide:{value:!0},visible:{value:!1},xview:{value:o}}},{xclass:"pop-menu"});n.exports=s}),define("bui/menu/sidemenu",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=e("bui/menu/menu"),o=(r.Component,r.prefix+"menu-title"),s="menu-leaf",l=a.extend({initializer:function(){var e=this,t=e.get("items"),n=e.get("children");r.each(t,function(t){var i=e._initMenuCfg(t);n.push(i)})},bindUI:function(){var e=this,t=e.get("children");r.each(t,function(e){var t=e.get("children")[0];t&&t.publish("click",{bubbles:1})}),e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("itemclick",function(t){var n=t.item,r=i(t.domTarget).closest("."+e.get("collapsedCls"));if(r.length){var a=n.get("collapsed");n.set("collapsed",!a)}else n.get("el").hasClass(s)&&(e.fire("menuclick",{item:n}),e.clearSelection(),e.setSelected(n))})},getItems:function(){var e=this,t=[],n=e.get("children");return r.each(n,function(e){var n=e.get("children")[0];t=t.concat(n.get("children"))}),t},_initMenuCfg:function(e){var t=this,n=e.items,i=[],a={selectable:!1,children:[{xclass:"menu",children:i}]};return r.mix(a,{xclass:"menu-item",elCls:"menu-second"},e),r.each(n,function(e){var n=t._initSubMenuCfg(e);i.push(n)}),a},_initSubMenuCfg:function(e){var t=this,n={xclass:"menu-item",elCls:"menu-leaf",tpl:t.get("subMenuItemTpl")};return r.mix(n,e)}},{ATTRS:{defaultChildCfg:{value:{subMenuType:"menu",openable:!1,arrowTpl:""}},autoInitItems:{value:!1},itemTpl:{value:'<div class="'+o+'"><s></s><span class="'+o+'-text">{text}</span></div>'},subMenuItemTpl:{value:'<a href="{href}"><em>{text}</em></a>'},collapsedCls:{value:o},events:{value:{menuclick:!1}}}},{xclass:"side-menu"});n.exports=l}),define("bui/tab",["bui/common","jquery","bui/menu"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Tab");i.mix(r,{Tab:e("bui/tab/tab"),TabItem:e("bui/tab/tabitem"),NavTabItem:e("bui/tab/navtabitem"),NavTab:e("bui/tab/navtab"),TabPanel:e("bui/tab/tabpanel"),TabPanelItem:e("bui/tab/tabpanelitem")}),n.exports=r}),define("bui/tab/tab",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=i.Component,a=r.UIBase,o=r.Controller.extend([a.ChildList],{},{ATTRS:{elTagName:{view:!0,value:"ul"},defaultChildClass:{value:"tab-item"}}},{xclass:"tab"});n.exports=o}),define("bui/tab/tabitem",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=i.Component,a=r.UIBase,o=r.View.extend([a.ListItemView],{},{xclass:"tab-item-view"}),s=r.Controller.extend([a.ListItem],{},{ATTRS:{elTagName:{view:!0,value:"li"},xview:{value:o},tpl:{view:!0,value:'<span class="bui-tab-item-text">{text}</span>'}}},{xclass:"tab-item"});s.View=o,n.exports=s}),define("bui/tab/navtabitem",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.Component,o="tab-item-title",s="tab-item-close",l="tab-item-inner",u="tab-nav-actived",c="tab-content",d=a.View.extend({renderUI:function(){var e=this,t=e.get("tabContentContainer"),n=e.get("tabContentTpl");if(t){var r=i(n).appendTo(t);e.set("tabContentEl",r)}},_uiSetHref:function(e){this._setHref(e)},_setHref:function(e){var t=this,n=t.get("tabContentEl");e=e||t.get("href"),n&&i("iframe",n).attr("src",e)},resetHref:function(){this._setHref()},_uiSetTitle:function(e){var t=this,n=t.get("el");i("."+o,n).html(e)},_uiSetActived:function(e){var t=this,n=t.get("el");t.setTabContentVisible(e),e?n.addClass(u):n.removeClass(u)},destructor:function(){var e=this,t=e.get("tabContentEl");t&&t.remove()},setTabContentVisible:function(e){var t=this,n=t.get("tabContentEl");n&&(e?n.show():n.hide())}},{ATTRS:{tabContentContainer:{},tabContentEl:{},title:{},href:{}}}),f=a.Controller.extend({createDom:function(){var e=this,t=e.get("parent");t&&e.set("tabContentContainer",t.getTabContentContainer())},bindUI:function(){{var e=this,t=e.get("el");e.get("events")}t.on("click",function(t){var n=i(t.target);n.hasClass(s)&&e.fire("closing")!==!1&&e.close()})},handleDblClick:function(e){var t=this;t.get("closeable")&&t.fire("closing")!==!1&&t.close(),t.fire("dblclick",{domTarget:e.target,domEvent:e})},handleContextMenu:function(e){e.preventDefault(),this.fire("showmenu",{position:{x:e.pageX,y:e.pageY}})},setTitle:function(e){this.set("title",e)},close:function(){this.fire("closed")},reload:function(){this.get("view").resetHref()},show:function(){var e=this;e.get("el").show(500,function(){e.set("visible",!0)})},hide:function(e){var t=this;this.get("el").hide(500,function(){t.set("visible",!1),e&&e()})},_uiSetActived:function(e){var t=this,n=t.get("parent");n&&e&&n._setItemActived(t)},_uiSetCloseable:function(e){var t=this,n=t.get("el"),i=n.find("."+s);e?i.show():i.hide()}},{ATTRS:{elTagName:{value:"li"},actived:{view:!0,value:!1},closeable:{value:!0},allowTextSelection:{view:!1,value:!1},events:{value:{click:!0,closing:!0,closed:!0,showmenu:!0,afterVisibleChange:!0}},tabContentContainer:{view:!0},tabContentTpl:{view:!0,value:'<div class="'+c+'" style="display:none;"><iframe src="" width="100%" height="100%" frameborder="0"></iframe></div>'},href:{view:!0,value:""},visible:{view:!0,value:!0},title:{view:!0,value:""},tpl:{view:!0,value:'<s class="l"></s><div class="'+l+'">{icon}<span class="'+o+'"></span><s class="'+s+'"></s></div><s class="r"></s>'},xview:{value:d}}},{xclass:"nav-tab-item",priority:0});f.View=d,n.exports=f}),define("bui/tab/navtab",["bui/common","jquery","bui/menu"],function(e,t,n){var i=e("bui/common"),r=e("bui/menu"),a=i.Component,o="tab-nav-list",s="arrow-left",l="arrow-right",u=i.prefix+"tab-force",c="m_close",d=140,f=a.View.extend({renderUI:function(){var e=this,t=e.get("el"),n=null;n=t.find("."+o),e.setInternal("listEl",n)},getContentElement:function(){return this.get("listEl")},getTabContentContainer:function(){return this.get("el").find(".tab-content-container")},_uiSetHeight:function(e){var t=this,n=t.get("el"),i=n.find(".tab-nav-bar"),r=t.getTabContentContainer();e&&r.height(e-i.height()),n.height(e)},_uiSetForceFit:function(e){var t=this,n=t.get("el");e?n.addClass(u):n.removeClass(u)}},{ATTRS:{forceFit:{}}},{xclass:"nav-tab-view",priority:0}),g=a.Controller.extend({addTab:function(e,t){var n=this,r=e.id||i.guid("tab-item"),a=n.get("forceFit"),o=n.getItemById(r);if(o){var s=!1;e.href&&o.get("href")!=e.href&&(o.set("href",e.href),s=!0),n._setItemActived(o),t&&!s&&o.reload()}else e=i.mix({id:r,visible:!1,actived:!0,xclass:"nav-tab-item"},e),o=n.addChild(e),a&&n.forceFit(),o.show(),n._resetItemList();return o},getTabContentContainer:function(){return this.get("view").getTabContentContainer()},bindUI:function(){var e=this,t=e.get("forceFit");t||(e._bindScrollEvent(),e.on("afterVisibleChange",function(t){var n=t.target;n.get("actived")&&e._scrollToItem(n)})),e.on("click",function(t){var n=t.target;n!=e&&(e._setItemActived(n),e.fire("itemclick",{item:n}))}),e.on("closed",function(t){var n=t.target;e._closeItem(n)}),e.on("showmenu",function(t){e._showMenu(t.target,t.position)})},_bindScrollEvent:function(){var e=this,t=e.get("el");t.find(".arrow-left").on("click",function(){t.hasClass(s+"-active")&&e._scrollLeft()}),t.find(".arrow-right").on("click",function(){t.hasClass(l+"-active")&&e._scrllRight()})},_showMenu:function(e,t){var n,i=this,r=i._getMenu(),a=e.get("closeable");i.set("showMenuItem",e),r.set("xy",[t.x,t.y]),r.show(),n=r.getItem(c),n&&n.set("disabled",!a)},setActived:function(e){var t=this,n=t.getItemById(e);t._setItemActived(n)},getActivedItem:function(){var e=this,t=e.get("children"),n=null;return i.each(t,function(e){return e.get("actived")?(n=e,!1):void 0}),n},getItemById:function(e){var t=this,n=t.get("children"),r=null;return i.each(n,function(t){return t.get("id")===e?(r=t,!1):void 0}),r},_getMenu:function(){var e=this;return e.get("menu")||e._initMenu()},_initMenu:function(){var e=this,t=new r.ContextMenu({children:[{xclass:"context-menu-item",iconCls:"icon icon-refresh",text:"\u5237\u65b0",listeners:{click:function(){var t=e.get("showMenuItem");t&&t.reload()}}},{id:c,xclass:"context-menu-item",iconCls:"icon icon-remove",text:"\u5173\u95ed",listeners:{click:function(){var t=e.get("showMenuItem");t&&t.close()}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u5176\u4ed6",listeners:{click:function(){var t=e.get("showMenuItem");t&&e.closeOther(t)}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u6240\u6709",listeners:{click:function(){e.closeAll()}}}]});return e.set("menu",t),t},_closeItem:function(e){var t=this,n=t._getIndex(e),i=t.getActivedItem(),r=t.get("preItem")||t._getItemByIndex(n-1),a=t._getItemByIndex(n+1);e.hide(function(){t.removeChild(e,!0),t._resetItemList(),i===e?t._setItemActived(r?r:a):t._scrollToItem(i),t.forceFit()})},closeAll:function(){var e=this,t=e.get("children");i.each(t,function(e){e.get("closeable")&&e.close()})},closeOther:function(e){var t=this,n=t.get("children");i.each(n,function(t){e!==t&&t.close()})},_getItemByIndex:function(e){var t=this,n=t.get("children");return n[e]},_getIndex:function(e){var t=this,n=t.get("children");return i.Array.indexOf(e,n)},_resetItemList:function(){if(!this.get("forceFit")){var e=this,t=e.getContentElement();t.width(e._getTotalWidth())}},_getTotalWidth:function(){var e=this,t=e.get("children");return t.length*e.get("itemWidth")},_getForceItemWidth:function(){var e=this,t=e.getContentElement().width(),n=e.get("children"),i=e._getTotalWidth(),r=e.get(r);return i>t&&(r=t/n.length),r},forceFit:function(){var e=this;e._forceItemWidth(e._getForceItemWidth())},_forceItemWidth:function(e){e=e||this.get("itemWidth");var t=this,n=t.get("children");i.each(n,function(t){t.set("width",e)})},_scrollToItem:function(e){if(!this.get("forceFit")){var t=this,n=t.getContentElement(),i=n.position(),r=t._getDistanceToEnd(e,n,i),a=t._getDistanceToBegin(e,i);if(n.width()<n.parent().width())t._scrollTo(n,0);else if(0>a)t._scrollTo(n,i.left-a);else if(r>0)t._scrollTo(n,i.left+-1*r);else if(i.left<0){var o=t._getLastDistance(n,i),s=0;0>o&&(s=i.left-o,s=0>s?s:0,t._scrollTo(n,s))}}},_getDistanceToBegin:function(e,t){var n=e.get("el").position();return n.left+t.left},_getDistanceToEnd:function(e,t,n){var i=this,t=t||i.getContentElement(),r=t.parent().width(),n=n||t.position(),a=i._getDistanceToBegin(e,n),o=a+i.get("itemWidth")-r;return o},_getLastDistance:function(e,t){var n=this,i=n.get("children"),r=i[i.length-1];return r?n._getDistanceToEnd(r,e,t):0},_scrollTo:function(e,t){var n=this;e.animate({left:t},500,function(){n._setArrowStatus(e)})},_scrollLeft:function(){var e,t=this,n=t.getContentElement(),i=n.position(),r=t._getLastDistance(n,i);r>0&&(e=r>t.get("itemWidth")?t.get("itemWidth"):r,t._scrollTo(n,i.left-e))},_scrllRight:function(){var e,t=this,n=t.getContentElement(),i=n.position();i.left<0&&(e=i.left+t.get("itemWidth"),e=0>e?e:0,t._scrollTo(n,e))},_setArrowStatus:function(e,t){e=e||this.getContentElement();var n=this,i=n.get("el"),r=t||e.position(),a=n._getLastDistance(e,t);r.left<0?i.addClass(l+"-active"):i.removeClass(l+"-active"),a>0?i.addClass(s+"-active"):i.removeClass(s+"-active")},_setItemActived:function(e){var t=this,n=t.getActivedItem();e!==n&&(n&&n.set("actived",!1),t.set("preItem",n),e&&(e.get("actived")||e.set("actived",!0),e.get("visible")&&t._scrollToItem(e),t.fire("activeChange",{item:e}),t.fire("activedchange",{item:e})))}},{ATTRS:{defaultChildClass:{value:"nav-tab-item"},menu:{},forceFit:{view:!0,value:!1},itemWidth:{value:d},tpl:{view:!0,value:'<div class="tab-nav-bar"><s class="tab-nav-arrow arrow-left"></s><div class="tab-nav-wrapper"><div class="tab-nav-inner"><ul class="'+o+'"></ul></div></div><s class="tab-nav-arrow arrow-right"></s></div><div class="tab-content-container"></div>'},xview:{value:f},events:{value:{itemclick:!1,activedchange:!1}}}},{xclass:"nav-tab",priority:0});n.exports=g}),define("bui/tab/tabpanel",["bui/common","jquery"],function(e,t,n){var i=(e("bui/common"),e("bui/tab/tab")),r=e("bui/tab/panels"),a=i.extend([r],{bindUI:function(){var e=this;e.on("beforeclosed",function(t){var n=t.target;e._beforeClosedItem(n)})},_beforeClosedItem:function(e){if(e.get("selected")){var t,n,i=this,r=i.indexOfItem(e),a=i.getItemCount();r!==a-1?(n=i.getItemAt(r+1),i.setSelected(n)):0!==r&&(t=i.getItemAt(r-1),i.setSelected(t))}}},{ATTRS:{elTagName:{value:"div"},childContainer:{value:"ul"},tpl:{value:'<div class="tab-panel-inner"><ul></ul><div class="tab-panels"></div></div>'},panelTpl:{value:"<div></div>"},panelContainer:{value:".tab-panels"},defaultChildClass:{value:"tab-panel-item"}}},{xclass:"tab-panel"});n.exports=a}),define("bui/tab/panels",["jquery"],function(e,t,n){var i=e("jquery"),r=function(){};r.ATTRS={panelTpl:{},panelContainer:{},panelCls:{}},BUI.augment(r,{__renderUI:function(){var e=this,t=e.get("children"),n=e._initPanelContainer(),i=e.get("panelCls"),r=i?n.find("."+r):n.children();BUI.each(t,function(t,n){var i=r[n];e._initPanelItem(t,i)})},__bindUI:function(){var e=this;e.on("beforeAddChild",function(t){var n=t.child;e._initPanelItem(n)})},_initPanelContainer:function(){var e=this,t=e.get("panelContainer");return t&&BUI.isString(t)&&(t=0==t.indexOf("#")?i(t):e.get("el").find(t),e.setInternal("panelContainer",t)),t},_initPanelItem:function(e,t){var n=this;e.set?e.get("panel")||(t=t||n._getPanel(e.get("userConfig")),e.set("panel",t)):e.panel||(t=t||n._getPanel(e),e.panel=t)},_getPanel:function(e){var t=this,n=t.get("panelContainer"),r=BUI.substitute(t.get("panelTpl"),e);return i(r).appendTo(n)}}),n.exports=r}),define("bui/tab/tabpanelitem",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=e("bui/tab/tabitem"),a=e("bui/tab/panelitem"),o="bui-tab-item-text",s=i.Component,l=r.View.extend([s.UIBase.Close.View],{_uiSetTitle:function(e){var t=this,n=t.get("el"),i=n.find("."+o);i.text(e)}},{xclass:"tab-panel-item-view"}),u=r.extend([a,s.UIBase.Close],{},{ATTRS:{closeAction:{value:"remove"},title:{view:!0,sync:!1},tpl:{value:'<span class="'+o+'">{text}{title}</span>'},closeable:{value:!1},events:{value:{beforeclosed:!0}},xview:{value:l}}},{xclass:"tab-panel-item"});u.View=l,n.exports=u}),define("bui/tab/panelitem",["jquery"],function(e,t,n){var i=e("jquery"),r=function(){};
r.ATTRS={panel:{},panelContent:{},panelVisibleStatus:{value:"selected"},defaultLoaderCfg:{valueFn:function(){var e=this,t=e._getVisibleEvent();return{property:"panelContent",autoLoad:!1,lazyLoad:{event:t},loadMask:{el:e.get("panel")}}}},panelDestroyable:{value:!0}},BUI.augment(r,{__renderUI:function(){this._resetPanelVisible()},__bindUI:function(){var e=this,t=e._getVisibleEvent();e.on(t,function(t){e._setPanelVisible(t.newVal)})},_resetPanelVisible:function(){var e=this,t=e.get("panelVisibleStatus"),n=e.get(t);e._setPanelVisible(n)},_getVisibleEvent:function(){var e=this,t=e.get("panelVisibleStatus");return"after"+BUI.ucfirst(t)+"Change"},_setPanelVisible:function(e){var t=this,n=t.get("panel"),r=e?"show":"hide";n&&i(n)[r]()},__destructor:function(){var e=this,t=e.get("panel");t&&e.get("panelDestroyable")&&i(t).remove()},_setPanelContent:function(e,t){i(e);i(e).html(t)},_uiSetPanelContent:function(e){var t=this,n=t.get("panel");t._setPanelContent(n,e)},_uiSetPanel:function(e){var t=this,n=t.get("panelContent");n&&t._setPanelContent(e,n),t._resetPanelVisible()}}),n.exports=r}),define("bui/mask",["bui/common","jquery"],function(e,t,n){var i=(e("bui/common"),e("bui/mask/mask"));i.LoadMask=e("bui/mask/loadmask"),n.exports=i}),define("bui/mask/mask",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.namespace("Mask"),o=r.UA,s=r.prefix+"ext-mask",l=s+"-msg";r.mix(a,{maskElement:function(e,t,n){var a=i(e),u=a.children("."+s),c=null,d=null,f=null,g=null;if(!u.length&&(u=i('<div class="'+s+'"></div>').appendTo(a),a.addClass("x-masked-relative x-masked"),"body"==e?6==o.ie?u.height(r.docHeight()):u.css("position","fixed"):6===o.ie&&u.height(a.height()),t)){c=['<div class="'+l+'"><div>',t,"</div></div>"].join(""),d=i(c).appendTo(a),n&&d.addClass(n);try{"body"==e&&6!=o.ie?(f="50%",g="50%",d.css("position","fixed")):(f=(u.height()-d.height())/2,g=(u.width()-d.width())/2),d.css({left:g,top:f})}catch(h){r.log("mask error occurred")}}return u},unmaskElement:function(e){var t=i(e),n=t.children("."+l),r=t.children("."+s);n&&n.remove(),r&&r.remove(),t.removeClass("x-masked-relative x-masked")}}),n.exports=a}),define("bui/mask/loadmask",["jquery","bui/common"],function(e,t,n){function i(e){var t=this;i.superclass.constructor.call(t,e)}var r=(e("jquery"),e("bui/mask/mask"));BUI.extend(i,BUI.Base),i.ATTRS={el:{},msg:{value:"Loading..."},msgCls:{value:"x-mask-loading"},disabled:{value:!1}},BUI.augment(i,{disable:function(){this.set("disabled",!0)},onLoad:function(){r.unmaskElement(this.get("el"))},onBeforeLoad:function(){var e=this;e.get("disabled")||r.maskElement(e.get("el"),e.get("msg"),this.get("msgCls"))},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.hide(),this.clearAttrVals(),this.off()}}),n.exports=i}),define("bui/overlay",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Overlay");i.mix(r,{Overlay:e("bui/overlay/overlay"),Dialog:e("bui/overlay/dialog"),Message:e("bui/overlay/message")}),i.mix(r,{OverlayView:r.Overlay.View,DialogView:r.Dialog.View}),i.Message=i.Overlay.Message,n.exports=r}),define("bui/overlay/overlay",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.Component,o="x-align-arrow",s=a.UIBase,l=a.View.extend([s.PositionView,s.CloseView]),u=a.Controller.extend([s.Position,s.Align,s.Close,s.AutoShow,s.AutoHide],{renderUI:function(){var e=this,t=e.get("el"),n=e.get("arrowContainer"),r=n?t.one(n):t;e.get("showArrow")&&i(e.get("arrowTpl")).appendTo(r)},show:function(){function e(){"visibility"===r?i.css({display:"block"}):t.set("visible",!0),n.callback&&n.callback.call(t);var e=t.get("autoHideDelay"),a=t.get("delayHandler");e&&(a&&clearTimeout(a),a=setTimeout(function(){t.hide(),t.set("delayHandler",null)},e),t.set("delayHandler",a))}var t=this,n=t.get("effect"),i=t.get("el"),r=t.get("visibleMode"),a=n.effect,o=n.duration;switch(t.get("rendered")||(t.set("visible",!0),t.render(),t.set("visible",!1),i=t.get("el")),"visibility"===r&&(t.set("visible",!0),i.css({display:"none"})),a){case"linear":i.show(o,e);break;case"fade":i.fadeIn(o,e);break;case"slide":i.slideDown(o,e);break;default:e()}},hide:function(){function e(){"visibility"===t.get("visibleMode")&&i.css({display:"block"}),t.set("visible",!1),n.callback&&n.callback.call(t)}var t=this,n=t.get("effect"),i=t.get("el"),r=n.effect,a=n.duration;switch(r){case"linear":i.hide(a,e);break;case"fade":i.fadeOut(a,e);break;case"slide":i.slideUp(a,e);break;default:e()}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},autoHideDelay:{},closeable:{value:!1},showArrow:{value:!1},arrowContainer:{view:!0},arrowTpl:{value:'<s class="'+o+'"><s class="'+o+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:!1},xview:{value:l}}},{xclass:"overlay"});u.View=l,n.exports=u}),define("bui/overlay/dialog",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/overlay/overlay"),a=BUI.Component.UIBase,o="header-title",s=BUI.prefix,l=20,u=r.View.extend([a.StdModView,a.MaskView],{getContentElement:function(){return this.get("body")},_uiSetTitle:function(e){var t=this,n=t.get("el");n.find("."+o).html(e)},_uiSetContentId:function(e){var t=this,n=t.get("body"),r=i("#"+e).children();r.appendTo(n)},_uiSetHeight:function(e){var t=this,n=e,i=t.get("header"),r=t.get("body"),a=t.get("footer");n-=i.outerHeight()+a.outerHeight(),n-=2*l,r.height(n)},_removeContent:function(){var e=this,t=e.get("body"),n=e.get("contentId");n?t.children().appendTo(i("#"+n)):t.children().remove()}},{xclass:"dialog-view"}),c=r.extend([a.StdMod,a.Mask,a.Drag],{show:function(){var e=this;align=e.get("align"),c.superclass.show.call(this),e.set("align",align)},bindUI:function(){var e=this;e.on("closeclick",function(){return e.onCancel()})},onCancel:function(){var e=this,t=e.get("cancel");return t.call(this)},_uiSetButtons:function(e){var t=this,n=t.get("footer");n.children().remove(),BUI.each(e,function(e){t._createButton(e,n)})},_createButton:function(e,t){var n=this,r='<button class="'+e.elCls+'">'+e.text+"</button>",a=i(r).appendTo(t);a.on("click",function(){e.handler.call(n,n,this)})},destructor:function(){var e=this,t=e.get("contentId"),n=e.get("body"),i=e.get("closeAction");"destroy"==i&&(e.hide(),t&&n.children().appendTo("#"+t))}},{ATTRS:{closeTpl:{view:!0,value:'<a tabindex="0" href=javascript:void("\u5173\u95ed") role="button" class="'+s+'ext-close" style=""><span class="'+s+'ext-close-x x-icon x-icon-normal">\xd7</span></a>'},buttons:{value:[{text:"\u786e\u5b9a",elCls:"button button-primary",handler:function(){var e=this,t=e.get("success");t&&t.call(e)}},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:function(){this.onCancel()!==!1&&this.close()}}]},contentId:{view:!0},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},defaultLoaderCfg:{valueFn:function(){var e=this;return{property:"bodyContent",autoLoad:!1,lazyLoad:{event:"show"},loadMask:{el:e.get("body")}}}},title:{view:!0,value:""},align:{value:{node:window,points:["cc","cc"]}},mask:{value:!0},maskShared:{value:!1},headerContent:{value:'<div class="'+o+'">\u6807\u9898</div>'},footerContent:{},closeable:{value:!0},xview:{value:u}}},{xclass:"dialog"});c.View=u,n.exports=c}),define("bui/overlay/message",["jquery","bui/common"],function(e,t,n){function i(e,t){return function(n,i,a){return BUI.isString(i)&&(a=i,i=null),a=a||t,i=i||o,r({buttons:e,icon:a,msg:n,success:i}),s}}function r(e){s||(s=new f({icon:"info",title:""})),s.set(e),s.show()}function a(){var e=this,t=e.get("success");t&&(t.call(e),e.hide())}function o(){this.hide()}var s,l=e("jquery"),u=e("bui/overlay/dialog"),c=BUI.prefix,d={info:"i",error:"\xd7",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"},f=u.extend({renderUI:function(){this._setContent()},bindUI:function(){var e=this,t=e.get("body");e.on("afterVisibleChange",function(n){if(n.newVal&&BUI.UA.ie<8){var i=t.outerWidth();6==BUI.UA.ie&&(i=i>350?350:i),e.get("header").width(i-20),e.get("footer").width(i)}})},_setContent:function(){var e=this,t=e.get("body"),n=BUI.substitute(e.get("contentTpl"),{msg:e.get("msg"),iconTpl:e.get("iconTpl")});t.empty(),l(n).appendTo(t)},_uiSetIcon:function(){this.get("rendered")&&this._setContent()},_uiSetMsg:function(){this.get("rendered")&&this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var e=this,t=e.get("icon");return'<div class="x-icon x-icon-'+t+'">'+d[t]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+c+'message-content">{msg}</div>'}}},{xclass:"message",priority:0}),g=i([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:a}],"info"),h=i([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:a},{text:"\u53d6\u6d88",elCls:"button",handler:o}],"question");f.Alert=g,f.Confirm=h,f.Show=r,n.exports=f}),define("bui/picker",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Picker");i.mix(r,{Mixin:e("bui/picker/mixin"),Picker:e("bui/picker/picker"),ListPicker:e("bui/picker/listpicker")}),n.exports=r}),define("bui/picker/mixin",["jquery"],function(e,t,n){var i=e("jquery"),r=function(){};r.ATTRS={innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:!0},changeEvent:{value:"selectedchange"},autoHide:{value:!0},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}},r.prototype={__bindUI:function(){{var e=this;e.get("hideEvent"),i(e.get("trigger"))}e.on("show",function(){if(e.get("isInit")||e._initControl(),e.get("autoSetValue")){var t=e.get("valueField")||e.get("textField")||e.get("curTrigger"),n=i(t).val();e.setSelectedValue(n)}})},_initControl:function(){var e=this;if(!e.get("isInit")){if(!e.get("innerControl")){var t=e.createControl();e.get("children").push(t)}e.initControlEvent(),e.set("isInit",!0)}},initControl:function(){this._initControl()},createControl:function(){},initControlEvent:function(){var e=this,t=e.get("innerControl"),n=i(e.get("trigger")),r=e.get("hideEvent");t.on(e.get("changeEvent"),function(t){var r=e.get("curTrigger"),a=e.get("textField")||r||n,o=e.get("valueField"),s=e.getSelectedValue(),l=!1;if(a){var u=e.getSelectedText(),c=i(a).val();u!=c&&(i(a).val(u),l=!0,i(a).trigger("change"))}if(o&&e.get("autoSetValue")){var d=i(o).val();o!=d&&(i(o).val(s),l=!0,i(o).trigger("change"))}l&&e.onChange(u,s,t)}),r&&t.on(e.get("hideEvent"),function(){var t=e.get("curTrigger");try{t&&t.focus()}catch(n){BUI.log(n)}e.hide()})},setSelectedValue:function(){},getSelectedValue:function(){},getSelectedText:function(){},focus:function(){this.get("innerControl").focus()},onChange:function(e,t){var n=this,i=n.get("curTrigger");n.fire("selectedchange",{value:t,text:e,curTrigger:i})},handleNavEsc:function(){this.hide()},_uiSetValueField:function(e){var t=this;null!=e&&""!==e&&t.get("autoSetValue")&&t.setSelectedValue(i(e).val())},_getTextField:function(){var e=this;return e.get("textField")||e.get("curTrigger")}},n.exports=r}),define("bui/picker/picker",["jquery","bui/overlay","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/overlay").Overlay),r=e("bui/picker/mixin"),a=i.extend([r],{},{ATTRS:{}},{xclass:"picker"});n.exports=a}),define("bui/picker/listpicker",["jquery","bui/list","bui/common","bui/data","bui/overlay"],function(e,t,n){var i=(e("jquery"),e("bui/list"),e("bui/picker/picker")),r=i.extend({initializer:function(){var e=this,t=e.get("children"),n=e.get("list");n||t.push({})},setSelectedValue:function(e){e=e?e.toString():"",this.get("isInit")||this._initControl();var t=this,n=t.get("list"),i=t.getSelectedValue();e!==i&&n.getCount()&&(n.get("multipleSelect")&&n.clearSelection(),n.setSelectionByField(e.split(",")))},onChange:function(e,t,n){var i=this,r=i.get("curTrigger");i.fire("selectedchange",{value:t,text:e,curTrigger:r,item:n.item})},getSelectedValue:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionValues().join(",")},getSelectedText:function(){return this.get("isInit")||this._initControl(),this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});n.exports=r}),define("bui/toolbar",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Toolbar");i.mix(r,{BarItem:e("bui/toolbar/baritem"),Bar:e("bui/toolbar/bar"),PagingBar:e("bui/toolbar/pagingbar"),NumberPagingBar:e("bui/toolbar/numberpagingbar")}),n.exports=r}),define("bui/toolbar/baritem",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=i.prefix,a=i.Component,o=a.UIBase,s=a.View.extend([o.ListItemView]),l=a.Controller.extend([o.ListItem],{renderUI:function(){var e=this.get("el");e.addClass(r+"inline-block"),e.attr("id")||e.attr("id",this.get("id"))}},{ATTRS:{elTagName:{view:!0,value:"li"},selectable:{value:!1},focusable:{value:!1},xview:{value:s}}},{xclass:"bar-item",priority:1}),u=l.extend({_uiSetDisabled:function(e){var t=this,n=t.get("el"),i=e?"addClass":"removeClass";n.find("button").attr("disabled",e)[i](r+"button-disabled")},_uiSetChecked:function(e){var t=this,n=t.get("el"),i=e?"addClass":"removeClass";n.find("button")[i](r+"button-checked")},_uiSetText:function(e){var t=this,n=t.get("el");n.find("button").text(e)},_uiSetbtnCls:function(e){var t=this,n=t.get("el");n.find("button").addClass(e)}},{ATTRS:{checked:{value:!1},tpl:{view:!0,value:'<button type="button" class="{btnCls}">{text}</button>'},btnCls:{sync:!1},text:{sync:!1,value:""}}},{xclass:"bar-item-button",priority:2}),c=l.extend({renderUI:function(){var e=this.get("el");e.attr("role","separator")}},{xclass:"bar-item-separator",priority:2}),d=l.extend({},{ATTRS:{width:{view:!0,value:2}}},{xclass:"bar-item-spacer",priority:2}),f=l.extend({_uiSetText:function(e){var t=this,n=t.get("el");n.html(e)}},{ATTRS:{text:{value:""}}},{xclass:"bar-item-text",priority:2});l.types={button:u,separator:c,spacer:d,text:f},n.exports=l}),define("bui/toolbar/bar",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=i.Component,a=r.UIBase,o=r.View.extend({renderUI:function(){var e=this.get("el");e.attr("role","toolbar"),e.attr("id")||e.attr("id",i.guid("bar"))}}),s=r.Controller.extend([a.ChildList],{getItem:function(e){return this.getChild(e)}},{ATTRS:{elTagName:{view:!0,value:"ul"},defaultChildClass:{value:"bar-item"},focusable:{value:!1},xview:{value:o}}},{xclass:"bar",priority:1});n.exports=s}),define("bui/toolbar/pagingbar",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=e("bui/toolbar/bar"),a=i.Component,o=a.UIBase.Bindable,s=i.prefix,l="first",u="prev",c="next",d="last",f="skip",g="refresh",h="totalPage",v="curPage",m="totalCount",p=[l,u,c,d,f,g],b=[h,v,m],y=r.extend([o],{initializer:function(){var e=this,t=e.get("children"),n=e.get("items"),r=e.get("store");n?i.each(n,function(n){i.isString(n)&&(n=i.Array.contains(n,p)?e._getButtonItem(n):i.Array.contains(n,b)?e._getTextItem(n):{xtype:n}),t.push(n)}):(n=e._getItems(),i.each(n,function(e){t.push(e)})),r&&r.get("pageSize")&&e.set("pageSize",r.get("pageSize"))},bindUI:function(){var e=this;e._bindButtonEvent()},jumpToPage:function(e){if(!(0>=e||e>this.get("totalPage"))){var t=this,n=t.get("store"),i=t.get("pageSize"),r=e-1,a=r*i,o=t.fire("beforepagechange",{from:t.get("curPage"),to:e});n&&o!==!1&&n.load({start:a,limit:i,pageIndex:r})}},_afterStoreLoad:function(e){var t,n,i,r,a=this,o=a.get("pageSize"),s=0;s=e.get("start"),n=e.getTotalCount(),t=n-s>o?s+e.getCount()-1:n,r=parseInt((n+o-1)/o,10),r=r>0?r:1,i=parseInt(s/o,10)+1,a.set("start",s),a.set("end",t),a.set("totalCount",n),a.set("curPage",i),a.set("totalPage",r),a._setAllButtonsState(),a._setNumberPages()},_bindButtonEvent:function(){function e(){var e=parseInt(t._getCurrentPageValue(),10);t._isPageAllowRedirect(e)?t.jumpToPage(e):t._setCurrentPageValue(t.get("curPage"))}var t=this;t._bindButtonItemEvent(l,function(){t.jumpToPage(1)}),t._bindButtonItemEvent(u,function(){t.jumpToPage(t.get("curPage")-1)}),t._bindButtonItemEvent(c,function(){t.jumpToPage(t.get("curPage")+1)}),t._bindButtonItemEvent(d,function(){t.jumpToPage(t.get("totalPage"))}),t._bindButtonItemEvent(f,function(){e()}),t._bindButtonItemEvent(g,function(){t.jumpToPage(t.get("curPage"))});var n=t.getItem(v);n&&n.get("el").on("keyup",function(t){t.stopPropagation(),13===t.keyCode&&e()})},_bindButtonItemEvent:function(e,t){var n=this,i=n.getItem(e);i&&i.on("click",t)},onLoad:function(e){var t=this,n=t.get("store");t._afterStoreLoad(n,e)},_getItems:function(){var e=this,t=e.get("items");return t&&t.length?t:(t=[],t.push(e._getButtonItem(l)),t.push(e._getButtonItem(u)),t.push(e._getSeparator()),t.push(e._getTextItem(h)),t.push(e._getTextItem(v)),t.push(e._getButtonItem(f)),t.push(e._getSeparator()),t.push(e._getButtonItem(c)),t.push(e._getButtonItem(d)),t.push(e._getSeparator()),t.push(e._getTextItem(m)),t)},_getButtonItem:function(e){var t=this;return{id:e,xclass:"bar-item-button",text:t.get(e+"Text"),disabled:!0,elCls:t.get(e+"Cls")}},_getSeparator:function(){return{xclass:"bar-item-separator"}},_getTextItem:function(e){var t=this;return{id:e,xclass:"bar-item-text",text:t._getTextItemTpl(e)}},_getTextItemTpl:function(e){var t=this,n=t.getAttrVals();return i.substitute(this.get(e+"Tpl"),n)},_isPageAllowRedirect:function(e){var t=this;return e&&e>0&&e<=t.get("totalPage")&&e!==t.get("curPage")},_setAllButtonsState:function(){var e=this,t=e.get("store");t&&e._setButtonsState([u,c,l,d,f],!0),1===e.get("curPage")&&e._setButtonsState([u,l],!1),e.get("curPage")===e.get("totalPage")&&e._setButtonsState([c,d],!1)},_setButtonsState:function(e,t){var n=this,r=n.get("children");i.each(r,function(n){-1!==i.Array.indexOf(n.get("id"),e)&&n.set("disabled",!t)})},_setNumberPages:function(){var e=this,t=e.getItems();i.each(t,function(t){"bar-item-text"===t.__xclass&&t.set("content",e._getTextItemTpl(t.get("id")))})},_getCurrentPageValue:function(e){var t=this;if(e=e||t.getItem(v)){var n=e.get("el").find("input");return n.val()}},_setCurrentPageValue:function(e,t){var n=this;if(t=t||n.getItem(v)){var i=t.get("el").find("input");i.val(e)}}},{ATTRS:{firstText:{value:"\u9996 \u9875"},firstCls:{value:s+"pb-first"},prevText:{value:"\u4e0a\u4e00\u9875"},prevCls:{value:s+"pb-prev"},nextText:{value:"\u4e0b\u4e00\u9875"},nextCls:{value:s+"pb-next"},lastText:{value:"\u672b \u9875"},lastCls:{value:s+"pb-last"},skipText:{value:"\u786e\u5b9a"},skipCls:{value:s+"pb-skip"},refreshText:{value:"\u5237\u65b0"},refreshCls:{value:s+"pb-refresh"},totalPageTpl:{value:"\u5171 {totalPage} \u9875"},curPageTpl:{value:'\u7b2c <input type="text" autocomplete="off" class="'+s+'pb-page" size="20" value="{curPage}" name="inputItem"> \u9875'},totalCountTpl:{value:"\u5171{totalCount}\u6761\u8bb0\u5f55"},autoInitItems:{value:!1},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:30},store:{}},ID_FIRST:l,ID_PREV:u,ID_NEXT:c,ID_LAST:d,ID_SKIP:f,ID_REFRESH:g,ID_TOTAL_PAGE:h,ID_CURRENT_PAGE:v,ID_TOTAL_COUNT:m},{xclass:"pagingbar",priority:2});n.exports=y}),define("bui/toolbar/numberpagingbar",["jquery","bui/common"],function(e,t,n){var i=(e("jquery"),e("bui/common")),r=(i.Component,e("bui/toolbar/pagingbar")),a=i.prefix,o=a+"button-number",s=r.extend({_getItems:function(){var e=this,t=e.get("items");return t?t:(t=[],t.push(e._getButtonItem(r.ID_PREV)),t.push(e._getButtonItem(r.ID_NEXT)),t)},_getButtonItem:function(e){var t=this;return{id:e,content:'<a href="javascript:;">'+t.get(e+"Text")+"</a>",disabled:!0}},_bindButtonEvent:function(){var e=this,t=e.get("numberButtonCls");s.superclass._bindButtonEvent.call(this),e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("click",function(n){var i=n.target;if(i&&i.get("el").hasClass(t)){var r=i.get("id");e.jumpToPage(r)}})},_setNumberPages:function(){var e=this;e._setNumberButtons()},_setNumberButtons:function(){var e,t=this,n=t.get("curPage"),r=t.get("totalPage"),a=t._getNumberItems(n,r);t._clearNumberButtons(),i.each(a,function(e){t._appendNumberButton(e)}),e=t.getItem(n),e&&e.set("selected",!0)},_appendNumberButton:function(e){{var t=this,n=t.getItemCount();t.addItemAt(e,n-1)}},_clearNumberButtons:function(){for(var e=this,t=(e.getItems(),e.getItemCount());t>2;)e.removeItemAt(t-2),t=e.getItemCount()},_getNumberItems:function(e,t){function n(e,t){for(var n=e;t>=n;n++)o.push(a._getNumberItem(n))}function i(){o.push(a._getEllipsisItem())}var r,a=this,o=[],s=a.get("maxLimitCount"),l=a.get("showRangeCount");if(s>t)r=t,n(1,t);else{var u=s>=e?1:e-l,c=e+l,d=t>c?c>s?c:s:t;u>1&&(n(1,1),u>2&&i()),r=d,n(u,d)}return t>r&&(t-1>r&&i(),n(t,t)),o},_getEllipsisItem:function(){var e=this;return{disabled:!0,content:e.get("ellipsisTpl")}},_getNumberItem:function(e){var t=this;return{id:e,elCls:t.get("numberButtonCls")}}},{ATTRS:{itemStatusCls:{value:{selected:"active",disabled:"disabled"}},itemTpl:{value:'<a href="">{id}</a>'},prevText:{value:"<<"},nextText:{value:">>"},maxLimitCount:{value:4},showRangeCount:{value:1},numberButtonCls:{value:o},ellipsisTpl:{value:'<a href="#">...</a>'}}},{xclass:"pagingbar-number",priority:3});n.exports=s}),define("bui/calendar",["bui/common","jquery","bui/picker","bui/overlay","bui/list","bui/data","bui/toolbar"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Calendar");i.mix(r,{Calendar:e("bui/calendar/calendar"),MonthPicker:e("bui/calendar/monthpicker"),DatePicker:e("bui/calendar/datepicker")}),n.exports=r}),define("bui/calendar/calendar",["bui/common","jquery","bui/picker","bui/overlay","bui/list","bui/data","bui/toolbar"],function(e,t,n){function i(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function r(e){return 10>e?"0"+e:e.toString()}function a(e){for(var t=[],n=0;e>n;n++)t.push({text:r(n),value:r(n)});return t}function o(e,t,n){var i=e.get("el").find("."+t);s.isNumber(n)&&(n=r(n)),i.val(n)}var s=e("bui/common"),l=s.prefix,u="x-datepicker-time",c="x-datepicker-hour",d="x-datepicker-minute",f="x-datepicker-second",g="x-timepicker",h=e("bui/picker").ListPicker,v=e("bui/calendar/monthpicker"),m=e("bui/calendar/header"),p=e("bui/calendar/panel"),b=e("bui/toolbar"),y=s.Component,x=s.Date,C=y.Controller.extend({initializer:function(){var e=this,t=e.get("children"),n=new m,i=new p,r=e.get("footer")||e._createFooter();t.push(n),t.push(i),t.push(r),e.set("header",n),e.set("panel",i),e.set("footer",r)},renderUI:function(){var e=this,t=e.get("children");if(e.get("showTime")){var n=e.get("timepicker")||e._initTimePicker();t.push(n),e.set("timepicker",n)}},bindUI:function(){var e=this,t=e.get("header"),n=e.get("panel");n.on("selectedchange",function(t){var n=t.date;x.isDateEquals(n,e.get("selectedDate"))||e.set("selectedDate",n)}),e.get("showTime")?e._initTimePickerEvent():n.on("click",function(){e.fire("accept")}),t.on("monthchange",function(t){e._setYearMonth(t.year,t.month)}),t.on("headerclick",function(){var n=e.get("monthpicker")||e._createMonthPicker();n.set("year",t.get("year")),n.set("month",t.get("month")),n.show()})},_initTimePicker:function(){var e=this,t=e.get("lockTime"),n={hour:c,minute:d,second:f};if(t)for(var i in t){var r=n[i.toLowerCase()];e.set(i,t[i]),t.editable||e.get("el").find("."+r).attr("disabled","")}var a=new h({elCls:g,children:[{itemTpl:'<li><a href="#">{text}</a></li>'}],autoAlign:!1,align:{node:e.get("el").find(".bui-calendar-footer"),points:["tl","bl"],offset:[-1,1]},trigger:e.get("el").find("."+u)});return a.render(),e._initTimePickerEvent(a),a},_initTimePickerEvent:function(e){var t=this,e=t.get("timepicker");e&&(e.get("el").delegate("a","click",function(e){e.preventDefault()}),e.on("triggerchange",function(t){var n=t.curTrigger;n.hasClass(c)?e.get("list").set("items",a(24)):e.get("list").set("items",a(60))}),e.on("selectedchange",function(e){var n=e.curTrigger,i=e.value;n.hasClass(c)?t.setInternal("hour",i):n.hasClass(d)?t.setInternal("minute",i):t.setInternal("second",i)}))},_setYearMonth:function(e,t){var n=this,i=n.get("selectedDate"),r=i.getDate();if(e!==i.getFullYear()||t!==i.getMonth()){var a=new Date(e,t,r);a.getMonth()!=t&&(a=x.addDay(-1,new Date(e,t+1))),n.set("selectedDate",a)}},_createMonthPicker:function(){var e,t=this;return e=new v({render:t.get("el"),effect:{effect:"slide",duration:300},visibleMode:"display",success:function(){var e=this;t._setYearMonth(e.get("year"),e.get("month")),e.hide()},cancel:function(){this.hide()}}),t.set("monthpicker",e),t.get("children").push(e),e},_createFooter:function(){var e=this,t=this.get("showTime"),n=[];return t?(n.push({content:e.get("timeTpl")}),n.push({xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",listeners:{click:function(){e.fire("accept")}}})):(n.push({xclass:"bar-item-button",text:"\u4eca\u5929",btnCls:"button button-small",id:"todayBtn",listeners:{click:function(){var t=i();e.set("selectedDate",t),e.fire("accept")}}}),n.push({xclass:"bar-item-button",text:"\u6e05\u9664",btnCls:"button button-small",id:"clsBtn",listeners:{click:function(){e.fire("clear")}}})),new b.Bar({elCls:l+"calendar-footer",children:n})},_updateTodayBtnAble:function(){var e=this;if(!e.get("showTime")){var t=e.get("footer"),n=e.get("panel").get("view"),r=i(),a=t.getItem("todayBtn");n._isInRange(r)?a.enable():a.disable()}},_uiSetSelectedDate:function(e){var t=this,n=e.getFullYear(),i=e.getMonth();t.get("header").setMonth(n,i),t.get("panel").set("selected",e),t.fire("datechange",{date:e})},_uiSetHour:function(e){o(this,c,e)},_uiSetMinute:function(e){o(this,d,e)},_uiSetSecond:function(e){o(this,f,e)},_uiSetMaxDate:function(e){var t=this;t.get("panel").set("maxDate",e),t._updateTodayBtnAble()},_uiSetMinDate:function(e){var t=this;t.get("panel").set("minDate",e),t._updateTodayBtnAble()}},{ATTRS:{header:{},panel:{},maxDate:{},minDate:{},monthPicker:{},timepicker:{},width:{value:180},events:{value:{click:!1,accept:!1,datechange:!1,monthchange:!1}},showTime:{value:!1},lockTime:{},timeTpl:{value:'<input type="text" readonly class="'+u+" "+c+'" />:<input type="text" readonly class="'+u+" "+d+'" />:<input type="text" readonly class="'+u+" "+f+'" />'},selectedDate:{value:i()},hour:{value:(new Date).getHours()},minute:{value:(new Date).getMinutes()},second:{value:0}}},{xclass:"calendar",priority:0});n.exports=C}),define("bui/calendar/monthpicker",["jquery","bui/common","bui/overlay","bui/list","bui/data","bui/toolbar"],function(e,t,n){function i(){return r.map(h,function(e,t){return{text:e,value:t}})}var r=e("jquery"),a=e("bui/common"),o=(a.Component,e("bui/overlay").Overlay),s=e("bui/list").SimpleList,l=e("bui/toolbar"),u=a.prefix,c="x-monthpicker-month",d="x-monthpicker-year",f="x-monthpicker-yearnav",g="x-monthpicker-item",h=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],v=s.extend({bindUI:function(){var e=this;e.get("el").delegate("a","click",function(e){e.preventDefault()}).delegate("."+c,"dblclick",function(){e.fire("monthdblclick")})}},{ATTRS:{itemTpl:{view:!0,value:'<li class="'+g+' x-monthpicker-month"><a href="#" hidefocus="on">{text}</a></li>'},itemCls:{value:g},items:{view:!0,value:i()},elCls:{view:!0,value:"x-monthpicker-months"}}},{xclass:"calendar-month-panel"}),m=s.extend({bindUI:function(){var e=this,t=e.get("el");t.delegate("a","click",function(e){e.preventDefault()}),t.delegate("."+d,"dblclick",function(){e.fire("yeardblclick")}),t.delegate(".x-icon","click",function(t){var n=r(t.currentTarget);n.hasClass(f+"-prev")?e._prevPage():n.hasClass(f+"-next")&&e._nextPage()}),e.on("itemselected",function(t){t.item&&e.setInternal("year",t.item.value)})},_prevPage:function(){var e=this,t=e.get("start"),n=e.get("yearCount");e.set("start",t-n)},_nextPage:function(){var e=this,t=e.get("start"),n=e.get("yearCount");e.set("start",t+n)},_uiSetStart:function(){var e=this;e._setYearsContent()},_uiSetYear:function(e){var t=this,n=t.findItemByField("value",e);n?t.setSelectedByField(e):t.set("start",e)},_setYearsContent:function(){for(var e=this,t=e.get("year"),n=e.get("start"),i=e.get("yearCount"),r=[],a=n;n+i>a;a++){var o=a.toString();r.push({text:o,value:a})}e.set("items",r),e.setSelectedByField(t)}},{ATTRS:{items:{view:!0,value:[]},elCls:{view:!0,value:"x-monthpicker-years"},itemCls:{value:g},year:{},start:{value:(new Date).getFullYear()},yearCount:{value:10},itemTpl:{view:!0,value:'<li class="'+g+" "+d+'"><a href="#" hidefocus="on">{text}</a></li>'},tpl:{view:!0,value:'<div class="'+f+'"><span class="'+f+'-prev x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-left"></span></span><span class="'+f+'-next x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-right"></span></span></div><ul></ul>'}}},{xclass:"calendar-year-panel"}),p=o.extend({initializer:function(){var e=this,t=e.get("children"),n=new v,i=new m,r=e._createFooter();t.push(n),t.push(i),t.push(r),e.set("yearPanel",i),e.set("monthPanel",n)},bindUI:function(){var e=this;e.get("monthPanel").on("itemselected",function(t){t.item&&e.setInternal("month",t.item.value)}).on("monthdblclick",function(){e._successCall()}),e.get("yearPanel").on("itemselected",function(t){t.item&&e.setInternal("year",t.item.value)}).on("yeardblclick",function(){e._successCall()})},_successCall:function(){var e=this,t=e.get("success");t&&t.call(e)},_createFooter:function(){var e=this;return new l.Bar({elCls:u+"clear x-monthpicker-footer",children:[{xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",handler:function(){e._successCall()}},{xclass:"bar-item-button",text:"\u53d6\u6d88",btnCls:"button button-small last",handler:function(){var t=e.get("cancel");t&&t.call(e)}}]})},_uiSetYear:function(e){this.get("yearPanel").set("year",e)},_uiSetMonth:function(e){this.get("monthPanel").setSelectedByField(e)}},{ATTRS:{footer:{},align:{value:{}},year:{},success:{value:function(){}},cancel:{value:function(){}},width:{value:180},month:{},yearPanel:{},monthPanel:{}}},{xclass:"monthpicker"});n.exports=p}),define("bui/calendar/header",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.prefix,o=r.Component,s="year-text",l="month-text",u="x-datepicker-arrow",c="x-datepicker-prev",d="x-datepicker-next",f=o.Controller.extend({bindUI:function(){var e=this,t=e.get("el");t.delegate("."+u,"click",function(t){t.preventDefault();var n=i(t.currentTarget);n.hasClass(d)?e.nextMonth():n.hasClass(c)&&e.prevMonth()}),t.delegate(".x-datepicker-month","click",function(){e.fire("headerclick")})},setMonth:function(e,t){var n=this,i=n.get("year"),r=n.get("month");(e!==i||t!==r)&&(n.set("year",e),n.set("month",t),n.fire("monthchange",{year:e,month:t}))},nextMonth:function(){var e=this,t=new Date(e.get("year"),e.get("month")+1);e.setMonth(t.getFullYear(),t.getMonth())},prevMonth:function(){var e=this,t=new Date(e.get("year"),e.get("month")-1);e.setMonth(t.getFullYear(),t.getMonth())},_uiSetYear:function(e){var t=this;t.get("el").find("."+s).text(e)},_uiSetMonth:function(e){var t=this;t.get("el").find("."+l).text(e+1)}},{ATTRS:{year:{sync:!1},month:{sync:!1,setter:function(e){this.set("monthText",e+1)}},monthText:{},tpl:{view:!0,value:'<div class="'+u+" "+c+'"><span class="icon icon-white icon-caret  icon-caret-left"></span></div><div class="x-datepicker-month"><div class="month-text-container"><span><span class="year-text">{year}</span>\u5e74 <span class="month-text">{monthText}</span>\u6708</span><span class="'+a+"caret "+a+'caret-down"></span></div></div><div class="'+u+" "+d+'"><span class="icon icon-white icon-caret  icon-caret-right"></span></div>'},elCls:{view:!0,value:"x-datepicker-header"},events:{value:{monthchange:!0}}}},{xclass:"calendar-header"});n.exports=f}),define("bui/calendar/panel",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.Component,o=r.Date,s="x-datepicker-date",l="x-datepicker-today",u="x-datepicker-disabled",c="isoDate",d="x-datepicker-selected",f=6,g={deactive:"prevday",active:"active",disabled:"disabled"},h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=a.View.extend({renderUI:function(){this.updatePanel()
},updatePanel:function(){var e=this,t=e.get("el"),n=t.find("tbody"),r=e._getPanelInnerTpl();n.empty(),i(r).appendTo(n)},_getPanelInnerTpl:function(){for(var e=this,t=e._getFirstDate(),n=[],i=0;f>i;i++){var r=o.addWeek(i,t);n.push(e._getWeekTpl(r))}return n.join("")},_getWeekTpl:function(e){for(var t=this,n=t.get("weekTpl"),i=[],a=0;a<h.length;a++){var s=o.addDay(a,e);i.push(t._getDayTpl(s))}return r.substitute(n,{daysTpl:i.join("")})},_getDayTpl:function(e){var t=this,n=t.get("dayTpl"),i=e.getDay(),a=t._isToday(e)?l:"",s=h[i],u=e.getDate(),d=t._isInRange(e)?t._isCurrentMonth(e)?g.active:g.deactive:g.disabled;return r.substitute(n,{dayOfWeek:s,dateType:d,dateNumber:u,todayCls:a,date:o.format(e,c)})},_getFirstDate:function(e,t){var n=this,i=n._getMonthFirstDate(e,t),r=i.getDay();return o.addDay(-1*r,i)},_getMonthFirstDate:function(e,t){var n=this,e=e||n.get("year"),t=t||n.get("month");return new Date(e,t)},_isCurrentMonth:function(e){return e.getMonth()===this.get("month")},_isToday:function(e){var t=new Date;return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()},_isInRange:function(e){var t=this,n=t.get("maxDate"),i=t.get("minDate");return i&&i>e?!1:n&&e>n?!1:!0},_clearSelectedDate:function(){var e=this;e.get("el").find("."+d).removeClass(d)},_findDateElement:function(e){var t=this,n=o.format(e,c),r=t.get("el").find("."+s),a=null;return n&&r.each(function(e,t){return i(t).attr("title")===n?(a=i(t),!1):void 0}),a},_setSelectedDate:function(e){var t=this,n=t._findDateElement(e);t._clearSelectedDate(),n&&n.addClass(d)}},{ATTRS:{}}),m=a.Controller.extend({initializer:function(){var e=this,t=new Date;e.get("year")||e.set("year",t.getFullYear()),e.get("month")||e.set("month",t.getMonth())},bindUI:function(){var e=this,t=e.get("el");t.delegate("."+s,"click",function(e){e.preventDefault()}),t.delegate("."+u,"mouseup",function(e){e.stopPropagation()})},performActionInternal:function(e){var t=this,n=i(e.target).closest("."+s);if(n){var r=n.attr("title");r&&(r=o.parse(r),t.get("view")._isInRange(r)&&t.set("selected",r))}},setMonth:function(e,t){var n=this,i=n.get("year"),r=n.get("month");(e!==i||t!==r)&&(n.set("year",e),n.set("month",t),n.get("view").updatePanel())},_uiSetSelected:function(e,t){var n=this;t&&t.prevVal&&o.isDateEquals(e,t.prevVal)||(n.setMonth(e.getFullYear(),e.getMonth()),n.get("view")._setSelectedDate(e),n.fire("selectedchange",{date:e}))},_uiSetMaxDate:function(e){e&&this.get("view").updatePanel()},_uiSetMinDate:function(e){e&&this.get("view").updatePanel()}},{ATTRS:{year:{view:!0},month:{view:!0},selected:{},focusable:{value:!0},dayTpl:{view:!0,value:'<td class="x-datepicker-date x-datepicker-{dateType} {todayCls} day-{dayOfWeek}" title="{date}"><a href="#" hidefocus="on" tabindex="1"><em><span>{dateNumber}</span></em></a></td>'},events:{value:{click:!1,selectedchange:!0}},maxDate:{view:!0,setter:function(e){return e?r.isString(e)?o.parse(e):e:void 0}},minDate:{view:!0,setter:function(e){return e?r.isString(e)?o.parse(e):e:void 0}},weekTpl:{view:!0,value:"<tr>{daysTpl}</tr>"},tpl:{view:!0,value:'<table class="x-datepicker-inner" cellspacing="0"><thead><tr><th  title="Sunday"><span>\u65e5</span></th><th  title="Monday"><span>\u4e00</span></th><th  title="Tuesday"><span>\u4e8c</span></th><th  title="Wednesday"><span>\u4e09</span></th><th  title="Thursday"><span>\u56db</span></th><th  title="Friday"><span>\u4e94</span></th><th  title="Saturday"><span>\u516d</span></th></tr></thead><tbody class="x-datepicker-body"></tbody></table>'},xview:{value:v}}},{xclass:"calendar-panel",priority:0});n.exports=m}),define("bui/calendar/datepicker",["bui/common","jquery","bui/picker","bui/overlay","bui/list","bui/data","bui/toolbar"],function(e,t,n){var i=e("bui/common"),r=e("bui/picker").Picker,a=e("bui/calendar/calendar"),o=i.Date,s=r.extend({initializer:function(){},createControl:function(){var e=this,t=e.get("children"),n=new a({render:e.get("el"),showTime:e.get("showTime"),lockTime:e.get("lockTime"),minDate:e.get("minDate"),maxDate:e.get("maxDate"),autoRender:!0});return n.on("clear",function(){var t=e.get("curTrigger"),n=t.val();n&&(t.val(""),t.trigger("change"))}),e.get("dateMask")||(e.get("showTime")?e.set("dateMask","yyyy-mm-dd HH:MM:ss"):e.set("dateMask","yyyy-mm-dd")),t.push(n),e.set("calendar",n),n},setSelectedValue:function(e){if(this.get("calendar")){var t=this,n=this.get("calendar"),i=o.parse(e,t.get("dateMask"));if(i=i||t.get("selectedDate"),n.set("selectedDate",o.getDate(i)),t.get("showTime")){var r=this.get("lockTime"),a=i.getHours(),s=i.getMinutes(),l=i.getSeconds();r&&(e&&r.editable||(a=null!=r.hour?r.hour:a,s=null!=r.minute?r.minute:s,l=null!=r.second?r.second:l)),n.set("hour",a),n.set("minute",s),n.set("second",l)}}},getSelectedValue:function(){if(!this.get("calendar"))return null;var e=this,t=e.get("calendar"),n=o.getDate(t.get("selectedDate"));return e.get("showTime")&&(n=o.addHour(t.get("hour"),n),n=o.addMinute(t.get("minute"),n),n=o.addSecond(t.get("second"),n)),n},getSelectedText:function(){return this.get("calendar")?o.format(this.getSelectedValue(),this._getFormatType()):""},_getFormatType:function(){return this.get("dateMask")},_uiSetMaxDate:function(e){if(!this.get("calendar"))return null;var t=this;t.get("calendar").set("maxDate",e)},_uiSetMinDate:function(e){if(!this.get("calendar"))return null;var t=this;t.get("calendar").set("minDate",e)}},{ATTRS:{showTime:{value:!1},lockTime:{},maxDate:{},minDate:{},dateMask:{},changeEvent:{value:"accept"},hideEvent:{value:"accept clear"},calendar:{},selectedDate:{value:new Date((new Date).setSeconds(0))}}},{xclass:"datepicker",priority:0});n.exports=s}),define("bui/select",["bui/common","jquery","bui/picker","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Select");i.mix(r,{Select:e("bui/select/select"),Combox:e("bui/select/combox"),Suggest:e("bui/select/suggest")}),n.exports=r}),define("bui/select/select",["jquery","bui/common","bui/picker","bui/overlay","bui/list","bui/data"],function(e,t,n){"use strict";function i(e){if(r.isPlainObject(e)){var t=[];return a.each(e,function(e,n){t.push({value:n,text:e})}),t}var n=[];return a.each(e,function(e){n.push(a.isString(e)?{value:e,text:e}:e)}),n}var r=e("jquery"),a=e("bui/common"),o=e("bui/picker").ListPicker,s=a.prefix,l=a.Component,u=o,c=s+"select-input",d=l.Controller.extend({initializer:function(){var e,t,n=this,r=n.get("multipleSelect"),o=n.get("picker");o?n.get("valueField")&&o.set("valueField",n.get("valueField")):(e=r?"listbox":"simple-list",t=n.get("list")||{},t=a.mix(t,{xclass:e,elCls:s+"select-list",store:n.get("store"),items:i(n.get("items"))}),o=new u({children:[t],valueField:n.get("valueField")}),n.set("picker",o)),r&&o.set("hideEvent","")},renderUI:function(){var e=this,t=e.get("picker"),n=e._getTextEl();t.set("trigger",e.getTrigger()),t.set("triggerEvent",e.get("triggerEvent")),t.set("autoSetValue",e.get("autoSetValue")),t.set("textField",n),t.render(),e.set("list",t.get("list"))},bindUI:function(){{var e=this,t=e.get("picker"),n=t.get("list");n.get("store")}t.on("selectedchange",function(t){t.item&&e.fire("change",{text:t.text,value:t.value,item:t.item})}),e.get("autoSetValue")&&n.on("itemsshow",function(){e._syncValue()}),t.on("show",function(){e.get("forceFit")&&t.set("width",e.get("el").outerWidth())})},containsElement:function(e){var t=this,n=t.get("picker");return l.Controller.prototype.containsElement.call(this,e)||n.containsElement(e)},getTrigger:function(){return this.get("el")},_uiSetItems:function(e){if(e){var t=this,n=t.get("picker"),r=n.get("list");r.set("items",i(e)),t._syncValue()}},_syncValue:function(){var e=this,t=e.get("picker"),n=e.get("valueField");n&&t.setSelectedValue(r(n).val())},_uiSetName:function(e){var t=this,n=t._getTextEl();e&&n.attr("name",e)},_uiSetWidth:function(e){var t=this;if(null!=e){if(t.get("inputForceFit")){var n=t._getTextEl(),i=t.get("el").find(".x-icon"),r=n.outerWidth()-n.width(),a=e-i.outerWidth()-r;n.width(a)}if(t.get("forceFit")){var o=t.get("picker");o.set("width",e)}}},_uiSetDisabled:function(e){var t=this,n=t.get("picker"),i=t._getTextEl();n.set("disabled",e),i&&i.attr("disabled",e)},_getTextEl:function(){var e=this,t=e.get("el");return t.is("input")?t:t.find("input")},destructor:function(){var e=this,t=e.get("picker");t&&t.destroy()},_getList:function(){var e=this,t=e.get("picker"),n=t.get("list");return n},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(e){var t=this,n=t.get("picker");n.setSelectedValue(e)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},list:{},valueField:{},store:{},focusable:{value:!0},autoSetValue:{value:!0},multipleSelect:{value:!1},inputForceFit:{value:!0},name:{},items:{sync:!1},inputCls:{value:c},forceFit:{value:!0},events:{value:{change:!1}},tpl:{view:!0,value:'<input type="text" readonly="readonly" class="'+c+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});n.exports=d}),define("bui/select/combox",["jquery","bui/common","bui/picker","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=e("bui/select/select"),o=e("bui/select/tag"),s=r.prefix+"combox-input",l=a.extend([o],{renderUI:function(){var e=this,t=e.get("picker");t.set("autoFocused",!1)},_uiSetItems:function(e){for(var t=this,n=0;n<e.length;n++){var i=e[n];r.isString(i)&&(e[n]={value:i,text:i})}l.superclass._uiSetItems.call(t,e)},bindUI:function(){var e=this,t=e.get("picker"),n=t.get("list"),r=t.get("textField");i(r).on("keyup",function(){var e=n.getSelected();e&&n.clearItemStatus(e)}),t.on("show",function(){n.clearSelected()})},_uiSetValueField:function(){},getTrigger:function(){return this._getTextEl()}},{ATTRS:{tpl:{view:!0,value:'<input type="text" class="'+s+'"/>'},inputCls:{value:s},autoSetValue:{value:!1}}},{xclass:"combox"});n.exports=l}),define("bui/select/tag",["jquery","bui/common","bui/list","bui/data"],function(e,t,n){function i(e){var t="";return 0==e.length?"":(t=e.replace(/>/g,"&gt;"),t=t.replace(/</g,"&lt;"))}var r=e("jquery"),a=e("bui/common"),o=e("bui/list"),s=a.KeyCode,l="warn",u=function(){};u.ATTRS={showTag:{value:!1},tagItemTpl:{value:"<li>{text}<button>\xd7</button></li>"},tagList:{value:null},limit:{value:null},forbitInput:{value:!1},tagPlaceholder:{value:"\u8f93\u5165\u6807\u7b7e"},tagFormatter:{value:null},separator:{value:";"}},a.augment(u,{__renderUI:function(){var e=this,t=e.get("showTag"),n=e.get("tagPlaceholder"),i=e.getTagInput();t&&!i.attr("placeholder")&&(i.attr("placeholder",n),e.set("inputForceFit",!1))},__bindUI:function(){function e(){var e=t.get("tagList"),n=e.getLastItem();n&&e.hasStatus(n,l)&&e.setItemStatus(n,l,!1);var r=i.val();r&&t._addTag(r)}var t=this,n=t.get("showTag"),i=t.getTagInput();if(n){i.on("keydown",function(e){if(!i.val()){var n=t.get("tagList"),r=n.getLastItem(),a=t.get("picker");e.which==s.DELETE||e.which==s.BACKSPACE?(n.hasStatus(r,l)?t._delTag(r):n.setItemStatus(r,l,!0),a.hide()):n.setItemStatus(r,l,!1)}});var r;t.get("forbitInput")||i.on("change",function(){r=setTimeout(function(){e(),r=null},50)}),t.on("change",function(){setTimeout(function(){r&&clearTimeout(r),e()})})}},__syncUI:function(){var e=this,t=e.get("showTag"),n=e.get("valueField");t&&n&&e._setTags(r(n).val())},_setTags:function(e){var t=this,n=t.get("tagList"),i=t.get("separator"),r=t.get("tagFormatter"),o=e.split(i);n||(n=t._initTagList()),e&&a.each(o,function(e){var t=e;r&&(t=r(t)),n.addItem({value:e,text:t})})},_addTag:function(e){e=i(e);var t=this,n=t.get("tagList"),r=t.getTagInput(),a=t.get("limit"),o=t.get("tagFormatter"),s=n.getItem(e);if(!(a&&n.getItemCount()>=a)){if(s)t._blurItem(n,s);else{var l=e;o&&(l=o(l)),n.addItem({value:e,text:l}),t._synTagsValue()}r.val("")}},_blurItem:function(e,t){e.setItemStatus(t,"active",!0),setTimeout(function(){e.setItemStatus(t,"active",!1)},400)},_delTag:function(e){var t=this,n=t.get("tagList");n.removeItem(e),t._synTagsValue()},getTagsValue:function(){var e=this,t=e.get("tagList"),n=t.getItems(),i=[];return a.each(n,function(e){i.push(e.value)}),i.join(e.get("separator"))},_initTagList:function(){var e=this,t=e.getTagInput(),n=new o.SimpleList({elBefore:t,itemTpl:e.get("tagItemTpl"),idField:"value"});return n.render(),e._initTagEvent(n),e.set("tagList",n),n},_initTagEvent:function(e){var t=this;e.on("itemclick",function(e){var n=r(e.domTarget);n.is("button")&&t._delTag(e.item)})},getTagInput:function(){var e=this,t=e.get("el");return t.is("input")?t:t.find("input")},_synTagsValue:function(){var e=this,t=e.get("valueField");t&&r(t).val(e.getTagsValue())}}),n.exports=u}),define("bui/select/suggest",["jquery","bui/common","bui/picker","bui/overlay","bui/list","bui/data"],function(e,t,n){"use strict";var i=e("jquery"),r=e("bui/common"),a=e("bui/select/combox"),o=200,s="",l=a.extend({bindUI:function(){var e=this,t=e.get("el").find("input"),n="keyup"===e.get("triggerEvent")?"keyup":"keyup click";t.on(n,function(){e._start()})},_start:function(){var e=this;e._timer=e.later(function(){e._updateContent()},o)},_updateContent:function(){var e,t=this,n=t.get("data"),i=t.get("el").find("input");if((n||i.val()!==t.get("query"))&&(t.set("query",i.val()),e=i.val(),n||e)){var r=t.get("cacheable"),a=t.get("store"),o=t.get("url"),s=t.get("data");if(r&&(o||a)){var l=t.get("dataCache");void 0!==l[e]?t._handleResponse(l[e]):t._requestData()}else o||a?t._requestData():s&&t._handleResponse(s,!0)}},_getStore:function(){var e=this,t=e.get("picker"),n=t.get("list");return n?n.get("store"):void 0},_requestData:function(){var e=this,t=e.get("el").find("input"),n=e.get("callback"),r=e.get("store"),a={};a[t.attr("name")]=t.val(),r?(a.start=0,r.load(a,n)):i.ajax({url:e.get("url"),type:"post",dataType:e.get("dataType"),data:a,success:function(t){e._handleResponse(t),n&&n(t)}})},_handleResponse:function(e,t){var n=this,i=t?n._getFilterItems(e):e;n.set("items",i),n.get("cacheable")&&(n.get("dataCache")[n.get("query")]=i)},_getItemText:function(e){var t=this,n=t.get("picker"),i=n.get("list");return i?i.getItemText(e):""},_getFilterItems:function(e){function t(e,t){a.push(r.isString(t)?e:t)}var n=this,a=[],o=n.get("el").find("input"),s=o.val(),l=n.get("data");return e=e||[],r.each(e,function(e){var a=r.isString(e)?e:n._getItemText(e);l?-1!==a.indexOf(i.trim(s))&&t(a,e):t(a,e)}),a},later:function(e,t,n){t=t||0;var i=n?setInterval(e,t):setTimeout(e,t);return{id:i,interval:n,cancel:function(){this.interval?clearInterval(i):clearTimeout(i)}}}},{ATTRS:{data:{value:null},query:{value:s},cacheable:{value:!1},dataCache:{shared:!1,value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){return this.get("data")?"click":"keyup"}},autoSetValue:{value:!1}}},{xclass:"suggest"});n.exports=l}),define("bui/form",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Form"),a=e("bui/form/tips");i.mix(r,{Tips:a,TipItem:a.Item,FieldContainer:e("bui/form/fieldcontainer"),Form:e("bui/form/form"),Row:e("bui/form/row"),Group:e("bui/form/fieldgroup"),HForm:e("bui/form/hform"),Rules:e("bui/form/rules"),Field:e("bui/form/field"),FieldGroup:e("bui/form/fieldgroup")}),n.exports=r}),define("bui/form/tips",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.prefix,o=e("bui/overlay").Overlay,s="data-tip",l=a+"form-tip-container",u=o.extend({initializer:function(){var e=this,t=e.get("render");if(!t){var n=i(e.get("trigger")).parent();e.set("render",n)}},renderUI:function(){var e=this;e.resetVisible()},resetVisible:function(){var e=this,t=i(e.get("trigger"));t.val()?e.set("visible",!1):(e.set("align",{node:i(e.get("trigger")),points:["cl","cl"]}),e.set("visible",!0))},bindUI:function(){var e=this,t=i(e.get("trigger"));e.get("el").on("click",function(){e.hide(),t.focus()}),t.on("click focus",function(){e.hide()}),t.on("blur",function(){e.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"}),c=function(e){return this.constructor!==c?new c(e):(c.superclass.constructor.call(this,e),void this._init())};c.ATTRS={form:{},items:{valueFn:function(){return[]}}},r.extend(c,r.Base),r.augment(c,{_init:function(){var e=this,t=i(e.get("form"));t.length&&(r.each(i.makeArray(t[0].elements),function(t){var n=i(t).attr(s);n&&e._initFormElement(t,i.parseJSON(n))}),t.addClass(l))},_initFormElement:function(e,t){t&&(t.trigger=e);var n=this,i=n.get("items"),r=new u(t);i.push(r)},getItem:function(e){var t=this,n=t.get("items"),a=null;return r.each(n,function(t){return i(t.get("trigger")).attr("name")===e?(a=t,!1):void 0}),a},resetVisible:function(){var e=this,t=e.get("items");r.each(t,function(e){e.resetVisible()})},render:function(){var e=this,t=e.get("items");r.each(t,function(e){e.render()})},destroy:function(){var e=this,t=e.get(t);r.each(t,function(e){e.destroy()})}}),c.Item=u,n.exports=c}),define("bui/form/fieldcontainer",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(e,t,n){function i(e){return e.is(g)}function r(e,t){if(e!=t){if(i(e))return[e];var n=e.attr("class");if(n&&(-1!==n.indexOf(f)||-1!==n.indexOf(d)))return[e]}var s=[],l=e.children();return o.each(l,function(e){s=s.concat(r(a(e),t))}),s}var a=e("jquery"),o=e("bui/common"),s=e("bui/form/field"),l=e("bui/form/groupvalid"),u=o.prefix,c="form-field",d=u+c,f=u+"form-group",g="input,select,textarea",h=o.Component.View.extend([l.View]),v=o.Component.Controller.extend([l],{syncUI:function(){var e=this,t=e.getFields(),n=e.get("validators");o.each(t,function(e){var t=e.get("name");n[t]&&e.set("validator",n[t])}),o.each(n,function(t,n){if(0==n.indexOf("#")){var i=n.replace("#",""),r=e.getChild(i,!0);r&&r.set("validator",t)}})},getDecorateElments:function(){var e=this,t=e.get("el"),n=r(t,t);return n},findXClassByNode:function(e,t){return"checkbox"===e.attr("type")?c+"-checkbox":"radio"===e.attr("type")?c+"-radio":"number"===e.attr("type")?c+"-number":e.hasClass("calendar")?c+"-date":"SELECT"==e[0].tagName?c+"-select":i(e)?c:o.Component.Controller.prototype.findXClassByNode.call(this,e,t)},getRecord:function(){var e=this,t={},n=e.getFields();return o.each(n,function(n){var i=n.get("name"),r=e._getFieldValue(n);if(t[i]){if(o.isArray(t[i])&&null!=r)t[i].push(r);else if(null!=r){var a=[t[i]];a.push(r),t[i]=a}}else t[i]=r}),t},getFields:function(e){var t=this,n=[],i=t.get("children");return o.each(i,function(t){t instanceof s?e&&t.get("name")!=e||n.push(t):t.getFields&&(n=n.concat(t.getFields(e)))}),n},getField:function(e){var t=this,n=t.getFields(),i=null;return o.each(n,function(t){return t.get("name")===e?(i=t,!1):void 0}),i},getFieldAt:function(e){return this.getFields()[e]},setFieldValue:function(e,t){var n=this,i=n.getFields(e);o.each(i,function(e){n._setFieldValue(e,t)})},_setFieldValue:function(e,t){if(!e.get("disabled"))if(e instanceof s.Check){var n=e.get("value");t&&(n===t||o.isArray(t)&&o.Array.contains(n,t))?e.set("checked",!0):e.set("checked",!1)}else null==t&&(t=""),e.clearErrors(!0),e.set("value",t)},getFieldValue:function(e){var t=this,n=t.getFields(e),i=[];return o.each(n,function(e){var n=t._getFieldValue(e);n&&i.push(n)}),0===i.length?null:1===i.length?i[0]:i},_getFieldValue:function(e){return e instanceof s.Check&&!e.get("checked")?null:e.get("value")},clearFields:function(){this.clearErrors(!0),this.setRecord({})},setRecord:function(e){var t=this,n=t.getFields();o.each(n,function(n){var i=n.get("name");t._setFieldValue(n,e[i])})},updateRecord:function(e){var t=this,n=t.getFields();o.each(n,function(n){var i=n.get("name");e.hasOwnProperty(i)&&t._setFieldValue(n,e[i])})},focus:function(){var e=this,t=e.getFields(),n=t[0];n&&n.focus()},_uiSetDisabled:function(e){var t=this,n=t.get("children");o.each(n,function(t){t.set("disabled",e)})}},{ATTRS:{record:{setter:function(e){this.setRecord(e)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:!1},isDecorateChild:{value:!0},xview:{value:h}}},{xclass:"form-field-container"});v.View=h,n.exports=v}),define("bui/form/field",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=e("bui/common"),r=e("bui/form/fields/base");i.mix(r,{Text:e("bui/form/fields/text"),Date:e("bui/form/fields/date"),Select:e("bui/form/fields/select"),Hidden:e("bui/form/fields/hidden"),Number:e("bui/form/fields/number"),Check:e("bui/form/fields/check"),Radio:e("bui/form/fields/radio"),Checkbox:e("bui/form/fields/checkbox"),Plain:e("bui/form/fields/plain"),List:e("bui/form/fields/list"),TextArea:e("bui/form/fields/textarea"),Uploader:e("bui/form/fields/uploader"),CheckList:e("bui/form/fields/checklist"),RadioList:e("bui/form/fields/radiolist")}),n.exports=r}),define("bui/form/fields/base",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.Component,o=e("bui/form/tips").Item,s=e("bui/form/valid"),l=e("bui/form/remote"),u=r.prefix+"form-field-error",c="bui-form-tip-container",d=a.View.extend([l.View,s.View],{renderUI:function(){var e=this,t=e.get("control");if(t)e.set("controlContainer",t.parent());else{var n=e.get("controlTpl"),r=e.getControlContainer();if(n){var t=i(n).appendTo(r);e.set("control",t)}}},clearErrors:function(){var e=this,t=e.get("msgEl");t&&(t.remove(),e.set("msgEl",null)),e.get("el").removeClass(u)},showError:function(e,t){var n=this,a=n.get("control"),o=r.substitute(t,{error:e}),s=i(o);s.appendTo(a.parent()),n.set("msgEl",s),n.get("el").addClass(u)},getControlContainer:function(){var e=this,t=e.get("el"),n=e.get("controlContainer");return n&&r.isString(n)&&(n=t.find(n)),n&&n.length?n:t},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(e){var t=this;t.get("control").attr("name",e)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}}),f=a.Controller.extend([l,s],{isField:!0,initializer:function(){var e=this;e.on("afterRenderUI",function(){var t=e.get("tip");if(t){var n=e.getTipTigger();n&&n.parent().addClass(c),t.trigger=n,t.autoRender=!0,t=new o(t),e.set("tip",t)}})},bindUI:function(){var e=this,t=e.get("validEvent"),n=e.get("changeEvent"),i=e.get("firstValidEvent"),r=e.getInnerControl();r.is("select")&&(t="change"),r.on(t,function(){var t=e.getControlValue(r);e.validControl(t)}),i&&r.on(i,function(){if(!e.get("hasValid")){var t=e.getControlValue(r);e.validControl(t)}}),e.on(n,function(){e.onValid()}),e.on("remotecomplete",function(t){e._setError(t.error)})},onValid:function(){var e=this,t=e.getControlValue();t=e.parseValue(t),e.isCurrentValue(t)||(e.setInternal("value",t),e.onChange())},onChange:function(){this.fire("change")},isCurrentValue:function(e){return e==this.get("value")},_clearError:function(){this.set("error",null),this.get("view").clearErrors()},_setError:function(e){this.set("error",e),this.showErrors()},getControlValue:function(e){var t=this;return e=e||t.getInnerControl(),e.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var e=this,t={};return t[e.get("name")]=e.getControlValue(),t},setControlValue:function(e){var t=this,n=t.getInnerControl();n.val(e)},parseValue:function(e){return e},valid:function(){var e=this;e.validControl()},validControl:function(e){var t,n=this;return e=e||n.getControlValue(),preError=n.get("error"),t=n.getValidError(e),n.setInternal("hasValid",!0),t?(n._setError(t),n.fire("error",{msg:t,value:e}),preError!==t&&n.fire("validchange",{valid:!1})):(n._clearError(),n.fire("valid"),preError&&n.fire("validchange",{valid:!0})),!t},focus:function(){this.getInnerControl().focus()},change:function(){var e=this.getInnerControl();e.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var e=this;return e.get("hasValid")||e.validControl(),!e.get("error")},getError:function(){return this.get("error")},getErrors:function(){var e=this.getError();return e?[e]:[]},clearErrors:function(e){var t=this;t._clearError(),e&&t.getControlValue()!=t.get("value")&&t.setControlValue(t.get("value"))},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var e=this,t=e.get("tip");t&&t.destroy&&t.destroy()},setInnerWidth:function(e){var t=this,n=t.getInnerControl(),a=n.siblings(),o=n.outerWidth()-n.width();r.each(a,function(e){o+=i(e).outerWidth()}),n.width(e-o)},_resetTip:function(){var e=this,t=e.get("tip");t&&t.resetVisible()},resetTip:function(){this._resetTip()},_uiSetValue:function(e){var t=this;t.setControlValue(e),t.get("rendered")&&(t.validControl(),t.onChange()),t._resetTip()},_uiSetDisabled:function(e){var t=this,n=t.getInnerControl(),i=t.get("children");n.attr("disabled",e),t.get("rendered")&&(e&&t.clearErrors(),e||t.valid()),r.each(i,function(t){t.set("disabled",e)})},_uiSetWidth:function(e){var t=this;null!=e&&t.get("forceFit")&&t.setInnerWidth(e)}},{ATTRS:{hasValid:{value:!1},forceFit:{value:!1},tip:{},changeEvent:{value:"valid"},firstValidEvent:{value:"blur"},validEvent:{value:"keyup change"},name:{view:!0},showError:{view:!0,value:!0},value:{view:!0},label:{},controlContainer:{view:!0},control:{view:!0},controlTpl:{view:!0,value:'<input type="text"/>'},events:{value:{error:!1,valid:!1,change:!0,validchange:!0}},tpl:{value:"<label>{label}</label>"},xview:{value:d}},PARSER:{control:function(e){var t=e.find("input,select,textarea");return t.length?t:e},disabled:function(e){return!!e.attr("disabled")},value:function(e){var t=this,n="select,input,textarea",i=t.get("value");return i||(e.is(n)?(i=e.val(),!i&&e.is("select")&&(i=e.attr("value"))):i=e.find(n).val()),i},name:function(e){var t=this,n="select,input,textarea",i=t.get("name");return i||(i=e.is(n)?e.attr("name"):e.find(n).attr("name")),i}}},{xclass:"form-field"});f.View=d,n.exports=f}),define("bui/form/valid",["bui/common","jquery"],function(e,t,n){var i=e("bui/common"),r=e("bui/form/rules"),a=function(){};a.prototype={getErrorsContainer:function(){var e=this,t=e.get("errorContainer");return t?i.isString(t)?e.get("el").find(t):t:e.getContentElement()},showErrors:function(e){var t=this,n=t.getErrorsContainer(),r=t.get("errorTpl");return t.clearErrors(),t.get("showError")?t.get("showOneError")?void(e&&e.length&&t.showError(e[0],r,n)):void i.each(e,function(e){e&&t.showError(e,r,n)}):void 0},showError:function(){},clearErrors:function(){}};var o=function(){};o.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{shared:!1,value:{}},messages:{shared:!1,value:{}},validator:{},errorContainer:{view:!0},errorTpl:{view:!0,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:!0,value:!0},showOneError:{},error:{},pauseValid:{value:!1}},o.prototype={__bindUI:function(){var e=this;e.on("afterDisabledChange",function(t){var n=t.newVal;n?e.clearErrors(!1,!1):e.valid()})},isValid:function(){},valid:function(){},validControl:function(){},validRules:function(e,t){if(!e)return null;if(this.get("pauseValid"))return null;var n=this,i=n._getValidMessages(),a=null;for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];if(a=r.valid(o,t,s,i[o],n))break}return a},_getValidMessages:function(){var e=this,t=e.get("defaultMessages"),n=e.get("messages");return i.merge(t,n)},getValidError:function(e){var t=this,n=t.get("validator"),i=null;return i=t.validRules(t.get("defaultRules"),e)||t.validRules(t.get("rules"),e),i||this.get("pauseValid")||(t.parseValue&&(e=t.parseValue(e)),i=n?n.call(this,e):""),i},getErrors:function(){},showErrors:function(e){var t=this,e=e||t.getErrors();t.get("view").showErrors(e)},clearErrors:function(e,t){t=null==t?!0:t;var n=this,r=n.get("children");t&&i.each(r,function(n){n.clearErrors&&(n.field?n.clearErrors(e):n.clearErrors(e,t))}),n.set("error",null),n.get("view").clearErrors()},addRule:function(e,t,n){var i=this,r=i.get("rules"),a=i.get("messages");r[e]=t,n&&(a[e]=n)},addRules:function(e,t){var n=this;i.each(e,function(e,i){var r=t?t[i]:null;n.addRule(i,e,r)})},removeRule:function(e){var t=this,n=t.get("rules");delete n[e]},clearRules:function(){var e=this;e.set("rules",{})}},o.View=a,n.exports=o}),define("bui/form/rules",["jquery","bui/common"],function(e,t,n){function i(e){return parseFloat(e)}function r(e){return BUI.Date.parse(e)}function a(e,t,n){var i=e&&e.equals!==!1;return i?t>=n:t>n}function o(e){return""==e||null==e}function s(e,t,n,i){for(var r=i.getFields(),s=!0,l=1;l<r.length;l++){var u,c,d=r[l],f=r[l-1];if(d&&f&&(u=d.get("value"),c=f.get("value"),!o(u)&&!o(c)&&!a(t,u,c))){s=!1;break}}return s?null:n}function l(e){var t=e.getFieldAt(0);return t?t.get("name"):""}function u(e,t){if(BUI.isArray(t)||(t=[t]),!e||!t.length)return!1;var n=e?BUI.isArray(e)?e.length:1:0;if(1==t.length){var i=t[0];if(!i)return!0;if(i>n)return!1}else{var r=t[0],a=t[1];if(r>n||n>a)return!1}return!0}{var c=e("jquery"),d=e("bui/form/rule"),f={},g={add:function(e){var t;return c.isPlainObject(e)?(t=e.name,f[t]=new d(e)):e.get&&(t=e.get("name"),f[t]=e),f[t]},remove:function(e){delete f[e]},get:function(e){return f[e]},valid:function(e,t,n,i,r){var a=g.get(e);return a?a.valid(t,n,i,r):null},isValid:function(e,t,n,i){return null==g.valid(e,t,n,i)}};g.add({name:"required",msg:"\u4e0d\u80fd\u4e3a\u7a7a\uff01",validator:function(e,t,n){return t!==!1&&/^\s*$/.test(e)?n:void 0}}),g.add({name:"equalTo",msg:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",validator:function(e,t,n){var i=c(t);return i.length&&(t=i.val()),e===t?void 0:n}}),g.add({name:"min",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,t,n){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&i(e)<i(t)?n:void 0}}),g.add({name:"max",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,t,n){return BUI.isString(e)&&(e=e.replace(/\,/g,"")),""!==e&&i(e)>i(t)?n:void 0}}),g.add({name:"length",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e3a{0}\uff01",validator:function(e,t,n){return null!=e&&(e=c.trim(e.toString()),t!=e.length)?n:void 0}}),g.add({name:"minlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5c0f\u4e8e{0}\uff01",validator:function(e,t,n){if(null!=e){e=c.trim(e.toString());var i=e.length;if(t>i)return n}}}),g.add({name:"maxlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5927\u4e8e{0}\uff01",validator:function(e,t,n){if(e){e=c.trim(e.toString());var i=e.length;if(i>t)return n}}}),g.add({name:"regexp",msg:"\u8f93\u5165\u503c\u4e0d\u7b26\u5408{0}\uff01",validator:function(e,t,n){return t?t.test(e)?void 0:n:void 0}}),g.add({name:"email",msg:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff01",validator:function(e,t,n){return e=c.trim(e),e?/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?void 0:n:void 0}}),g.add({name:"date",msg:"\u4e0d\u662f\u6709\u6548\u7684\u65e5\u671f\uff01",validator:function(e,t,n){return BUI.isNumber(e)||BUI.isDate(e)?void 0:(e=c.trim(e),e?BUI.Date.isDateString(e)?void 0:n:void 0)}}),g.add({name:"minDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,t,n){if(e){var i=r(e);if(i&&i<r(t))return n}}}),g.add({name:"maxDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,t,n){if(e){var i=r(e);if(i&&i>r(t))return n}}}),g.add({name:"mobile",msg:"\u4e0d\u662f\u6709\u6548\u7684\u624b\u673a\u53f7\u7801\uff01",validator:function(e,t,n){return e=c.trim(e),e?/^\d{11}$/.test(e)?void 0:n:void 0}}),g.add({name:"number",msg:"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01",validator:function(e,t,n){return BUI.isNumber(e)?void 0:(e=e.replace(/\,/g,""),isNaN(e)?n:void 0)}}),g.add({name:"dateRange",msg:"\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u8d77\u59cb\u65e5\u671f\uff01",validator:s}),g.add({name:"numberRange",msg:"\u7ed3\u675f\u6570\u5b57\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u6570\u5b57\uff01",validator:s}),g.add({name:"checkRange",msg:"\u5fc5\u987b\u9009\u4e2d{0}\u9879\uff01",validator:function(e,t,n,i){var r,a=l(i),o=t;
return a&&o&&(r=e[a],!u(r,o))?n:null}})}n.exports=g}),define("bui/form/rule",["jquery","bui/common"],function(e,t,n){function i(e,t,n,i,r){s.isArray(n)&&s.isString(n[1])&&(n[1]&&(i=n[1]),n=n[0]);var o=e,l=o.get("validator"),u=a(e,n,i);return t=null==t?"":t,l.call(o,t,n,u,r)}function r(e){if(null==e)return{};if(o.isPlainObject(e))return e;var t=e,n={};if(s.isArray(e)){for(var i=0;i<t.length;i++)n[i]=t[i];return n}return{0:e}}function a(e,t,n){var i=r(t);return n=n||e.get("msg"),s.substitute(n,i)}var o=e("jquery"),s=e("bui/common"),l=function(e){l.superclass.constructor.call(this,e)};s.extend(l,s.Base),l.ATTRS={name:{},msg:{},validator:{value:function(){}}},s.augment(l,{valid:function(e,t,n,r){var a=this;return i(a,e,t,n,r)}}),n.exports=l}),define("bui/form/remote",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=function(){};a.ATTRS={isLoading:{},loadingEl:{}},a.prototype={getLoadingContainer:function(){},_setLoading:function(){var e=this,t=e.get("loadingEl"),n=e.get("loadingTpl");n&&!t&&(t=i(n).appendTo(e.getLoadingContainer()),e.setInternal("loadingEl",t))},_clearLoading:function(){var e=this,t=e.get("loadingEl");t&&(t.remove(),e.setInternal("loadingEl",null))},_uiSetIsLoading:function(e){var t=this;e?t._setLoading():t._clearLoading()}};var o=function(){};o.ATTRS={defaultRemote:{value:{method:"GET",cache:!0,callback:function(e){return e}}},remoteDaly:{value:500},cacheMap:{value:{}},loadingTpl:{view:!0,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:!0,value:!1},remote:{setter:function(e){return r.isString(e)&&(e={url:e}),e}},remoteHandler:{},events:{value:{remotecomplete:!1,remotestart:!1}}},o.prototype={__bindUI:function(){var e=this;e.on("valid",function(){if(e.get("remote")&&e.isValid()&&!e.get("pauseValid")){var t=e.getControlValue(),n=e.getRemoteParams();e._startRemote(n,t)}}),e.on("error",function(){e.get("remote")&&e._cancelRemote()})},_startRemote:function(e,t){function n(){i._remoteValid(e,r,t),i.set("isLoading",!0)}var i=this,r=i.get("remoteHandler"),a=i.get("cacheMap"),o=i.get("remoteDaly");return r&&i._cancelRemote(r),null!=a[t]?void i._validResult(i._getCallback(),a[t]):(r=setTimeout(n,o),void i.setInternal("remoteHandler",r))},_validResult:function(e,t){var n=this,i=e(t);n.onRemoteComplete(i,t)},onRemoteComplete:function(e,t,n){var i=this;n==i.get("remoteHandler")&&(i.fire("remotecomplete",{error:e,data:t}),i.set("isLoading",!1),i.setInternal("remoteHandler",null))},_getOptions:function(e){var t=this,n=t.get("remote"),i=t.get("defaultRemote"),a=r.merge(i,n,{data:e});return a},_getCallback:function(){return this._getOptions().callback},_remoteValid:function(e,t,n){var r=this,a=r.get("cacheMap"),o=r._getOptions(e);o.success=function(e){var i=o.callback,s=i(e);a[n]=e,r.onRemoteComplete(s,e,t)},o.error=function(e,n,i){r.onRemoteComplete(i,null,t)},r.fire("remotestart",{data:e}),i.ajax(o)},getRemoteParams:function(){},clearCache:function(){this.set("cacheMap",{})},_cancelRemote:function(e){var t=this;e=e||t.get("remoteHandler"),e&&(clearTimeout(e),t.setInternal("remoteHandler",null)),t.set("isLoading",!1)}},o.View=a,n.exports=o}),define("bui/form/fields/text",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/base"),r=i.extend({},{xclass:"form-field-text"});n.exports=r}),define("bui/form/fields/date",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=e("bui/form/fields/base"),o=r.Date,s=a.extend({renderUI:function(){var e=this,t=e.get("datePicker");i.isPlainObject(t)&&e.initDatePicker(t),(t.get&&t.get("showTime")||t.showTime)&&e.getInnerControl().addClass("calendar-time")},initDatePicker:function(t){var n=this;e.async("bui/calendar",function(e){t.trigger=n.getInnerControl(),t.autoRender=!0,t=new e.DatePicker(t),n.set("datePicker",t),n.set("isCreatePicker",!0),n.get("children").push(t)})},setControlValue:function(e){var t=this,n=t.getInnerControl();r.isDate(e)&&(e=o.format(e,t._getFormatMask())),n.val(e)},_getFormatMask:function(){var e=this,t=e.get("datePicker");return t.showTime||t.get&&t.get("showTime")?"yyyy-mm-dd HH:MM:ss":"yyyy-mm-dd"},parseValue:function(e){return r.isNumber(e)?new Date(e):o.parse(e)},isCurrentValue:function(e){return o.isEquals(e,this.get("value"))},_uiSetMax:function(e){this.addRule("max",e);var t=this,n=t.get("datePicker");n&&(n.set?n.set("maxDate",e):n.maxDate=e)},_uiSetMin:function(e){this.addRule("min",e);var t=this,n=t.get("datePicker");n&&(n.set?n.set("minDate",e):n.minDate=e)}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:!0}},max:{},min:{},value:{setter:function(e){return r.isNumber(e)?new Date(e):e}},datePicker:{shared:!1,value:{}},isCreatePicker:{value:!0}},PARSER:{datePicker:function(e){var t=this,n=t.get("datePicker")||{};return e.hasClass("calendar-time")&&r.mix(n,{showTime:!0}),n}}},{xclass:"form-field-date"});n.exports=s}),define("bui/form/fields/select",["jquery","bui/common","bui/overlay"],function(e,t,n){function i(e,t,n){e.children().remove();var i=n.get("emptyText");i&&n.get("showBlank")&&r("",i,e),o.each(t,function(t){r(t.value,t.text,e)})}function r(e,t,n){var i=new Option(t,e),r=n[0].options;r[r.length]=i}var a=e("jquery"),o=e("bui/common"),s=e("bui/form/fields/base"),l=s.extend({renderUI:function(){var e=this,t=e.getInnerControl(),n=e.get("select");e.get("srcNode")&&t.is("select")||a.isPlainObject(n)&&e._initSelect(n)},_initSelect:function(t){{var n=this;n.get("items")}e.async("bui/select",function(e){t.render=n.getControlContainer(),t.valueField=n.getInnerControl(),t.autoRender=!0,t=new e.Select(t),n.set("select",t),n.set("isCreate",!0),n.get("children").push(t),t.on("change",function(){var e=t.getSelectedValue();n.set("value",e)})})},setItems:function(e){var t=this,n=t.get("select");if(a.isPlainObject(e)){var r=[];o.each(e,function(e,t){r.push({value:t,text:e})}),e=r}var s=t.getInnerControl();s.is("select")&&(i(s,e,t),t.setControlValue(t.get("value")),t.getControlValue()||t.setInternal("value","")),n&&(n.set?n.set("items",e):n.items=e)},setControlValue:function(e){var t=this,n=t.get("select"),i=t.getInnerControl();i.val(e),n&&n.set&&n.getSelectedValue()!==e&&n.setSelectedValue(e)},getSelectedText:function(){var e=this,t=e.get("select"),n=e.getInnerControl();if(n.is("select")){var i=n[0],r=i.options[i.selectedIndex];return r?r.text:""}return t.getSelectedText()},getTipTigger:function(){var e=this,t=e.get("select");return t&&t.rendered?t.get("el").find("input"):e.get("el")},_uiSetItems:function(e){e&&this.setItems(e)},setInnerWidth:function(e){var t=this,n=t.getInnerControl(),i=t.get("select"),r=n.outerWidth()-n.width();n.width(e-r),i&&i.set&&i.set("width",e)}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:!0},emptyText:{value:"\u8bf7\u9009\u62e9"},select:{shared:!1,value:{}}},PARSER:{emptyText:function(e){if(!this.get("showBlank"))return"";var t=e.find("option"),n=this.get("emptyText");return t.length&&(n=a(t[0]).text()),n}}},{xclass:"form-field-select"});n.exports=l}),define("bui/form/fields/hidden",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/base"),r=i.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});n.exports=r}),define("bui/form/fields/number",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/base"),r=i.extend({parseValue:function(e){if(""==e||null==e)return null;if(BUI.isNumber(e))return e;var t=this,n=t.get("allowDecimals");return e=e.replace(/\,/g,""),n?parseFloat(parseFloat(e).toFixed(t.get("decimalPrecision"))):parseInt(e,10)},_uiSetMax:function(e){this.addRule("max",e)},_uiSetMin:function(e){this.addRule("min",e)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:!0,max:!0}},validEvent:{value:"keyup change"},defaultRules:{value:{number:!0}},allowDecimals:{value:!0},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});n.exports=r}),define("bui/form/fields/check",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=(e("jquery"),e("bui/form/fields/base")),r=i.extend({onValid:function(){var e=this,t=e._getControlChecked();e.setInternal("checked",t),e.fire("change"),e.fire(t?"checked":"unchecked")},_setControlChecked:function(e){var t=this,n=t.getInnerControl();n.attr("checked",!!e)},_getControlChecked:function(){var e=this,t=e.getInnerControl();return!!t.attr("checked")},_uiSetValue:function(e){this.setControlValue(e)},_uiSetWidth:function(){},_uiSetChecked:function(e){var t=this;t._setControlChecked(e),t.get("rendered")&&t.onValid()}},{ATTRS:{validEvent:{value:"click"},checked:{value:!1},events:{value:{checked:!1,unchecked:!1}}},PARSER:{checked:function(e){return!!e.attr("checked")}}},{xclass:"form-check-field"});n.exports=r}),define("bui/form/fields/radio",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/check"),r=i.extend({bindUI:function(){var e=this,t=e.get("parent"),n=e.get("name");t&&e.getInnerControl().on("click",function(){var i=t.getFields(n);BUI.each(i,function(t){t!=e&&t.set("checked",!1)})})}},{ATTRS:{controlTpl:{view:!0,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});n.exports=r}),define("bui/form/fields/checkbox",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/check"),r=i.extend({},{ATTRS:{controlTpl:{view:!0,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});n.exports=r}),define("bui/form/fields/plain",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("jquery"),r=e("bui/form/fields/base"),a=r.View.extend({_uiSetValue:function(e){var t,n=this,r=n.get("textEl"),a=n.getControlContainer(),o=n.get("renderer"),s=o?o(e):e,l=n.get("width"),u=0;r&&r.remove(),s=s||"&nbsp;",t=BUI.substitute(n.get("textTpl"),{text:s}),r=i(t).appendTo(a),u=r.outerWidth()-r.width(),r.width(l-u),n.set("textEl",r)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"}),o=r.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:!0,value:'<span class="x-form-text">{text}</span>'},renderer:{view:!0,value:function(e){return e}},tpl:{value:""},xview:{value:a}}},{xclass:"form-field-plain"});n.exports=o}),define("bui/form/fields/list",["jquery","bui/common","bui/list","bui/data","bui/overlay"],function(e,t,n){function i(e){var t=e;return r.isPlainObject(e)&&(t=[],a.each(e,function(e,n){t.push({text:e,value:n})})),t}var r=e("jquery"),a=e("bui/common"),o=e("bui/list"),s=e("bui/form/fields/base"),o=s.extend({initializer:function(){var e=this;e._initList()},_getList:function(){var e=this,t=e.get("children");return t[0]},bindUI:function(){var e=this,t=e._getList();t&&t.on("selectedchange",function(){var n=e._getListValue(t);e.set("value",n)})},_getListValue:function(e){var t=this;return e=e||t._getList(),e.getSelectionValues().join(",")},setControlValue:function(e){var t=this,n=t.getInnerControl(),i=t._getList();n.val(e),t._getListValue(i)!==e&&i.getCount()&&(i.get("multipleSelect")&&i.clearSelection(),i.setSelectionByField(e.split(",")))},syncUI:function(){this.set("list",this._getList())},_initList:function(){var e=this,t=e.get("defaultListCfg"),n=e.get("children"),i=e.get("list")||{};n[0]||(r.isPlainObject(i)&&a.mix(i,t),n.push(i))},setItems:function(e){var t=this,n=t.get("value"),r=t._getList();r.set("items",i(e)),r.setSelectionByField(n.split(","))},_uiSetItems:function(e){e&&this.setItems(e)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},defaultListCfg:{value:{xclass:"simple-list"}},items:{setter:function(e){if(r.isPlainObject(e)){var t=[];a.each(e,function(e,n){t.push({value:n,text:e})}),e=t}return e}},list:{}},PARSER:{list:function(e){var t=e.find(".bui-simple-list");return t.length?{srcNode:t}:void 0}}},{xclass:"form-field-list"});n.exports=o}),define("bui/form/fields/textarea",["jquery","bui/common","bui/overlay"],function(e,t,n){var i=e("bui/form/fields/base"),r=i.extend({_uiSetRows:function(e){var t=this,n=t.getInnerControl();e&&n.attr("rows",e)},_uiSetCols:function(e){var t=this,n=t.getInnerControl();e&&n.attr("cols",e)}},{ATTRS:{controlTpl:{value:"<textarea></textarea>"},rows:{},cols:{},decorateCfgFields:{value:{rows:!0,cols:!0}}}},{xclass:"form-field-textarea"});n.exports=r}),define("bui/form/fields/uploader",["bui/common","jquery","bui/overlay"],function(e,t,n){var i=e("bui/common"),r=i.JSON,a=e("bui/form/fields/base"),o=e("bui/form/rules"),s=a.extend({renderUI:function(){var e=this,t=e.getInnerControl();e.get("srcNode")&&"file"===t.get(0).type||(e._initControlValue(),e._initUpload())},_initUpload:function(){var t=this,n=(t.get("children"),t.get("uploader")||{});e.async("bui/uploader",function(e){n.render=t.getControlContainer(),n.autoRender=!0,n=new e.Uploader(n),t.set("uploader",n),t.set("isCreate",!0),t.get("children").push(n),t._initQueue(n.get("queue")),n.on("success",function(){var e=t._getUploaderResult();t.setControlValue(e)}),n.get("queue").on("itemremoved",function(){var e=t._getUploaderResult();t.setControlValue(e)})})},_getUploaderResult:function(){var e=this,t=e.get("uploader"),n=t.get("queue"),r=n.getItems(),a=[];return i.each(r,function(e){e.result&&a.push(e.result)}),a},setControlValue:function(e){var t=this,n=t.getInnerControl();n.val(r.stringify(e))},_initControlValue:function(){var e,t=this,n=t.getControlValue();n&&(e=i.JSON.parse(n),t.set("value",e))},_initQueue:function(e){var t=this,n=t.get("value"),r=[];i.each(n,function(e){var t=i.cloneObject(e);t.success=!0,t.result=e,r.push(t)}),e&&e.setItems(r)}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},uploader:{setter:function(e){var t=this.get("disabled");return e&&e.isController&&e.set("disabled",t),e}},disabled:{setter:function(e){var t=this,n=t.get("uploader");n&&n.isController&&n.set("disabled",e)}},value:{shared:!1,value:[]},defaultRules:function(){}}},{xclass:"form-field-uploader"});o.add({name:"uploader",msg:"\u4e0a\u4f20\u6587\u4ef6\u9009\u62e9\u6709\u8bef\uff01",validator:function(e,t,n,i){var r=i.get("uploader");return r&&!r.isValid()?n:void 0}}),n.exports=s}),define("bui/form/fields/checklist",["bui/common","jquery","bui/list","bui/data","bui/overlay"],function(e,t,n){"use strict";var i=(e("bui/common"),e("bui/form/fields/list")),r=i.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-checkbox"></span>{text}</li>',multipleSelect:!0,allowTextSelection:!1}}}},{xclass:"form-field-checklist"});n.exports=r}),define("bui/form/fields/radiolist",["bui/common","jquery","bui/list","bui/data","bui/overlay"],function(e,t,n){"use strict";var i=(e("bui/common"),e("bui/form/fields/list")),r=i.extend({},{ATTRS:{defaultListCfg:{value:{itemTpl:'<li><span class="x-radio"></span>{text}</li>',allowTextSelection:!1}}}},{xclass:"form-field-radiolist"});n.exports=r}),define("bui/form/groupvalid",["jquery","bui/common"],function(e,t,n){function i(){}function r(){}var a=e("jquery"),o="x-form-error",s=e("bui/form/valid");BUI.augment(i,s.View,{showError:function(e,t,n){var i=BUI.substitute(t,{error:e}),r=a(i);r.appendTo(n),r.addClass(o)},clearErrors:function(){var e=this,t=e.getErrorsContainer();t.children("."+o).remove()}}),r.ATTRS=ATTRS=BUI.merge(!0,s.ATTRS,{events:{value:{validchange:!0,change:!0}}}),BUI.augment(r,s,{__bindUI:function(){var e=this,t="validchange change";e.on(t,function(t){var n=t.target;if(n!=this&&e.get("showError")){var i=n.isValid();e._hasAllChildrenValid()&&(i=i&&e.isChildrenValid(),i&&(e.validControl(e.getRecord()),i=e.isSelfValid())),i?e.clearErrors():e.showErrors()}})},isValid:function(){if(this.get("disabled"))return!0;var e=this,t=e.isChildrenValid();return t&&e.isSelfValid()},valid:function(){var e=this,t=e.get("children");e.get("disabled")||BUI.each(t,function(e){e.get("disabled")||e.valid()})},_hasAllChildrenValid:function(){var e=this,t=e.get("children"),n=!0;return BUI.each(t,function(e){return e.get("disabled")||e.get("hasValid")!==!1?void 0:(n=!1,!1)}),n},isChildrenValid:function(){var e=this,t=e.get("children"),n=!0;return BUI.each(t,function(e){return e.get("disabled")||e.isValid()?void 0:(n=!1,!1)}),n},isSelfValid:function(){return!this.get("error")},validControl:function(e){var t=this,n=t.getValidError(e);t.set("error",n)},getErrors:function(){var e=this,t=e.get("children"),n=e.get("showChildError"),i=null,r=[];return n&&BUI.each(t,function(e){e.getErrors&&(r=r.concat(e.getErrors()))}),e._hasAllChildrenValid()&&e.isChildrenValid()&&(i=e.get("error"),i&&r.push(i)),r},_uiSetErrorTpl:function(e){var t=this,n=t.get("children");BUI.each(n,function(t){t.get("userConfig").errorTpl||t.set("errorTpl",e)})}}),r.View=i,n.exports=r}),define("bui/form/form",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=e("bui/form/fieldcontainer"),o=(r.Component,{NORMAL:"normal",AJAX:"ajax",IFRAME:"iframe"}),s=a.View.extend({_uiSetMethod:function(e){this.get("el").attr("method",e)},_uiSetAction:function(e){this.get("el").attr("action",e)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"}),l=a.extend({renderUI:function(){var e,t=this,n=t.get("buttonBar");i.isPlainObject(n)&&t.get("buttons")&&(e=r.merge(t.getDefaultButtonBarCfg(),n),t._initButtonBar(e)),t._initSubmitMask()},_initButtonBar:function(t){var n=this;e.async("bui/toolbar",function(e){buttonBar=new e.Bar(t),n.set("buttonBar",buttonBar)})},bindUI:function(){var e=this,t=e.get("el");t.on("submit",function(t){return e.valid(),e.isValid()&&e.onBeforeSubmit()!==!1?void(e.isValid()&&e.get("submitType")===o.AJAX&&(t.preventDefault(),e.ajaxSubmit())):(t.preventDefault(),void e.focusError())})},getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"toolbar",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}},focusError:function(){var e=this,t=e.getFields();r.each(t,function(e){if(e.get("visible")&&!e.get("disabled")&&!e.isValid()){try{e.focus()}catch(t){r.log(t)}return!1}})},submit:function(e){var t=this,n=t.get("submitType");if(t.valid(),t.isValid()){if(0==t.onBeforeSubmit())return;n===o.NORMAL?t.get("el")[0].submit():n===o.AJAX&&t.ajaxSubmit(e)}else t.focusError()},ajaxSubmit:function(e){var t,n=this,a=n.get("method"),o=n.get("action"),s=n.get("callback"),l=n.get("submitMask"),u=n.serializeToObject(),c=r.merge(!0,{url:o,type:a,dataType:"json",data:u},e);e&&e.success&&(t=e.success),c.success=function(e){l&&l.hide&&l.hide(),t&&t(e),s&&s.call(n,e)},l&&l.show&&l.show(),i.ajax(c)},_initSubmitMask:function(){var t=this,n=t.get("submitType"),a=t.get("submitMask");n===o.AJAX&&a&&e.async("bui/mask",function(e){var n=i.isPlainObject(a)?a:{};a=new e.LoadMask(r.mix({el:t.get("el")},n)),t.set("submitMask",a)})},serializeToObject:function(){return r.FormHelper.serializeToObject(this.get("el")[0])},toObject:function(){return this.serializeToObject()},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var e=this,t=e.get("initRecord");e.setRecord(t)},resetTips:function(){var e=this,t=e.getFields();r.each(t,function(e){e.resetTip()})},destructor:function(){var e=this,t=e.get("buttonBar"),n=e.get("submitMask");t&&t.destroy&&t.destroy(),n&&n.destroy&&n.destroy()},_uiSetInitRecord:function(e){this.setRecord(e)}},{ATTRS:{action:{view:!0,value:""},allowTextSelection:{value:!0},events:{value:{beforesubmit:!1}},method:{view:!0,value:"get"},defaultLoaderCfg:{value:{autoLoad:!0,property:"record",dataType:"json"}},submitMask:{value:{msg:"\u6b63\u5728\u63d0\u4ea4\u3002\u3002\u3002"}},submitType:{value:"normal"},focusError:{value:!0},callback:{},decorateCfgFields:{value:{method:!0,action:!0}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{shared:!1,value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:!1},xview:{value:s},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});l.View=s,n.exports=l}),define("bui/form/row",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=(e("bui/common"),e("bui/form/fieldcontainer")),r=i.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>              <div class="controls">              </div>',childContainer:".controls",showOneError:!0,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});n.exports=r}),define("bui/form/fieldgroup",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e){var t=e("bui/common"),n=e("bui/form/group/base");return t.mix(n,{Range:e("bui/form/group/range"),Check:e("bui/form/group/check"),Select:e("bui/form/group/select")}),n}),define("bui/form/group/base",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=(e("bui/common"),e("bui/form/fieldcontainer")),r=i.extend({},{ATTRS:{label:{view:!0},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});n.exports=r}),define("bui/form/group/range",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){function i(e,t,n){var i=e.get("allowEqual");return i?t>=n:t>n}var r=e("bui/form/group/base"),a=r.extend({},{ATTRS:{rangeText:{value:"\u5f00\u59cb\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\uff01"},allowEqual:{value:!0},validator:{value:function(){for(var e=this,t=e.getFields(),n=!0,r=1;r<t.length;r++){var a,o,s=t[r],l=t[r-1];if(s&&l&&(a=s.get("value"),o=l.get("value"),!i(e,a,o))){n=!1;break}}return n?null:e.get("rangeText")}}}},{xclass:"form-group-range"});n.exports=a}),define("bui/form/group/check",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){function i(e){var t=e.getFieldAt(0);return t?t.get("name"):""}var r=e("bui/form/group/base"),a=r.extend({bindUI:function(){var e=this;e.on("change",function(){var t=i(e),n=e.get("range"),r=e.getRecord(),a=r[t],o=n[1];a&&a.length>=o?e._setFieldsEnable(t,!1):e._setFieldsEnable(t,!0)})},_setFieldsEnable:function(e,t){var n=this,i=n.getFields(e);BUI.each(i,function(e){t?e.enable():e.get("checked")||e.disable()})},_uiSetRange:function(e){this.addRule("checkRange",e)}},{ATTRS:{range:{setter:function(e){return(BUI.isString(e)||BUI.isNumber(e))&&(e=[parseInt(e,10)]),e}}}},{xclass:"form-group-check"});n.exports=a}),define("bui/form/group/select",["bui/common","jquery","bui/overlay","bui/list","bui/data"],function(e,t,n){function i(e){var t=[];return BUI.each(e,function(e){t.push({text:e.text,value:e.id})}),t}var r=e("bui/form/group/base"),a=e("bui/data"),o=BUI.Component.UIBase.Bindable,s=r.extend([o],{initializer:function(){var e=this,t=e.get("url"),n=e.get("store")||e._getStore();n.isStore||(n.autoLoad=!0,t&&(n.url=t),n=new a.TreeStore(n)),e.set("store",n)},bindUI:function(){var e=this;e.on("change",function(t){var n=t.target;if(n!=e){var i=n,r=i.get("value"),a=e._getFieldIndex(i)+1;e._valueChange(r,a)}})},onLoad:function(e){var t=this,n=e?e.node:t.get("store").get("root");t._setFieldItems(n.level,n.children)},_getStore:function(){var e=this,t=e.get("type");return t&&l[t]?l[t]:{}},_valueChange:function(e,t){var n=this,i=n.get("store");if(e){var r=i.findNode(e);if(!r)return;i.isLoaded(r)?n._setFieldItems(t,r.children):i.loadNode(r)}else n._setFieldItems(t,[])},_setFieldItems:function(e,t){var n=this,r=n.getFieldAt(e),a=i(t);r&&(r.setItems(a),n._valueChange(r.get("value"),e+1))},_getFieldIndex:function(e){var t=this,n=t.getFields();return BUI.Array.indexOf(e,n)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"}),l={};s.addType=function(e,t){l[e]=t},s.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}}),n.exports=s}),define("bui/form/hform",["jquery","bui/common","bui/overlay","bui/list","bui/data"],function(e,t,n){var i=(e("jquery"),e("bui/common"),e("bui/form/form")),r=i.extend({getDefaultButtonBarCfg:function(){var e=this,t=e.get("buttons");return{autoRender:!0,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:e.get("el"),items:t,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});n.exports=r}),define("bui/editor",["bui/common","jquery","bui/form","bui/overlay","bui/list","bui/data"],function(e){var t=e("bui/common"),n=(e("bui/form"),t.namespace("Editor"));return t.mix(n,{Editor:e("bui/editor/editor"),RecordEditor:e("bui/editor/record"),DialogEditor:e("bui/editor/dialog")}),n}),define("bui/editor/editor",["bui/common","jquery","bui/overlay"],function(e,t,n){var i=e("bui/common"),r=e("bui/overlay").Overlay;CLS_TIPS="x-editor-tips",Mixin=e("bui/editor/mixin");var a=r.extend([Mixin],{bindUI:function(){{var e=this;e.getInnerControl()}e.on("validchange",function(){!e.isValid()&&e.get("visible")?e._showError(e.getErrors()):e._hideError()}),e.on("hide",function(){e._hideError()}),e.on("show",function(){e.isValid()||e._showError(e.getErrors())})},_initOverlay:function(){var e=this,t=e.get("tooltip"),n=new r(t);return n.render(),e.set("overlay",n),n},_getErrorList:function(){var e=this,t=e.get("overlay");return t&&t.get("children")[0]},_showError:function(e){var t=this,n=t.get("overlay")||t._initOverlay(),r=t._getErrorList(),a=t.get("errorAlign"),o=i.Array.map(e,function(e){return{error:e}});r.set("items",o),a.node=t.get("el"),n.set("align",a),n.show()},_hideError:function(){var e=this,t=e.get("overlay");t&&t.hide()},clearErrors:function(){var e=this,t=e.getInnerControl();t.clearErrors(),e._hideError()},getSourceValue:function(){var e=this,t=e.get("curTrigger"),n=e.get("parser"),i=t.text();return n&&(i=n.call(this,i,t)),i},updateSource:function(e){var t=this,n=t.get("curTrigger");n&&n.length&&(e=t._formatText(e),n.text(e))},_formatText:function(e){var t=this,n=t.get("formatter");return n&&(e=n.call(t,e)),e},_uiSetWidth:function(e){var t=this;if(null!=e){var n=t.getInnerControl();n.set&&n.set("width",e)}}},{ATTRS:{innerValueField:{value:"value"},emptyValue:{value:""},autoHide:{value:!0},controlCfgField:{value:"field"},defaultChildCfg:{value:{tpl:"",forceFit:!0,errorTpl:""}},tooltip:{valueFn:function(){return{children:[{xclass:"simple-list",itemTpl:'<li><span class="x-icon x-icon-mini x-icon-error" title="{error}">!</span>&nbsp;<span>{error}</span></li>'}],elCls:CLS_TIPS}}},defaultChildClass:{value:"form-field"},align:{value:{points:["tl","tl"]}},parser:{},formatter:{},errorAlign:{value:{points:["bl","tl"],offset:[0,10]}},overlay:{},field:{value:{}}}},{xclass:"editor"});n.exports=a}),define("bui/editor/mixin",["jquery"],function(e,t,n){function i(e){var t=e,n=t.get("controlCfgField"),i=t.get(n),r=t.addChild(i);t.setInternal(n,r)}var r=e("jquery"),a=function(){i(this)};a.ATTRS={acceptEvent:{value:"autohide"},preventHide:{value:!0},changeSourceEvent:{value:"show triggerchange"},ignoreInputFields:{value:!1},innerValueField:{},emptyValue:{},controlCfgField:{},focusable:{value:!0},autoUpdate:{value:!0},events:{value:{accept:!1,cancel:!1}}},a.prototype={__bindUI:function(){var e=this,t=e.get("acceptEvent"),n=e.get("changeSourceEvent");t&&e.on(t,function(){return e.accept()?void 0:e.get("preventHide")?!1:void e.cancel()}),n&&e.on(n,function(){e.setValue(e.getSourceValue()),e.get("visible")&&e.focus()})},getInnerControl:function(){var e=this,t=e.get("children");return t[0]},setValue:function(e,t){var n=this,i=n.getInnerControl();n.set("editValue",e),n.clearControlValue(),i.set(n.get("innerValueField"),e),e||n.valid(),t&&n.clearErrors()},getValue:function(){var e=this,t=e.getInnerControl();return t.get(e.get("innerValueField"))},isValid:function(){var e=this,t=e.getInnerControl();return t.isValid?t.isValid():!0},valid:function(){var e=this,t=e.getInnerControl();t.valid&&t.valid()},getErrors:function(){var e=this,t=e.getInnerControl();return t.getErrors?t.getErrors():[]},isChange:function(){var e=this,t=e.get("editValue"),n=e.getValue();return t!==n},clearValue:function(){this.clearControlValue(),this.clearErrors()},clearControlValue:function(){var e=this,t=e.getInnerControl();t.set(e.get("innerValueField"),e.get("emptyValue"))},clearErrors:function(){var e=this,t=e.getInnerControl();t.clearErrors()},getSourceValue:function(){},updateSource:function(){},handleNavEsc:function(){this.cancel()},handleNavEnter:function(e){var t=e.target;"TEXTAREA"!==t.tagName&&("BUTTON"===t.tagName&&r(t).trigger("click"),this.accept())},focus:function(){var e=this,t=e.getInnerControl();t.focus&&t.focus()},accept:function(){var e,t=this;return t.valid(),t.isValid()?(e=t.getValue(),t.get("autoUpdate")&&t.updateSource(e),0!=t.fire("beforeaccept",{value:e})?(t.fire("accept",{value:e,editValue:t.get("editValue")}),t.hide(),!0):void 0):!1},cancel:function(){this.fire("cancel"),this.clearValue(),this.close()}},n.exports=a}),define("bui/editor/record",["bui/common","jquery","bui/overlay"],function(e,t,n){var i=e("bui/common"),r=e("bui/editor/editor"),a=r.extend({getSourceValue:function(){return this.get("record")},updateSource:function(e){var t=this,n=t.get("record");i.mix(n,e)},_uiSetRecord:function(e){this.setValue(e)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},emptyValue:{value:{}},autoHide:{value:!1},record:{value:{}},controlCfgField:{value:"form"},form:{value:{}},errorAlign:{value:{points:["tr","tl"],offset:[10,0]}},defaultChildCfg:{valueFn:function(){var e=this;return{xclass:"form",errorTpl:"",showError:!0,showChildError:!0,defaultChildCfg:{elCls:"bui-inline-block",tpl:"",forceFit:!0},buttons:[{btnCls:"button button-primary",text:"\u786e\u5b9a",handler:function(){e.accept()}},{btnCls:"button",text:"\u53d6\u6d88",handler:function(){e.cancel()}}]}}}}},{xclass:"record-editor"});n.exports=a}),define("bui/editor/dialog",["jquery","bui/overlay","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/overlay").Dialog,a=e("bui/editor/mixin"),o=r.extend([a],{getSourceValue:function(){return this.get("record")},handleNavEnter:function(e){var t=this,n=t.get("success"),r=e.target;"TEXTAREA"!==r.tagName&&("BUTTON"===r.tagName&&i(r).trigger("click"),n?n.call(t):this.accept())},cancel:function(){this.fire("cancel"),this.clearValue(),this.close()},updateSource:function(e){var t=this,n=t.get("record");BUI.mix(n,e)},_uiSetRecord:function(e){this.setValue(e)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},record:{value:{}},emptyValue:{shared:!1,value:{}},controlCfgField:{value:"form"},changeSourceEvent:{value:""},defaultChildCfg:{value:{xclass:"form-horizontal"}},focusable:{value:!1},success:{value:function(){this.accept()}},cancel:{value:function(){this.cancel()}},form:{value:{}}}},{xclass:"dialog-editor"});n.exports=o}),define("bui/tooltip",["bui/common","jquery","bui/overlay"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Tooltip"),a=e("bui/tooltip/tip"),o=e("bui/tooltip/tips");i.mix(r,{Tip:a,Tips:o}),n.exports=r}),define("bui/tooltip/tip",["jquery","bui/common","bui/overlay"],function(e,t,n){function i(e,t){return"left"===e?[-1*t,-4]:"right"===e?[t,-4]:e.indexOf("top")?[0,t]:e.indexOf("bottom")?[0,-1*t]:void 0}var r=e("jquery"),a=e("bui/common"),o=e("bui/overlay"),s="x-align-",l={left:["cl","cr"],right:["cr","cl"],top:["tc","bc"],bottom:["bc","tc"],"top-left":["tl","bl"],"top-right":["tr","br"],"bottom-left":["bl","tl"],"bottom-right":["br","tr"]},u=o.OverlayView.extend({renderUI:function(){},_getTitleContainer:function(){return this.get("el")},_uiSetTitle:function(e){var t,n=this,i=n.get("titleTpl"),o=n._getTitleContainer(),s=n.get("titleEl");s&&s.remove(),e=e||"",a.isString(e)&&(e={title:e}),t=a.substitute(i,e),s=r(t).appendTo(o),n.set("titleEl",s)
},_uiSetAlignType:function(e,t){var n=this;t&&t.prevVal&&n.get("el").removeClass(s+t.prevVal),e&&n.get("el").addClass(s+e)}},{ATTRS:{title:{},titleEl:{},alignType:{}}},{xclass:"tooltip-view"}),c=o.Overlay.extend({_uiSetAlignType:function(e){var t=this,n=t.get("offset"),r=t.get("align")||{},a=l[e];a&&(r.points=a,n&&(r.offset=i(e,n)),t.set("align",r))}},{ATTRS:{delegateTrigger:{value:!0},alignType:{view:!0},title:{view:!0},showArrow:{value:!0},arrowContainer:{view:!0},autoHide:{value:!0},autoHideType:{value:"leave"},offset:{value:0},triggerEvent:{value:"mouseover"},titleTpl:{view:!0,value:"<span>{title}</span>"},xview:{value:u}}},{xclass:"tooltip"});c.View=u,n.exports=c}),define("bui/tooltip/tips",["bui/common","jquery","bui/overlay"],function(e,t,n){function i(e){return/^{.*}$/.test(e)}var r=e("bui/common"),a=e("bui/tooltip/tip"),o=function(e){o.superclass.constructor.call(this,e)};o.ATTRS={tip:{},defaultAlignType:{}},r.extend(o,r.Base),r.augment(o,{_init:function(){this._initDom(),this._initEvent()},_initDom:function(){var e,t=this,n=t.get("tip");n&&!n.isController&&(e=n.alignType,n=new a(n),n.render(),t.set("tip",n),e&&t.set("defaultAlignType",e))},_initEvent:function(){var e=this,t=e.get("tip");t.on("triggerchange",function(n){var i=n.curTrigger;e._replaceTitle(i),e._setTitle(i,t)})},_replaceTitle:function(e){var t=e.attr("title");t&&(e.attr("data-title",t),e[0].removeAttribute("title"))},_setTitle:function(e,t){var n=this,a=e.attr("data-title"),o=e.attr("data-align")||n.get("defaultAlignType");i(a)&&(a=r.JSON.looseParse(a)),t.set("title",a),o&&t.set("alignType",o)},render:function(){return this._init(),this}}),n.exports=o}),define("bui/grid",["bui/common","jquery","bui/list","bui/data","bui/mask","bui/toolbar","bui/menu"],function(e,t,n){var i=e("bui/common"),r=i.namespace("Grid");i.mix(r,{SimpleGrid:e("bui/grid/simplegrid"),Grid:e("bui/grid/grid"),Column:e("bui/grid/column"),Header:e("bui/grid/header"),Format:e("bui/grid/format"),Plugins:e("bui/grid/plugins/base")}),n.exports=r}),define("bui/grid/simplegrid",["jquery","bui/common","bui/list","bui/data"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=e("bui/list"),o=r.Component,s=(o.UIBase,r.prefix),l=s+"grid",u=l+"-row",c=s+"grid-row-odd",d=s+"grid-row-even",f=s+"grid-border",g=a.SimpleListView.extend({setColumns:function(e){var t=this,n=t.get("headerRowEl");e=e||t.get("columns"),n.empty(),r.each(e,function(e){t._createColumn(e,n)})},_createColumn:function(e,t){var n=this,a=r.substitute(n.get("columnTpl"),e);i(a).appendTo(t)},getItemTpl:function(e,t){var n=this,i=n.get("columns"),a=n.get("rowTpl"),o=t%2===0?c:d,s=[];return r.each(i,function(t){var i=t.dataIndex;s.push(n._getCellTpl(t,i,e))}),a=r.substitute(a,{cellsTpl:s.join(""),oddCls:o})},_getCellTpl:function(e,t,n){var i=this,a=e.renderer,o=a?a(n[t],n):n[t],s=i.get("cellTpl");return r.substitute(s,{elCls:e.elCls,text:o})},clearData:function(){var e=this,t=e.get("itemContainer");t.empty()},showData:function(e){var t=this;r.each(e,function(e,n){t._createRow(e,n)})},_uiSetInnerBorder:function(e){var t=this,n=t.get("el");e?n.addClass(f):n.removeClass(f)},_uiSetTableCls:function(e){var t=this,n=t.get("el").find("table");n.attr("class",e)}},{ATTRS:{headerRowEl:{valueFn:function(){var e=this,t=e.get("el").find("thead");return t.children("tr")}},itemContainer:{valueFn:function(){return this.get("el").find("tbody")}},tableCls:{}}},{xclass:"simple-grid-veiw"}),h=r.List.SimpleList.extend({renderUI:function(){this.get("view").setColumns()},bindUI:function(){var e=this,t=e.get("itemCls"),n=t+"-hover",r=e.get("el");r.delegate("."+t,"mouseover",function(e){var t=i(e.currentTarget);t.addClass(n)}).delegate("."+t,"mouseout",function(e){var t=i(e.currentTarget);t.removeClass(n)})},showData:function(e){this.clearData(),this.set("items",e)},clearData:function(){this.get("view").clearData()},_uiSetColumns:function(e){var t=this;t.clearData(),t.get("view").setColumns(e)}},{ATTRS:{itemCls:{view:!0,value:u},tableCls:{view:!0,value:l+"-table"},columns:{view:!0,sync:!1,value:[]},tpl:{view:!0,value:'<table cellspacing="0" class="{tableCls}" cellpadding="0"><thead><tr></tr></thead><tbody></tbody></table>'},innerBorder:{view:!0,value:!0},rowTpl:{view:!0,value:'<tr class="'+u+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:!0,value:'<td class="'+l+'-cell {elCls}"><div class="'+l+'-cell-inner"><span class="'+l+'-cell-text">{text}</span></div></td>'},columnTpl:{view:!0,value:'<th class="'+l+'-hd {elCls}" width="{width}"><div class="'+l+'-hd-inner"><span class="'+l+'-hd-title">{title}</span></div></th>'},events:{value:{}},xview:{value:g}}},{xclass:"simple-grid"});h.View=g,n.exports=h}),define("bui/grid/grid",["jquery","bui/common","bui/mask","bui/toolbar","bui/list","bui/data"],function(e,t,n){function i(e){return o.isString(e)?-1!==e.indexOf("%"):!1}function r(e){return o.isNumber(e)&&(e-=V),e}var a=e("jquery"),o=e("bui/common"),s=(e("bui/mask"),o.UA),l=o.Component,u=(e("bui/toolbar"),e("bui/list")),c=e("bui/grid/header"),d=e("bui/grid/column"),f=o.prefix,g=f+"grid-header-container",h=f+"grid-body",v=f+"grid-width",m=f+"grid-height",p=f+"grid-border",b=f+"grid-tbar",y=f+"grid-bbar",x=f+"grid-button-bar",C=f+"grid-strip",T=f+"grid-row",w=f+"grid-row-odd",I=f+"grid-row-even",_=f+"grid-cell",S=f+"grid-cell-inner",E="grid-td-",B=f+"grid-cell-text",A=f+"grid-cell-empty",k="17",U=f+"hidden",R="data-column-field",V=2,F=u.SimpleListView.extend({renderUI:function(){var e=this,t=e.get("el"),n=t.find("."+h);e.set("bodyEl",n),e._setTableTpl()},getItemTpl:function(e,t){var n=this,i=n._getColumns(),r=(n.get("tbodyEl"),n.get("rowTpl")),a=t%2===0?w:I,s=[];return o.each(i,function(i){var r=i.get("dataIndex");s.push(n._getCellTpl(i,r,e,t))}),n.get("useEmptyCell")&&s.push(n._getEmptyCellTpl()),r=o.substitute(r,{cellsTpl:s.join(""),oddCls:a})},findRow:function(e){var t=this;return a(t.findElement(e))},findCell:function(e,t){var n=E+e;return t.find("."+n)},resetHeaderRow:function(){if(this.get("useHeaderRow")){var e=this,t=e.get("headerRowEl"),n=e.get("tbodyEl");t&&t.remove(),t=e._createHeaderRow(),t.prependTo(n),e.set("headerRowEl",t)}},resetColumnsWidth:function(e,t){var n=this,i=n.get("headerRowEl"),r=n.findCell(e.get("id"),i);t=t||e.get("width"),r&&r.width(t),n.setTableWidth()},setTableWidth:function(e){if(!e&&i(this.get("width")))return void this.get("tableEl").width("100%");{var t=this,n=t._getInnerWidth(),r=t.get("height"),a=t.get("tableEl");t.get("forceFit"),t.get("headerRowEl")}if(!i(e)){if(e=e||t._getColumnsWidth(),!n)return;if(n>=e&&(e=n,r)){var o=6==s.ie||7==s.ie?k+2:k;e=n-o}}a.width(e)},setBodyWidth:function(e){var t=this,n=t.get("bodyEl");e=e||t._getInnerWidth(),n.width(e)},setBodyHeight:function(e){var t=this,n=t.get("bodyEl"),i=e,r=n.siblings();o.each(r,function(e){"none"!==a(e).css("display")&&(i-=a(e).outerHeight())}),n.height(i)},setColumnVisible:function(e){var t=this,n=!e.get("visible"),i=e.get("id"),r=t.get("tbodyEl"),o=a("."+E+i,r);n?o.hide():o.show()},updateItem:function(e){var t=this,n=t.getItems(),i=o.Array.indexOf(e,n),r=t._getColumns(),s=null;return i>=0?(s=t.findElement(e),o.each(r,function(n){var r=t.findCell(n.get("id"),a(s)),o=r.find("."+S),l=t._getCellText(n,e,i);o.html(l)}),s):void 0},showEmptyText:function(){var e=this,t=e.get("bodyEl"),n=e.get("emptyDataTpl"),i=e.get("emptyEl");i&&i.remove();var i=a(n).appendTo(t);e.set("emptyEl",i)},clearEmptyText:function(){var e=this,t=e.get("emptyEl");t&&t.remove()},_createHeaderRow:function(){var e,t=this,n=t._getColumns(),i=t.get("tbodyEl"),r=t.get("headerRowTpl"),s=[];return a.each(n,function(e,n){s.push(t._getHeaderCellTpl(n))}),t.get("useEmptyCell")&&s.push(t._getEmptyCellTpl()),r=o.substitute(r,{cellsTpl:s.join("")}),e=a(r).appendTo(i)},_getColumnsWidth:function(){var e=this,t=e.get("columns"),n=0;return o.each(t,function(e){e.get("visible")&&(n+=e.get("el").outerWidth())}),n},_getColumns:function(){return this.get("columns")},_getCellText:function(e,t,n){var i=this,r=e.get("dataIndex"),a=e.get("cellTpl")||i.get("cellTextTpl"),s=i._getCellInnerText(e,r,t,n);return o.substitute(a,{text:s,tips:i._getTips(e,r,t)})},_getCellInnerText:function(e,t,n,i){try{var r=e.get("renderer"),a=r?r(n[t],n,i):n[t];return null==a?"":a}catch(o){throw"column:"+e.get("title")+" fomat error!"}},_getCellTpl:function(e,t,n,i){var r=this,a=r._getCellText(e,n,i),s=r.get("cellTpl");return o.substitute(s,{elCls:e.get("elCls"),id:e.get("id"),dataIndex:t,cellText:a,hideCls:e.get("visible")?"":U})},_getEmptyCellTpl:function(){return'<td class="'+_+" "+A+'">&nbsp;</td>'},_getHeaderCellTpl:function(e){var t=this,n=t.get("headerCellTpl");return o.substitute(n,{id:e.get("id"),width:e.get("width"),hideCls:e.get("visible")?"":U})},_getInnerWidth:function(){return r(this.get("width"))},_getTips:function(e,t,n){var i=e.get("showTip"),r="";return i&&(r=n[t],o.isFunction(i)&&(r=i(r,n))),r},_uiSetInnerBorder:function(e){var t=this,n=t.get("el");e?n.addClass(p):n.removeClass(p)},_setTableTpl:function(e){var t=this,n=t.get("bodyEl");e=e||t.get("tableTpl"),a(e).appendTo(n);var i=n.find("table"),r=n.find("tbody");t.set("tableEl",i),t.set("tbodyEl",r),t.set("itemContainer",r),t._setTableCls(t.get("tableCls"))},_uiSetTableCls:function(e){this._setTableCls(e)},_uiSetHeight:function(e){{var t=this;t.get("bodyEl")}t.get("el").height(e),t.get("el").addClass(m)},_uiSetWidth:function(e){var t=this;t.get("el").width(e),t.setBodyWidth(t._getInnerWidth(e)),t.get("el").addClass(v)},_uiSetStripeRows:function(e){var t=this,n=e?"addClass":"removeClass";t.get("el")[n](C)},_setTableCls:function(e){var t=this,n=t.get("tableEl");n.attr("class",e)}},{ATTRS:{tableCls:{},bodyEl:{},tbodyEl:{},headerRowEl:{},tableEl:{},emptyEl:{}}},{xclass:"grid-view"}),j=u.SimpleList.extend({createDom:function(){var e=this,t=e.get("render"),n=a(t).width(),i=e.get("width");if(!i&&n){var r=e.getAppendWidth();e.set("width",n-r)}e.get("width")&&e.get("el").addClass(v),e.get("height")&&e.get("el").addClass(m),e.get("innerBorder")&&e.get("el").addClass(p)},renderUI:function(){var e=this;e._initHeader(),e._initBars(),e._initLoadMask(),e.get("view").resetHeaderRow()},bindUI:function(){var e=this;e._bindHeaderEvent(),e._bindBodyEvent(),e._bindItemsEvent()},addColumn:function(e,t){var n=this,i=n.get("header");return i?e=i.addColumn(e,t):(e=new d(e),n.get("columns").splice(t,0,e)),e},clearData:function(){this.clearItems()},getRecords:function(){return this.getItems()},findColumn:function(e){var t=this,n=t.get("header");return o.isNumber(e)?n.getColumnByIndex(e):n.getColumnById(e)},findColumnByField:function(e){var t=this,n=t.get("header");return n.getColumn(function(t){return t.get("dataIndex")===e})},findCell:function(e,t){var n=this,i=null;return i=t instanceof a?t:n.findRow(t),i?n.get("view").findCell(e,i):null},findRow:function(e){var t=this;return t.get("view").findRow(e)},removeColumn:function(e){var t=this;t.get("header").removeColumn(e)},showData:function(e){var t=this;t.set("items",e)},resetColumns:function(){var e=this,t=e.get("store");e.get("view").resetHeaderRow(),t&&e.onLoad()},_bindScrollEvent:function(){var e=this,t=e.get("el"),n=t.find("."+h),i=e.get("header");n.on("scroll",function(){var t=n.scrollLeft(),r=n.scrollTop();i.scrollTo({left:t,top:r}),e.fire("scroll",{scrollLeft:t,scrollTop:r,bodyWidth:n.width(),bodyHeight:n.height()})})},_bindHeaderEvent:function(){var e=this,t=e.get("header"),n=e.get("view"),i=e.get("store");t.on("afterWidthChange",function(e){var i=e.target;i!==t&&n.resetColumnsWidth(i)}),t.on("afterSortStateChange",function(e){var t=e.target,n=e.newVal;n&&i&&i.sort(t.get("dataIndex"),t.get("sortState"))}),t.on("afterVisibleChange",function(i){var r=i.target;r!==t&&(n.setColumnVisible(r),e.fire("columnvisiblechange",{column:r}))}),t.on("click",function(n){var i=n.target;i!==t&&e.fire("columnclick",{column:i,domTarget:n.domTarget})}),t.on("forceFitWidth",function(){e.get("rendered")&&e.resetColumns()}),t.on("add",function(t){e.get("rendered")&&(e.fire("columnadd",{column:t.column,index:t.index}),e.resetColumns())}),t.on("remove",function(t){e.get("rendered")&&(e.resetColumns(),e.fire("columnremoved",{column:t.column,index:t.index}))})},_bindBodyEvent:function(){var e=this;e._bindScrollEvent()},_bindItemsEvent:function(){function e(e){return{record:e.item,row:e.domTarget,domTarget:e.domTarget}}{var t=this;t.get("store")}t.on("itemsshow",function(){t.fire("aftershow")}),t.on("itemsclear",function(){t.fire("clear")}),t.on("itemclick",function(e){var n,i=e.domTarget,r=e.item,o=a(i).closest("."+_),s=a(i).closest("."+T);return o.length&&(n=t.fire("cellclick",{record:r,row:s[0],cell:o[0],field:o.attr(R),domTarget:i,domEvent:e.domEvent})),n===!1?n:t.fire("rowclick",{record:r,row:s[0],domTarget:i})}),t.on("itemunselected",function(n){t.fire("rowunselected",e(n))}),t.on("itemselected",function(n){t.fire("rowselected",e(n))}),t.on("itemrendered",function(n){t.fire("rowcreated",e(n))}),t.on("itemremoved",function(n){t.fire("rowremoved",e(n))}),t.on("itemupdated",function(n){t.fire("rowupdated",e(n))})},_getInnerWidth:function(e){return e=e||this.get("width"),r(e)},_initHeader:function(){var e=this,t=e.get("header"),n=e.get("el").find("."+g);t||(t=new c({columns:e.get("columns"),tableCls:e.get("tableCls"),forceFit:e.get("forceFit"),width:e._getInnerWidth(),render:n,parent:e}).render(),e.set("header",t))},_initBars:function(){var e=this,t=e.get("bbar"),n=e.get("tbar");e._initBar(t,y,"bbar"),e._initBar(n,b,"tbar")},_initBar:function(e,t,n){var i=this,r=null,a=null;if(e){if(e.xclass||e instanceof l.Controller||(e.xclass="bar",e.children=e.children||[],e.items&&(e.children.push({xclass:"bar",defaultChildClass:"bar-item-button",elCls:x,children:e.items}),e.items=null),e.pagingBar&&(r=i.get("store"),a={xclass:"pagingbar",store:r,pageSize:r.pageSize},e.pagingBar!==!0&&(a=o.merge(a,e.pagingBar)),e.children.push(a))),e.xclass){var s=i.get("el").find("."+t);s.show(),e.render=s,e.elTagName="div",e.autoRender=!0,e=i.addChild(e)}i.set(n,e)}return e},_initLoadMask:function(){var e=this,t=e.get("loadMask");t&&!t.show&&(t=new o.Mask.LoadMask({el:e.get("el")}),e.set("loadMask",t))},_uiSetWidth:function(e){var t=this;t.get("rendered")&&(i(e)?t.get("header").set("width","100%"):t.get("header").set("width",t._getInnerWidth(e))),t.get("view").setTableWidth()},_uiSetForceFit:function(e){var t=this;t.get("header").set("forceFit",e)},_uiSetHeight:function(e,t){var n=this,i=n.get("header");n.get("view").setBodyHeight(e),n.get("rendered")&&(n.get("forceFit")&&!t.prevVal&&(i.forceFitColumns(),n.get("view").setTableWidth()),i.setTableWidth())},onLoad:function(){var e=this,t=e.get("store");j.superclass.onLoad.call(this),e.get("emptyDataTpl")&&(t&&0==t.getCount()?e.get("view").showEmptyText():e.get("view").clearEmptyText())}},{ATTRS:{header:{},bbar:{},itemCls:{value:T},columns:{view:!0,value:[]},forceFit:{sync:!1,view:!0,value:!1},emptyDataTpl:{view:!0},headerRowTpl:{view:!0,value:'<tr class="'+f+'grid-header-row">{cellsTpl}</tr>'},headerCellTpl:{view:!0,value:'<td class="{hideCls} '+E+'{id}" width="{width}" style="height:0"></td>'},rowTpl:{view:!0,value:'<tr class="'+T+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:!0,value:'<td  class="{elCls} {hideCls} '+_+" "+E+'{id}" data-column-id="{id}" data-column-field = "{dataIndex}" ><div class="'+S+'" >{cellText}</div></td>'},cellTextTpl:{view:!0,value:'<span class="'+B+' " title = "{tips}">{text}</span>'},events:{value:{aftershow:!1,clear:!1,cellclick:!1,columnclick:!1,rowclick:!1,rowcreated:!1,rowremoved:!1,rowselected:!1,rowunselected:!1,scroll:!1}},stripeRows:{view:!0,value:!0},tbar:{},tableCls:{view:!0,sync:!1,value:f+"grid-table"},tableTpl:{view:!0,value:'<table cellspacing="0" cellpadding="0" ><tbody></tbody></table>'},tpl:{value:'<div class="'+b+'" style="display:none"></div><div class="'+g+'"></div><div class="'+h+'"></div><div style="display:none" class="'+y+'"></div>'},innerBorder:{sync:!1,value:!0},useEmptyCell:{view:!0,value:!0},useHeaderRow:{view:!0,value:!0},xview:{value:F}}},{xclass:"grid"});j.View=F,n.exports=j}),define("bui/grid/header",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.prefix,o=(r.namespace("Grid"),e("bui/grid/column")),s=r.Component.View,l=r.Component.Controller,u=17,c=r.UA,d=s.extend({getContentElement:function(){return this.get("el").find("tr")},scrollTo:function(e){var t=this,n=t.get("el");void 0!==e.top&&n.scrollTop(e.top),void 0!==e.left&&n.scrollLeft(e.left)},_uiSetTableCls:function(e){var t=this,n=t.get("el").find("table");n.attr("class",e)}},{ATTRS:{emptyCellEl:{},tableCls:{}}},{xclass:"header-view"}),f=l.extend({addColumn:function(e,t){var n=this,i=t,r=n.get("columns");return e=n._createColumn(e),void 0===t&&(t=r.length,i=n.get("children").length-1),r.splice(t,0,e),n.addChild(e,i),n.fire("add",{column:e,index:t}),e},removeColumn:function(e){var t,n=this,i=n.get("columns");return e=r.isNumber(e)?i[e]:e,t=r.Array.indexOf(e,i),i.splice(t,1),n.fire("remove",{column:e,index:t}),n.removeChild(e,!0)},bindUI:function(){var e=this;e._bindColumnsEvent()},initializer:function(){var e,t=this,n=t.get("children"),r=t.get("columns");i.each(r,function(e,i){var a=t._createColumn(i);n[e]=a,r[e]=a}),e=t._createEmptyColumn(),n.push(e),t.set("emptyColumn",e)},getColumns:function(){return this.get("columns")},getColumnsWidth:function(){var e=this,t=e.getColumns(),n=0;return i.each(t,function(e,t){t.get("visible")&&(n+=t.get("el").outerWidth())}),n},getColumnOriginWidth:function(){var e=this,t=e.getColumns(),n=0;return i.each(t,function(e,t){if(t.get("visible")){var i=t.get("originWidth")||t.get("width");n+=i}}),n},getColumnByIndex:function(e){var t=this,n=t.getColumns(),i=n[e];return i},getColumn:function(e){var t=this,n=t.getColumns(),r=null;return i.each(n,function(t,n){return e(n)?(r=n,!1):void 0}),r},getColumnById:function(e){var t=this;return t.getColumn(function(t){return t.get("id")===e})},getColumnIndex:function(e){var t=this,n=t.getColumns();return r.Array.indexOf(e,n)},scrollTo:function(e){this.get("view").scrollTo(e)},_bindColumnsEvent:function(){var e=this;e.on("afterWidthChange",function(t){var n=t.target;n!==e&&e.setTableWidth()}),e.on("afterVisibleChange",function(t){var n=t.target;n!==e&&e.setTableWidth()}),e.on("afterSortStateChange",function(t){var n=t.target,r=e.getColumns(),a=t.newVal;a&&i.each(r,function(e,t){t!==n&&t.set("sortState","")})}),e.on("add",function(){e.setTableWidth()}),e.on("remove",function(){e.setTableWidth()})},_createColumn:function(e){return e instanceof o?e:(e.id||(e.id=r.guid("col")),new o(e))},_createEmptyColumn:function(){return new o.Empty},_isAllowScrollLeft:function(){var e=this,t=e.get("parent");return t&&!!t.get("height")},forceFitColumns:function(){function e(e,t){var n=e.get("el");e.set("width",t,{silent:1}),n.width(t)}var t=this,n=t.getColumns(),r=t.get("width"),a=r,o=t.getColumnOriginWidth(),s=0,l=0,c=null,d=t._isAllowScrollLeft();if(r){d&&(r-=u,a=r);var f=0;i.each(n,function(e,t){if(t.get("visible")&&t.get("resizable")&&f++,t.get("visible")&&!t.get("resizable")){var n=t.get("el").outerWidth();a-=n,o-=n}});var g=Math.floor(a/f),h=a/o;if(1===h)return;i.each(n,function(n,i){if(i.get("visible")&&i.get("resizable")){var r=t._getColumnBorderWith(i,n),a=i.get("originWidth");a||(i.set("originWidth",i.get("width")),a=i.get("width")),g=Math.floor((a+r)*h),e(i,g-r),s+=g,c=i}}),c&&(l=a-s,e(c,c.get("width")+l)),t.fire("forceFitWidth")}},_getColumnBorderWith:function(e,t){var n=e.get("el"),i=Math.round(parseFloat(n.css("border-left-width"))||0)+Math.round(parseFloat(n.css("border-right-width"))||0);return i=c.ie&&c.ie<8&&0===t?1:i},setTableWidth:function(){var e=this,t=e.get("width"),n=0,i=null;"auto"!=t&&(e.get("forceFit")?e.forceFitColumns():e._isAllowScrollLeft()&&(n=e.getColumnsWidth(),i=e.get("emptyColumn"),i.get("el").width(n>t?u:"auto")))},_uiSetWidth:function(){var e=this;e.setTableWidth()},_uiSetForceFit:function(e){var t=this;e&&t.setTableWidth()}},{ATTRS:{columns:{value:[]},emptyColumn:{},focusable:{value:!1},forceFit:{sync:!1,view:!0,value:!1},tpl:{view:!0,value:'<table cellspacing="0" class="'+a+'grid-table" cellpadding="0"><thead><tr></tr></thead></table>'},tableCls:{view:!0},xview:{value:d},events:{value:{add:!1,remove:!1}}}},{xclass:"grid-header",priority:1});n.exports=f}),define("bui/grid/column",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.prefix,o=a+"grid-hd-title",s=a+"grid-hd-open",l="sort-",u="ASC",c="DESC",d=a+"grid-hd-menu-trigger",f="grid-hd-menu-trigger",g=r.Component.View.extend({setTplContent:function(e){var t,n=this,r=n.get("sortTpl"),a=n.get("triggerTpl"),s=n.get("el");g.superclass.setTplContent.call(n,e),t=s.find("."+o),i(r).insertAfter(t),i(a).insertAfter(t)},_setContent:function(){this.setTplContent()},_uiSetShowMenu:function(e){var t=this,n=t.get("triggerTpl"),r=t.get("el"),a=r.find("."+o);e?i(n).insertAfter(a):r.find("."+d).remove()},_uiSetTitle:function(){this.get("rendered")&&this._setContent()},_uiSetDraggable:function(){this.get("rendered")&&this._setContent()},_uiSetSortable:function(){this.get("rendered")&&this._setContent()},_uiSetTpl:function(){this.get("rendered")&&this._setContent()},_uiSetSortState:function(e){var t=this,n=t.get("el"),i=l+"asc",r=l+"desc";n.removeClass(i+" "+r),"ASC"===e?n.addClass(i):"DESC"===e&&n.addClass(r)},_uiSetOpen:function(e){var t=this,n=t.get("el");e?n.addClass(s):n.removeClass(s)}},{ATTRS:{sortTpl:{view:!0,getter:function(){var e=this,t=e.get("sortable");return t?'<span class="'+a+'grid-sort-icon">&nbsp;</span>':""}},tpl:{}}}),h=r.Component.Controller.extend({_toggleSortState:function(){var e=this,t=e.get("sortState"),n=t&&t===u?c:u;e.set("sortState",n)},performActionInternal:function(e){var t=this,n=i(e.target),r=t.get("prefixCls");n.hasClass(r+f)||t.get("sortable")&&t._toggleSortState()},_uiSetWidth:function(e){e&&this.set("originWidth",e)}},{ATTRS:{elTagName:{value:"th"},open:{view:!0,value:!1},dataIndex:{view:!0,value:""},draggable:{sync:!1,view:!0,value:!0},editor:{},focusable:{value:!1},fixed:{value:!1},id:{},renderer:{},resizable:{value:!0},sortable:{sync:!1,view:!0,value:!0},sortState:{view:!0,value:null},title:{sync:!1,view:!0,value:"&#160;"},width:{value:100},showMenu:{view:!0,value:!1},triggerTpl:{view:!0,value:'<span class="'+d+'"></span>'},tpl:{sync:!1,view:!0,value:'<div class="'+a+'grid-hd-inner"><span class="'+o+'">{title}</span></div>'},cellTpl:{value:""},events:{value:{afterWidthChange:!0,afterSortStateChange:!0,afterVisibleChange:!0,click:!0,resize:!0,move:!0}},xview:{value:g}}},{xclass:"grid-hd",priority:1});h.Empty=h.extend({},{ATTRS:{type:{value:"empty"},sortable:{view:!0,value:!1},width:{view:!0,value:null},tpl:{view:!0,value:'<div class="'+a+'grid-hd-inner"></div>'}}},{xclass:"grid-hd-empty",priority:1}),n.exports=h}),define("bui/grid/format",["jquery"],function(e,t,n){function i(e){return 10>e?"0"+e:e}var r=e("jquery"),a={dateRenderer:function(e){if(!e)return"";if(BUI.isString(e))return e;var t=null;try{t=new Date(e)}catch(n){return""}return t&&t.getFullYear?t.getFullYear()+"-"+i(t.getMonth()+1)+"-"+i(t.getDate()):""},datetimeRenderer:function(e){if(!e)return"";if(BUI.isString(e))return e;var t=null;try{t=new Date(e)}catch(n){return""}return t&&t.getFullYear?t.getFullYear()+"-"+i(t.getMonth()+1)+"-"+i(t.getDate())+" "+i(t.getHours())+":"+i(t.getMinutes())+":"+i(t.getSeconds()):""},cutTextRenderer:function(e){return function(t){return t=t||"",t.toString().length>e?t.toString().substring(0,e)+"...":t}},enumRenderer:function(e){return function(t){return e[t]||""}},multipleItemsRenderer:function(e){var t=a.enumRenderer(e);return function(e){var n=[];return e?(BUI.isArray(e)||(e=e.toString().split(",")),r.each(e,function(e,i){n.push(t(i))}),n.join(",")):""}},moneyCentRenderer:function(e){return BUI.isString(e)&&(e=parseFloat(e)),r.isNumberic(e)?(.01*e).toFixed(2):e}};n.exports=a}),define("bui/grid/plugins/base",["bui/common","jquery","bui/menu"],function(e,t,n){var i=e("bui/common"),r=e("bui/grid/plugins/selection"),a={};i.mix(a,{CheckSelection:r.CheckSelection,RadioSelection:r.RadioSelection,Cascade:e("bui/grid/plugins/cascade"),CellEditing:e("bui/grid/plugins/cellediting"),RowEditing:e("bui/grid/plugins/rowediting"),DialogEditing:e("bui/grid/plugins/dialog"),AutoFit:e("bui/grid/plugins/autofit"),GridMenu:e("bui/grid/plugins/gridmenu"),Summary:e("bui/grid/plugins/summary"),RowNumber:e("bui/grid/plugins/rownumber"),ColumnGroup:e("bui/grid/plugins/columngroup"),RowGroup:e("bui/grid/plugins/rowgroup"),ColumnResize:e("bui/grid/plugins/columnresize"),ColumnChecked:e("bui/grid/plugins/columnchecked")}),n.exports=a}),define("bui/grid/plugins/selection",["jquery","bui/common"],function(e,t,n){function i(e){i.superclass.constructor.call(this,e)}var r=e("jquery"),a=e("bui/common"),o=a.prefix,s=o+"grid-checkBox",l="x-grid-checkbox",u=o+"grid-radio";a.extend(i,a.Base),i.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+s+'-container"><span class="'+l+'"></span></div>'}},a.augment(i,{createDom:function(e){var t=this,n={title:"",width:t.get("width"),fixed:!0,resizable:!1,sortable:!1,tpl:'<div class="'+o+'grid-hd-inner">'+t.get("cellInner"),cellTpl:t.get("cellInner")},i=e.addColumn(n,0);e.set("multipleSelect",!0),t.set("column",i)},bindUI:function(e){var t=this,n=t.get("column"),i=n.get("el"),r=i.find("."+l);r.on("click",function(){var t=i.hasClass("checked");t?(e.clearSelection(),i.removeClass("checked")):(e.setAllSelection(),i.addClass("checked"))}),e.on("rowunselected",function(){i.removeClass("checked")}),e.on("clear",function(){i.removeClass("checked")})}});var c=function(e){c.superclass.constructor.call(this,e)};a.extend(c,a.Base),c.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+o+'grid-radio-container"><input  class="'+u+'" type="radio"></div>'}},a.augment(c,{createDom:function(e){var t=this,n={title:"",width:t.get("width"),resizable:!1,fixed:!0,sortable:!1,cellTpl:t.get("cellInner")},i=e.addColumn(n,0);e.set("multipleSelect",!1),t.set("column",i)},bindUI:function(e){var t=this;e.on("rowselected",function(e){t._setRowChecked(e.row,!0)}),e.on("rowunselected",function(e){t._setRowChecked(e.row,!1)})},_setRowChecked:function(e,t){var n=r(e),i=n.find("."+u);i.attr("checked",t)}});var d={CheckSelection:i,RadioSelection:c};n.exports=d}),define("bui/grid/plugins/cascade",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.prefix,o="data-record",s=a+"grid-cascade",l=s+"-expand",u=s+"-row",c=s+"-cell",d=s+"-collapse",f=function(e){f.superclass.constructor.call(this,e)};r.extend(f,r.Base),f.ATTRS={width:{value:40},cellInner:{value:'<span class="'+s+'"><i class="'+s+'-icon"></i></span>'},rowTpl:{value:'<tr class="'+u+'"><td class="'+c+'"></td></tr>'},renderer:{},events:["expand","collapse","removed"]},r.augment(f,{initializer:function(e){{var t=this,n={title:"",elCls:"center",width:t.get("width"),resizable:!1,fixed:!0,sortable:!1,cellTpl:t.get("cellInner")};e.addColumn(n,0)}e.set("innerBorder",!1),t.set("grid",e)},bindUI:function(e){var t=this;e.on("cellclick",function(e){var n=i(e.domTarget),r=n.closest("."+s);r.length&&(r.hasClass(l)?t._onCollapse(e.record,e.row,r):t._onExpand(e.record,e.row,r))}),e.on("columnvisiblechange",function(){t._resetColspan()}),e.on("rowremoved",function(e){t.remove(e.record)}),e.on("clear",function(){t.removeAll()})},expandAll:function(){var e=this,t=e.get("grid"),n=t.getRecords();i.each(n,function(t,n){e.expand(n)})},expand:function(e){var t=this,n=t.get("grid"),i=n.findRow(e);i&&t._onExpand(e,i)},collapse:function(e){var t=this,n=t.get("grid"),i=n.findRow(e);i&&t._onCollapse(e,i)},removeAll:function(){var e=this,t=e._getAllCascadeRows();t.each(function(t,n){e._removeCascadeRow(n)})},remove:function(e){var t=this,n=t._findCascadeRow(e);n&&t._removeCascadeRow(n)},collapseAll:function(){var e=this,t=e.get("grid"),n=t.getRecords();i.each(n,function(t,n){e.collapse(n)})},_getRowRecord:function(e){return i(e).data(o)},_removeCascadeRow:function(e){this.fire("removed",{record:i(e).data(o),row:e}),i(e).remove()},_findCascadeRow:function(e){var t=this,n=t._getAllCascadeRows(),r=null;return i.each(n,function(n,i){return t._getRowRecord(i)===e?(r=i,!1):void 0}),r},_getAllCascadeRows:function(){var e=this,t=e.get("grid");return t.get("el").find("."+u)},_getCascadeRow:function(e){var t=i(e).next();return t.hasClass(u)?t:null},_getRowContent:function(e){var t=this,n=t.get("renderer"),i=n?n(e):"";return i},_createCascadeRow:function(e,t){var n=this,r=n.get("rowTpl"),a=n._getRowContent(e),s=i(r).insertAfter(t);return s.find("."+c).append(i(a)),s.data(o,e),s},_onExpand:function(e,t,n){{var r=this,a=r._getCascadeRow(t);r._getColumnCount(t)}n=n||i(t).find("."+s),n.addClass(l),a&&a.length||(a=r._createCascadeRow(e,t)),i(a).removeClass(d),r._setColSpan(a,t),r.fire("expand",{record:e,row:a[0]})},_onCollapse:function(e,t,n){var r=this,a=r._getCascadeRow(t);n=n||i(t).find("."+s),n.removeClass(l),a&&a.length&&(i(a).addClass(d),r.fire("collapse",{record:e,row:a[0]}))},_getColumnCount:function(e){return i(e).children().filter(function(){return"none"!==i(this).css("display")}).length},_setColSpan:function(e,t){t=t||i(e).prev();var n=this,r=n._getColumnCount(t);i(e).find("."+c).attr("colspan",r)},_resetColspan:function(){var e=this,t=e._getAllCascadeRows();i.each(t,function(t,n){e._setColSpan(n)})},destructor:function(){var e=this;e.removeAll(),e.off(),e.clearAttrVals()}}),n.exports=f}),define("bui/grid/plugins/cellediting",["jquery"],function(e,t,n){var i=e("jquery"),r=e("bui/grid/plugins/editing"),a=BUI.prefix+"grid-body",o=BUI.prefix+"grid-cell",s=function(e){s.superclass.constructor.call(this,e)};s.ATTRS={triggerCls:{value:o}},BUI.extend(s,r),BUI.augment(s,{getEditorCfgs:function(e){var t=this,n=t.get("grid"),i=n.get("el").find("."+a),r=[];return BUI.each(e,function(e){var t={field:e,changeSourceEvent:null,hideExceptNode:i,autoUpdate:!1,preventHide:!1,editableFn:e.editableFn};"checkbox"===e.xtype&&(t.innerValueField="checked"),r.push(t)}),r},getEditor:function(e){if(!e)return null;var t=this,n=t.get("editors"),i=null;return BUI.each(n,function(t){return t.get("field").get("name")===e?(i=t,!1):void 0}),i},beforeShowEditor:function(e,t){var n=this,r=i(t.cell);n.resetWidth(e,r.outerWidth()),n._makeEnable(e,t)},_makeEnable:function(e,t){var n,i,r,a=e.get("editableFn");BUI.isFunction(a)&&(n=t.field,r=t.record,r&&n&&(i=a(r[n],r),i?e.get("field").enable():e.get("field").disable()))},resetWidth:function(e,t){e.set("width",t)},updateRecord:function(e,t,n){var i=n.getValue(),r=n.get("field").get("name"),a=t[r];i=BUI.isDate(i)?i.getTime():i,a!==i&&e.setValue(t,r,i)},getAlignNode:function(e){return i(e.cell)},getFields:function(){var e=[],t=this,n=t.get("editors");return BUI.each(n,function(t){e.push(t.get("field"))}),e},getEditValue:function(e){if(e.record&&e.field){var t=e.record[e.field];return null==t?"":t}return""}}),n.exports=s}),define("bui/grid/plugins/editing",["jquery"],function(e,t,n){function i(e){i.superclass.constructor.call(this,e)}var r=e("jquery"),a=BUI.prefix+"grid-cell-inner",o=BUI.prefix+"grid-cell-error";BUI.extend(i,BUI.Base),i.ATTRS={align:{value:{points:["cl","cl"]}},showError:{value:!0},errorTpl:{value:'<span class="x-icon '+o+' x-icon-mini x-icon-error" title="{error}">!</span>'},isInitEditors:{value:!1},record:{},curEditor:{},hasValid:{},editors:{shared:!1,value:[]},triggerCls:{},triggerSelected:{value:!0}},BUI.augment(i,{initializer:function(e){var t=this;t.set("grid",e),t.initEditing(e)},renderUI:function(){var t=this,n=t.get("grid");e.async("bui/editor",function(e){t.initEditors(e),t._initGridEvent(n),t.set("isInitEditors",!0),t.fire("editorready")})},initEditing:function(){},_getCurEditor:function(){return this.get("curEditor")},_initGridEvent:function(e){function t(e,t){n.get("hasValid")&&n.validRecord(e,n.getFields(),r(t))}var n=this,i=e.get("header");e.on("cellclick",function(e){var t=null,i=e.domTarget,a=n.get("triggerCls"),o=n._getCurEditor();return o&&o.get("acceptEvent")?(o.accept(),o.hide()):o&&o.cancel(),t=n.getEditor(e.field),t&&r(i).closest("."+a).length&&(n.showEditor(t,e),!n.get("triggerSelected"))?!1:void 0
}),e.on("rowcreated",function(e){t(e.record,e.row)}),e.on("rowremoved",function(e){n.get("record")==e.record&&n.cancel()}),e.on("rowupdated",function(e){t(e.record,e.row)}),e.on("scroll",function(e){var t=n._getCurEditor();if(t){var i=t.get("align"),r=i.node,a=r.position();a.top<0||a.top>e.bodyHeight?t.hide():(t.set("align",i),t.show())}}),i.on("afterVisibleChange",function(e){if(e.target&&e.target!=i){var t=e.target;n.onColumnVisibleChange(t)}})},initEditors:function(e){var t=this,n=t.get("grid"),i=[],r=n.get("columns");BUI.each(r,function(e){var n=t.getFieldConfig(e);n&&(n.name=e.get("dataIndex"),n.colId=e.get("id"),n.validator&&(n.validator=t.wrapValidator(n.validator)),i.push(n))});var a=t.getEditorCfgs(i);BUI.each(a,function(n){t.initEidtor(n,e)})},getFieldConfig:function(e){return e.get("editor")},wrapValidator:function(e){var t=this;return function(n){var i=t.get("record");return e(n,i)}},onColumnVisibleChange:function(){},getEditorCfgs:function(){},getEditorConstructor:function(e){return e.Editor},initEidtor:function(e,t){var n=this,i=n.getEditorConstructor(t),r=new i(e);return r.render(),n.get("editors").push(r),n.bindEidtor(r),r},bindEidtor:function(e){var t=this,n=t.get("grid"),i=n.get("store");e.on("accept",function(){var n=t.get("record");t.updateRecord(i,n,e),t.fire("accept",{editor:e,record:n}),t.set("curEditor",null)}),e.on("cancel",function(){t.fire("cancel",{editor:e,record:t.get("record")}),t.set("curEditor",null)})},getEditor:function(){},getAlignNode:function(){},getEditValue:function(){},showEditor:function(e,t){var n=this,i=n.getEditValue(t),r=n.getAlignNode(t);if(n.beforeShowEditor(e,t),n.set("record",t.record),n.fire("beforeeditorshow",{editor:e,record:t.record}),e.setValue(i),r){var a=n.get("align");a.node=r,e.set("align",a)}e.show(),n.focusEditor(e,t.field),n.set("curEditor",e),n.fire("editorshow",{editor:e,record:t.record})},focusEditor:function(e){e.focus()},beforeShowEditor:function(){},_createEditOptions:function(e,t){var n=this,i=n.get("grid"),r=i.findRow(e),a=i.findColumnByField(t),o=i.findCell(a.get("id"),r);return{record:e,field:t,cell:o[0],row:r[0]}},valid:function(){var e=this,t=e.get("grid"),n=t.get("store");if(n){var i=n.getResult();BUI.each(i,function(t){e.validRecord(t,e.getFields())})}e.set("hasValid",!0)},isValid:function(){var e=this,t=e.get("grid");return e.get("hasValid")||e.valid(),!t.get("el").find("."+o).length},clearErrors:function(){var e=this,t=e.get("grid");t.get("el").find("."+o).remove()},getFields:function(){},validRecord:function(e,t,n){var i=this,r=[];i.setInternal("record",e),t=t||i.getFields(),BUI.each(t,function(t){var n=t.get("name"),i=e[n]||"",a=t.getValidError(i);a&&r.push({name:n,error:a,id:t.get("colId")})}),i.showRecordError(e,r,n)},showRecordError:function(e,t,n){var i=this,r=i.get("grid");n=n||r.findRow(e),n&&(i._clearRowError(n),BUI.each(t,function(e){var t=r.findCell(e.id,n);i._showCellError(t,e.error)}))},updateRecord:function(){},_clearRowError:function(e){e.find("."+o).remove()},_showCellError:function(e,t){var n=this,i=BUI.substitute(n.get("errorTpl"),{error:t}),o=e.find("."+a);r(i).appendTo(o)},edit:function(e,t){var n=this,i=n._createEditOptions(e,t),r=n.getEditor(t);n.showEditor(r,i)},cancel:function(){var e=this,t=e.get("editors");BUI.each(t,function(e){e.get("visible")&&e.cancel()}),e.set("curEditor",null),e.set("record",null)},destructor:function(){var e=this,t=e.get("editors");BUI.each(t,function(e){e.destroy&&e.destroy()}),e.off(),e.clearAttrVals()}}),n.exports=i}),define("bui/grid/plugins/rowediting",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=e("bui/grid/plugins/editing"),o=r.prefix+"grid-row",s=function(e){s.superclass.constructor.call(this,e)};s.ATTRS={autoSave:{value:!1},align:{value:{points:["tl","tl"],offset:[-2,0]}},triggerCls:{value:o},editor:{}},r.extend(s,a),r.augment(s,{getEditorCfgs:function(e){var t=this,n=t.get("editor"),i=[],a=r.mix(!0,{changeSourceEvent:null,autoUpdate:!1,form:{children:e,buttonBar:{elCls:"centered toolbar"}}},n);return i.push(a),i},wrapValidator:function(e){var t=this;return function(n){var i=t.get("curEditor"),r=t.get("record"),a=i?i.getValue():r;return a?e(n,a,r):void 0}},focusEditor:function(e,t){var n=e.get("form"),i=n.getField(t);i&&i.focus()},getFieldConfig:function(e){var t=e.get("editor");if(t)return"checkbox"===t.xtype&&(t.innerValueField="checked"),t;var n={xtype:"plain"};return e.get("dataIndex")&&e.get("renderer")&&(n.renderer=e.get("renderer")),n},updateRecord:function(e,t,n){var i=this,a=n.getValue();r.each(a,function(e,t){r.isDate(e)&&(a[t]=e.getTime())}),r.mix(t,a),e.update(t),i.get("autoSave")&&e.save(t)},getEditor:function(){var e=this,t=e.get("editors");return t[0]},onColumnVisibleChange:function(e){var t=this,n=e.get("id"),i=t.getEditor(),r=i.getChild(n,!0);r&&r.set("visible",e.get("visible"))},beforeShowEditor:function(e,t){var n=this,a=n.get("grid"),o=a.get("columns"),s=e.get("form"),l=i(t.row);e.set("width",l.width()),r.each(o,function(e){var t=e.get("dataIndex"),n=s.getField(t);if(e.get("visible")){var i=e.get("el").outerWidth()-n.getAppendWidth();n.set("width",i)}else n&&n.set("visible",!1)})},getEditValue:function(e){return e.record},getEditorConstructor:function(e){return e.RecordEditor},getAlignNode:function(e){return i(e.row)},getFields:function(){var e=this,t=e.get("editors");return t[0].get("form").get("children")}}),n.exports=s}),define("bui/grid/plugins/dialog",["jquery","bui/common"],function(e,t,n){function i(e){i.superclass.constructor.call(this,e)}var r=e("jquery"),a=e("bui/common"),o="add",s="edit";i.ATTRS={autoSave:{value:!1},record:{},curIndex:{},contentId:{},editor:{},form:{},events:{value:{recordchange:!1}},editType:{}},a.extend(i,a.Base),a.augment(i,{initializer:function(t){var n=this;n.set("grid",t),e.async("bui/editor",function(e){n._initEditor(e),n.fire("editorready")})},bindUI:function(e){var t=this,n=t.get("triggerCls");n&&e.on("cellclick",function(i){var a=r(i.domTarget),o=t.get("editor");return a.hasClass(n)&&o&&(t.edit(i.record),e.get("multipleSelect"))?!1:void 0})},_initEditor:function(e){var t=this,n=t.get("contentId"),i=r("#"+n).find("form"),o=t.get("editor"),s=a.merge(o,{contentId:n,form:{srcNode:i}});o=new e.DialogEditor(s),t._bindEditor(o),t.set("editor",o),t.set("form",o.get("form"))},_bindEditor:function(e){var t=this;e.on("accept",function(){var n=e.get("form"),i=n.serializeToObject();t.saveRecord(i),t.fire("accept",{editor:e,record:t.get("record"),form:n})}),e.on("cancel",function(){t.fire("cancel",{editor:e,record:t.get("record"),form:e.get("form")})})},edit:function(e){var t=this;t.set("editType",s),t.showEditor(e)},add:function(e,t){var n=this;n.set("editType",o),n.set("curIndex",t),n.showEditor(e)},saveRecord:function(e){var t=this,n=t.get("grid"),i=t.get("editType"),r=t.get("curIndex"),s=n.get("store"),l=t.get("record");a.mix(l,e),i==o?null!=r?s.addAt(l,r):s.add(l):s.update(l),t.get("autoSave")&&s.save(l)},showEditor:function(e){var t=this,n=t.get("editor");t.set("record",e),n.show(),n.setValue(e,!0),t.fire("recordchange",{record:e,editType:t.get("editType")}),t.fire("editorshow",{eidtor:n,editType:t.get("editType")})},cancel:function(){var e=this,t=e.get("editor");t.cancel()},destructor:function(){var e=this,t=e.get("editor");t&&t.destroy(),e.off(),e.clearAttrVals()}}),n.exports=i}),define("bui/grid/plugins/autofit",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=(r.UA,function(e){a.superclass.constructor.call(this,e)});r.extend(a,r.Base),a.ATTRS={},r.augment(a,{bindUI:function(e){var t,n=this;i(window).on("resize",function(){function i(){clearTimeout(t),t=setTimeout(function(){n._autoFit(e)},100),n.set("handler",t)}i()})},_autoFit:function(e){for(var t=(i(e.get("render")),i(window).width()),n=0,r=e.get("el").parent();r[0]&&r[0]!=i("body")[0];)n+=r.outerWidth()-r.width(),r=r.parent();e.set("width",t-n)}}),n.exports=a}),define("bui/grid/plugins/gridmenu",["jquery","bui/common","bui/menu"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=e("bui/menu"),o=r.prefix,s="sort-asc",l="sort-desc",u="column-setting",c=function(e){c.superclass.constructor.call(this,e)};r.extend(c,r.Base),c.ATTRS={menu:{},activedColumn:{},triggerCls:{value:o+"grid-hd-menu-trigger"},items:{value:[{id:s,text:"\u5347\u5e8f",iconCls:"icon-arrow-up"},{id:l,text:"\u964d\u5e8f",iconCls:"icon-arrow-down"},{xclass:"menu-item-sparator"},{id:u,text:"\u8bbe\u7f6e\u5217",iconCls:"icon-list-alt"}]}},r.augment(c,{initializer:function(e){var t=this;t.set("grid",e)},renderUI:function(e){var t=this,n=e.get("columns");r.each(n,function(e){t._addShowMenu(e)})},bindUI:function(e){var t=this;e.on("columnadd",function(e){t._addShowMenu(e.column)}),e.on("columnclick",function(e){var n,r=i(e.domTarget),a=e.column;t.set("activedColumn",a),r.hasClass(t.get("triggerCls"))&&(n=t.get("menu")||t._initMenu(),n.set("align",{node:r,points:["bl","tl"],offset:[0,0]}),n.show(),t._afterShow(a,n))})},_addShowMenu:function(e){e.get("fixed")||e.set("showMenu",!0)},_afterShow:function(e,t){{var n=this;n.get("grid")}t=t||n.get("menu"),n._resetSortMenuItems(e,t),n._resetColumnsVisible(t)},_resetColumnsVisible:function(e){var t=this,n=e.findItemById(u),r=n.get("subMenu")||t._initColumnsMenu(n),a=t.get("grid").get("columns");r.removeChildren(!0),i.each(a,function(e,t){if(!t.get("fixed")){var n={xclass:"context-menu-item",text:t.get("title"),column:t,iconCls:"icon"},i=r.addChild(n);t.get("visible")&&i.set("selected",!0)}})},_resetSortMenuItems:function(e,t){var n=t.findItemById(s),i=t.findItemById(l);e.get("sortable")?(n.set("disabled",!1),i.set("disabled",!1)):(n.set("disabled",!0),i.set("disabled",!0))},_initMenu:function(){var e,t=this,n=t.get("menu");return n||(e=t.get("items"),i.each(e,function(e,t){t.xclass||(t.xclass="context-menu-item")}),n=new a.ContextMenu({children:e,elCls:"grid-menu"}),t._initMenuEvent(n),t.set("menu",n)),n},_initMenuEvent:function(e){var t=this;e.on("itemclick",function(e){var n=e.item,i=n.get("id"),r=t.get("activedColumn");i===s?r.set("sortState","ASC"):i===l&&r.set("sortState","DESC")}),e.on("afterVisibleChange",function(e){var n=e.newVal,i=t.get("activedColumn");n&&i?i.set("open",!0):i.set("open",!1)})},_initColumnsMenu:function(e){var t=new a.ContextMenu({multipleSelect:!0,elCls:"grid-column-menu"});return e.set("subMenu",t),t.on("itemclick",function(e){var t=e.item,n=t.get("column"),i=t.get("selected");i?n.set("visible",!0):n.set("visible",!1)}),t},destructor:function(){var e=this,t=e.get("menu");t&&t.destroy(),e.off(),e.clearAttrVals()}}),n.exports=c}),define("bui/grid/plugins/summary",["jquery","bui/common"],function(e,t,n){function i(e){return e>0?'<td class="'+m+'" colspan="'+e+'">&nbsp;</td>':""}function r(e,t){return'<td class="'+m+" "+h+t+'">'+a(e)+"</td>"}function a(e){return'<div class="'+g+'" ><span class="'+v+' ">'+e+"</span></div>"}function o(){return'<td class="'+m+" "+m+'-empty">&nbsp;</td>'}var s=e("jquery"),l=e("bui/common"),u=l.prefix,c=u+"grid-row",d=u+"grid-body",f=u+"grid-summary-row",g=u+"grid-cell-inner",h="grid-td-",v=u+"grid-cell-text",m=u+"grid-cell",p=function(e){p.superclass.constructor.call(this,e)};p.ATTRS={footerTpl:{value:"<tfoot></tfoot>"},footerEl:{},summaryTitle:{value:"\u67e5\u8be2\u5408\u8ba1"},pageSummaryTitle:{value:"\u672c\u9875\u5408\u8ba1"},field:{value:"summary"},pageSummaryField:{value:"pageSummary"},summaryField:{value:"summary"},pageSummary:{},summary:{}},l.extend(p,l.Base),l.augment(p,{initializer:function(e){var t=this;t.set("grid",e)},renderUI:function(e){var t=this,n=e.get("el").find("."+d),i=n.find("table"),r=s(t.get("footerTpl")).appendTo(i);t.set("footerEl",r)},bindUI:function(e){var t=this,n=e.get("store");n&&(n.on("beforeprocessload",function(e){t._processSummary(e.data)}),n.on("add",function(){t.resetPageSummary()}),n.on("remove",function(){t.resetPageSummary()}),n.on("update",function(){t.resetPageSummary()})),e.on("aftershow",function(){t.resetSummary()}),e.get("header").on("afterVisibleChange",function(){t.resetSummary()})},_processSummary:function(e){var t=this,n=t.get("footerEl");if(n.empty(),e){var i=e[t.get("pageSummaryField")],r=e[t.get("summaryField")];t.set("pageSummary",i),t.set("summary",r)}},resetPageSummary:function(){var e=this,t=e.get("grid"),n=t.get("columns"),i=e._calculatePageSummary(),r=e.get("pageEl");e.set("pageSummary",i),r&&(l.each(n,function(t){if(t.get("summary")&&t.get("visible")){var n=t.get("id"),a=r.find("."+h+n),o=e._getSummaryCellText(t,i);a.find("."+v).text(o)}}),e._updateFirstRow(r,e.get("pageSummaryTitle")))},resetSummary:function(e,t){var n=this,i=n.get("footerEl"),r=null;i.empty(),e=e||n.get("pageSummary"),e||(e=n._calculatePageSummary(),n.set("pageSummary",e)),t=t||n.get("summary"),r=n._creatSummaryRow(e,n.get("pageSummaryTitle")),n.set("pageEl",r),n._creatSummaryRow(t,n.get("summaryTitle"))},_creatSummaryRow:function(e,t){if(!e)return null;var n=this,i=n.get("footerEl"),r=n._getSummaryTpl(e),a=s(r).appendTo(i);return n._updateFirstRow(a,t),a},_updateFirstRow:function(e,t){var n=e.find("td").first(),i=n.find("."+g);if(i.length){var r=t+": ";text=i.text(),-1===text.indexOf(r)&&(text=r+text),n.html(a(text))}else n.html(a(t+":"))},_getSummaryTpl:function(e){var t=this,n=t.get("grid"),a=n.get("columns"),l=[],u=-1,d=-1,g=null;return s.each(a,function(n,a){if(a.get("visible")&&(d+=1,a.get("summary"))){l.push(i(d-u-1));var o=t._getSummaryCellText(a,e),s=r(o,a.get("id"));l.push(s),u=d}}),u!==d&&l.push(i(d-u)),g=['<tr class="',f," ",c,'">',l.join(""),o(),"</tr>"].join("")},_getSummaryCellText:function(e,t){var n=t[e.get("dataIndex")],i=null==n?"":n,r=e.get("renderer"),a=r?r(i,t):i;return a},_calculatePageSummary:function(){var e=this,t=e.get("grid"),n=t.get("store"),i=t.get("columns"),r={};return l.each(i,function(e){if(e.get("summary")){var t=e.get("dataIndex");r[t]=n.sum(t)}}),r}}),n.exports=p}),define("bui/grid/plugins/rownumber",[],function(e,t,n){function i(e){i.superclass.constructor.call(this,e)}var r="x-grid-rownumber";BUI.extend(i,BUI.Base),i.ATTRS={width:{value:40},column:{}},BUI.augment(i,{createDom:function(e){var t=this,n={title:"",width:t.get("width"),fixed:!0,resizable:!1,sortable:!1,renderer:function(e,t,n){return n+1},elCls:r},i=e.addColumn(n,0);t.set("column",i)}}),n.exports=i}),define("bui/grid/plugins/columngroup",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=r.prefix,o=a+"grid-hd-title",s=a+"grid-column-group",l=a+"grid-group-header",u=a+"grid-db-hd",c=function(e){c.superclass.constructor.call(this,e)};c.ATTRS={groups:{value:[]},columnTpl:{value:'<th class="bui-grid-hd center" colspan="{colspan}"><div class="'+a+'grid-hd-inner"><span class="'+o+'">{title}</span></div></th>'}},r.extend(c,r.Base),r.augment(c,{renderUI:function(e){var t=this,n=t.get("groups"),a=e.get("header"),o=a.get("el"),c=a.get("children"),d=i('<tr class="'+s+'"></tr>').prependTo(o.find("thead"));o.addClass(l),r.each(n,function(e){var n=t._getGroupTpl(e),r=i(n).appendTo(d);e.el=r;for(var a=e.from;a<=e.to;a++){var o=c[a];o&&o.set("group",e)}});for(var f,g=c.length-1;g>=0;g--){var h=c[g],v=h.get("group");if(v)f=v.el;else{var m=h.get("el");m.addClass(u),m.attr("rowspan",2),f?m.insertBefore(f):m.appendTo(d),f=m}}if(0!==n[0].from){var p=c[n[0].from];p&&p.get("el").css("border-left-width",1)}},_getGroupTpl:function(e){var t=this,n=t.get("columnTpl"),i=e.to-e.from+1;return r.substitute(n,{colspan:i,title:e.title})}}),n.exports=c}),define("bui/grid/plugins/rowgroup",["jquery","bui/common"],function(e,t,n){function i(e,t){return{items:[],value:e,text:t}}var r=e("jquery"),a=e("bui/common"),o="data-group",s=a.prefix,l=s+"grid-row-group",u=s+"grid-cascade",c=s+"grid-cascade-expand",d=function(e){d.superclass.constructor.call(this,e)};d.ATTRS={groups:{shared:!1,value:[]},renderer:{}},a.extend(d,a.Base),a.augment(d,{renderUI:function(e){var t=this,n=e.get("el").find("tbody");t.set("grid",e),t.set("tbodyEl",n)},bindUI:function(e){var t=this,n=[];e.on("aftershow",function(){var r=e.getItems(),o=t._getSortColumn();if(t._clear(),o){e.get("view").getAllElements().hide();var s=o.get("dataIndex");a.each(r,function(e,r){var a,l=n[n.length-1],u=o.get("renderer"),c=e[s];if(!l||c!=l.value){a=u?u(c,e):c;var d=i(c,a);d.begin=r,n.push(d),l&&t._createGroup(l),l=d}l.items.push(e)});var l=n[n.length-1];l&&t._createGroup(l),t.set("groups",n)}}),e.on("clear",function(){t._clear()}),t.get("tbodyEl").delegate("."+u,"click",function(e){var n=r(e.currentTarget),i=t._getGroupData(n);n.hasClass(c)?(t._collapse(i),n.removeClass(c)):(t._expand(i),n.addClass(c))})},_getSortColumn:function(){var e=this,t=e.get("grid"),n=t.get("store"),i=n.get("sortField");return t.findColumnByField(i)},_getGroupData:function(e){var t=e.closest("."+l);return t.data(o)},_createGroup:function(e){var t=this,n=t.get("grid"),i=e.items[0],a=n.findElement(i),s=n.get("columns").length,u=t.get("renderer"),c=u?u(e.text,e):e.text,d='<tr class="'+l+'"><td colspan="'+(s+1)+'"><div class="bui-grid-cell-inner"><span class="bui-grid-cell-text"><span class="bui-grid-cascade"><i class="bui-grid-cascade-icon"></i></span> '+c+"</span></div></td></tr>",f=r(d).insertBefore(a);f.data(o,e)},_getGroupedElements:function(e){for(var t=this,n=t.get("grid"),i=n.get("view").getAllElements(),a=e.begin,o=e.items.length+a,s=[],l=a;o>l;l++)s.push(i[l]);return r(s)},_expand:function(e){var t=this,n=t._getGroupedElements(e);n.show()},_collapse:function(e){var t=this,n=t._getGroupedElements(e);n.hide()},_clear:function(){var e=this,t=e.get("groups"),n=e.get("tbodyEl");a.Array.empty(t),n.find("."+l).remove()}}),n.exports=d}),define("bui/grid/plugins/columnresize",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=15,o=30,s="col-resize",l=function(e){l.superclass.constructor.call(this,e)};l.ATTRS={resizing:{value:!1},draging:{}},r.extend(l,r.Base),r.augment(l,{renderUI:function(e){this.set("grid",e)},bindUI:function(e){function t(){var n=c.get("draging");if(r&&n){var a=u>0?r:l,o=a.get("width"),s=n.end-n.start;if(c.hideDrag(),e.get("forceFit")){var d=a.get("originWidth"),f=o/d,g=(o+s)/f;a.set("originWidth",g),a.set("width",g)}else a.set("width",o+s)}i(document).off("mouseup",t)}function n(){i(document).on("mouseup",t)}var r,l,u,c=this,d=e.get("header");d.get("el").delegate(".bui-grid-hd","mouseenter",function(e){var t=c.get("resizing");if(!t){var n=e.currentTarget;r=c._getColumn(n),l=c._getPreCol(r)}}).delegate(".bui-grid-hd","mouseleave",function(){var e=c.get("resizing");!e&&r&&(r.get("el").css("cursor",""),r=null)}).delegate(".bui-grid-hd","mousemove",function(t){var n=c.get("resizing");if(!n&&r){var i=r.get("el"),d=t.pageX,f=i.offset(),g=f.left,h=i.width();a>d-g&&l?(i.css("cursor",s),u=-1):a>g+h-d?(u=1,i.css("cursor",s)):r.get("el").css("cursor","")}if(n){t.preventDefault();var v=c.get("draging"),m=v.start,d=t.pageX,p=d-m,h=u>0?r.get("width"):l.get("width"),b=h+p;b>o&&b<e.get("el").width()&&(v.end=d,c.moveDrag(d))}}).delegate(".bui-grid-hd","mousedown",function(e){var t=c.get("resizing");!t&&r&&r.get("el").css("cursor")==s&&(e.preventDefault(),c.showDrag(e.pageX),n())})},showDrag:function(e){var t=this,n=t.get("grid"),r=n.get("header"),a=n.get("el").find(".bui-grid-body"),o=r.get("el").height()+a.height(),s=r.get("el").offset(),l=t.get("dragEl");if(!l){var u='<div class="bui-drag-line"></div>';l=i(u).appendTo("body"),t.set("dragEl",l)}l.css({top:s.top,left:e,height:o}),t.set("resizing",!0),t.set("draging",{start:e,end:e}),l.show()},hideDrag:function(){var e=this,t=e.get("dragEl");t&&t.hide(),e.set("draging",null),e.set("resizing",!1)},moveDrag:function(e){var t=this,n=t.get("dragEl");n&&n.css("left",e)},_getColumn:function(e){var t=this,n=t.get("grid").get("columns"),i=null;return r.each(n,function(t){return t.containsElement(e)?(i=t,!1):void 0}),i},_getPreCol:function(e){var t=this,n=t.get("grid").get("columns"),i=null;return r.each(n,function(t){return t==e?!1:void(t.get("visible")&&(i=t))}),i}}),n.exports=l}),define("bui/grid/plugins/columnchecked",["jquery","bui/common"],function(e,t,n){var i=e("jquery"),r=e("bui/common"),a=function(e){a.superclass.constructor.call(this,e)};r.extend(a,r.Base),a.ATTRS={triggerCls:{value:"x-col-checkbox"},uncheckedTpl:{value:'<span class="x-col-checkbox"></span>'},checkedTpl:{value:'<span class="x-col-checkbox x-col-checkbox-checked"></span>'}},r.augment(a,{renderUI:function(e){var t=this,n=e.get("columns"),i=t.get("uncheckedTpl"),a=t.get("checkedTpl");r.each(n,function(e){if(e.get("checkable")){var t=e.get("renderer"),n=function(e,n){var r=t?t(e,n):"";return r=e?a+r:i+r};e.set("renderer",n)}})},bindUI:function(e){var t=this,n=t.get("triggerCls"),r=e.get("store");e.on("cellclick",function(e){var t=i(e.domTarget);if(t.hasClass(n)){var a=e.record,o=e.field,s=a[o];return r.setValue(a,o,!s),!1}})}}),n.exports=a}),function(){"false"!=BUI.loaderScript.getAttribute("data-auto-use")&&BUI.use(["bui/common","bui/data","bui/list","bui/picker","bui/menu","bui/toolbar","bui/form","bui/mask","bui/select","bui/tab","bui/calendar","bui/overlay","bui/editor","bui/grid","bui/tooltip"])}();